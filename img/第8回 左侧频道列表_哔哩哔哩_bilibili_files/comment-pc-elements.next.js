!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(r,o){var a=e.apply(t,i);function s(e){n(a,r,o,s,l,"next",e)}function l(e){n(a,r,o,s,l,"throw",e)}s(void 0)}))}}function r(e,n,i){return n=d(n),function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return t(e)}(e,h()?Reflect.construct(n,i||[],d(e).constructor):n.apply(e,i))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,x(i.key),i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},u.apply(null,arguments)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){m=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),s=new I(i||[]);return r(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",f="executing",v="completed",b={};function y(){}function g(){}function w(){}var x={};c(x,a,(function(){return this}));var k=Object.getPrototypeOf,A=k&&k(k(M([])));A&&A!==n&&i.call(A,a)&&(x=A);var _=w.prototype=y.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(r,o,a,s){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return o=o?o.then(r,r):r()}})}function S(t,n,i){var r=p;return function(o,a){if(r===f)throw Error("Generator is already running");if(r===v){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=T(s,i);if(l){if(l===b)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var c=d(t,n,i);if("normal"===c.type){if(r=i.done?v:h,c.arg===b)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=v,i.method="throw",i.arg=c.arg)}}}function T(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),b;var o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return g.prototype=w,r(_,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:g,configurable:!0}),g.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new C(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(_),c(_,l,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=M,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;P(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:M(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),b}},t}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function w(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||A(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function A(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}function _(e){var t="function"==typeof Map?new Map:void 0;return _=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(h())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&b(r,n.prototype),r}(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},_(e)}("undefined"==typeof globalThis?"undefined":k(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":k(window))<"u"?window:("undefined"==typeof global?"undefined":k(global))<"u"?global:("undefined"==typeof self?"undefined":k(self))<"u"&&self;var E={exports:{}};!function(e,t){!function(e){var t=function(){function e(e){var t=this;this.disposables=[],this.playing=!1,this.valid=!1,this.remove=!1,this.raf=0;var n=e.src,i=e.width,r=e.height,o=e.sizing,a=e.autoplay,s=e.loop,l=e.canvas||document.createElement("canvas");this.canvas=l,e.container&&(e.container.appendChild(l),this.remove=!0),this.initVideo(n,a,s),this.initWebgl(i,r,o),this.disposables.unshift((function(){t.playing&&t.pause(),t.raf&&window.cancelAnimationFrame(t.raf),t.remove&&t.canvas.parentElement&&t.canvas.parentElement.removeChild(t.canvas)}))}return Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.video.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.video.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this.video.src},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t,n){var i=this;this.video.addEventListener(e,t,n),this.disposables.push((function(){i.video.removeEventListener(e,t,n)}))},e.prototype.initVideo=function(e,t,n){var i=this,r=document.createElement("video");this.video=r,r.src=e,r.autoplay=t||!1,r.muted=!0,r.volume=0,r.muted=!0,r.loop=n||!1,r.style.display="none",r.crossOrigin="anonymous",r.setAttribute("type","video/mp4"),this.addEventListener("play",(function(){i.raf=window.requestAnimationFrame((function(){i.nextFrame()}))})),this.addEventListener("playing",(function(){i.valid=!0})),this.addEventListener("ended",(function(){i.playing=!1}))},e.prototype.nextFrame=function(){var e=this;this.playing&&(this.callWebglDraw(),this.raf=window.requestAnimationFrame((function(){e.nextFrame()})))},e.prototype.callWebglDraw=function(){var e=this.gl;this.valid&&(e.texImage2D(e.TEXTURE_2D,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,this.video),e.drawArrays(e.TRIANGLE_STRIP,0,4))},e.prototype.dispose=function(){for(;this.disposables.length;)this.disposables.pop()()},e.prototype.play=function(){return this.playing=!0,this.valid=!1,this.video.play(),this},e.prototype.pause=function(){return this.playing=!1,this.video.pause(),this},e.prototype.reload=function(e){if(e)return this.video.src=e,this;console.warn("please set a valid src")},e.prototype.initWebgl=function(e,t,n){var i=1,r=[e,t];"raw"!==n&&(i=window.devicePixelRatio||1,r.forEach((function(e,t){r[t]=e*i})),"dpr-raw"===n&&(this.canvas.style.setProperty("transform","scale(".concat(1/i,")")),this.canvas.style.setProperty("transform-origin","left top"))),this.canvas.width=r[0],this.canvas.height=r[1];var o=this.canvas.getContext("webgl");this.gl=o,o.viewport(0,0,r[0],r[1]);var a=this.initShaderProgram(o);o.linkProgram(a),o.useProgram(a);var s=this.initBuffer(o);o.bindBuffer(o.ARRAY_BUFFER,s.position);var l=o.getAttribLocation(a,"a_position");o.enableVertexAttribArray(l),o.vertexAttribPointer(l,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,s.texture);var c=o.getAttribLocation(a,"a_texCoord");o.enableVertexAttribArray(c),o.vertexAttribPointer(c,2,o.FLOAT,!1,0,0);var u=this.initTexture(o);o.bindTexture(o.TEXTURE_2D,u);var d=o.getUniformLocation(a,"u_scale");return o.uniform2fv(d,[i,i]),o},e.prototype.createShader=function(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(i)),i},e.prototype.initShaderProgram=function(e){var t=this.createShader(e,e.VERTEX_SHADER,"\n          attribute vec2 a_position;\n          attribute vec2 a_texCoord;\n          varying vec2 v_texCoord;\n          uniform vec2 u_scale;\n          void main(void) {\n              gl_Position = vec4(a_position, 0.0, 1.0);\n              v_texCoord = a_texCoord;\n          }\n          "),n=this.createShader(e,e.FRAGMENT_SHADER,"\n          precision lowp float;\n          varying vec2 v_texCoord;\n          uniform sampler2D u_sampler;\n          void main(void) {\n              gl_FragColor = vec4(texture2D(u_sampler, v_texCoord).rgb, texture2D(u_sampler, v_texCoord+vec2(-0.5, 0)).r);\n          }\n          "),i=e.createProgram();return e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),i},e.prototype.initBuffer=function(e){var t=new Float32Array([-1,1,1,1,-1,-1,1,-1]),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var i=e.createBuffer(),r=new Float32Array([.5,1,1,1,.5,0,1,0]);return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),{position:n,texture:i}},e.prototype.initTexture=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},e}();e.create=function(e){return new t(e)},Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,E.exports);var C=E.exports,S=function(e){function t(){var e;return o(this,t),(e=r(this,t)).alphaVideo=null,e.attachShadow({mode:"open"}).innerHTML='\n      <style>\n        #wrap {\n          overflow: hidden;\n        }\n      </style>\n      <div id="wrap">\n        <canvas></canvas>\n      </div>\n    ',e}return p(t,e),s(t,[{key:"wrap",get:function(){return this.shadowRoot.querySelector("#wrap")}},{key:"canvas",get:function(){return this.shadowRoot.querySelector("canvas")}},{key:"connectedCallback",value:function(){var e=this,t=this.getAttribute("src"),n=this.getAttribute("width"),i=this.getAttribute("height"),r=null!==this.getAttribute("loop"),o=null!==this.getAttribute("autoplay");!t||!n||!i||(this.wrap.style.setProperty("width","".concat(n,"px")),this.wrap.style.setProperty("height","".concat(i,"px")),this.alphaVideo=C.create({src:t,canvas:this.canvas,width:Number(n),height:Number(i),sizing:"dpr-raw",loop:r}),this.alphaVideo.addEventListener("ended",(function(){e.dispatchEvent(new CustomEvent("ended"))})),o&&this.play())}},{key:"play",value:function(){var e;null==(e=this.alphaVideo)||e.play()}},{key:"disconnectedCallback",value:function(){this.alphaVideo&&(this.alphaVideo.dispose(),this.alphaVideo=null)}}])}(_(HTMLElement));customElements.define("bili-alpha-video",S);var T,O=!0,P=function(){return O&&(O="undefined"==typeof window),O},I=function(){var e,t,n,i;if(P())return!1;if(void 0!==T)return T;try{if("undefined"!=typeof navigator&&/Firefox\/(\d+)/i.test(navigator.userAgent))return T=Number((null===(e=navigator.userAgent.match(/Firefox\/(\d+)/i))||void 0===e?void 0:e[1])||"0")>=65;var r=document.createElement("canvas");T=!!(null===(t=r.getContext)||void 0===t?void 0:t.call(r,"2d"))&&0===(null===(i=null===(n=r.toDataURL)||void 0===n?void 0:n.call(r,"image/webp"))||void 0===i?void 0:i.indexOf("data:image/webp"))}catch(e){T=!1}return T};P()||window.IntersectionObserver;var M=function(e){return function(e){return"number"==typeof e}(e)&&(0|e)===e};var L=/\.(jpeg|jpg|png|webp|gif|avif)$/,j=function(e){return!!function(e){return!!/\/bfs\//.test(e)}(e)&&!!function(e){var t;return(null===(t=e.match(L))||void 0===t?void 0:t[0])||null}(e)},R=function(e){return"number"!=typeof e||isNaN(e)?0:Math.floor(e)||0};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}var N="bmgOnLoad",B="bmgOnError",z="__BMG_TRACKER_COLLECT_EXTS__",U=function(e){return"function"==typeof e},F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},V={};Object.defineProperty(V,"__esModule",{value:!0});var H=!0,W=V.default=function(){return H&&(H="undefined"==typeof window),H},$={};Object.defineProperty($,"__esModule",{value:!0});var q=/\.(jpeg|jpg|png|webp|gif|avif)$/;$.default=function(e){var t;return(null===(t=e.match(q))||void 0===t?void 0:t[0])||null};!function(e){var t=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseAvif=e.canUseAvif=e.setAvif=void 0;var n,i=t(V);e.setAvif=function(e){n=e},e.canUseAvif=function(){return!(0,i.default)()&&void 0!==n&&n},e.asyncCanUseAvif=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseAvif)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setAvif)(!1),t(!1)},n.onload=function(){(0,e.setAvif)(!0),t(!0)},n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="}))}}({});!function(e){var t=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseWebP=e.canUseWebP=e.setWebp=void 0;var n,i=t(V);e.setWebp=function(e){n=e},e.canUseWebP=function(){var e,t,r,o;if((0,i.default)())return!1;if(void 0!==n)return n;try{if("undefined"!=typeof navigator&&/Firefox\/(\d+)/i.test(navigator.userAgent))return n=Number((null===(e=navigator.userAgent.match(/Firefox\/(\d+)/i))||void 0===e?void 0:e[1])||"0")>=65;var a=document.createElement("canvas");n=!!(null===(t=a.getContext)||void 0===t?void 0:t.call(a,"2d"))&&0===(null===(o=null===(r=a.toDataURL)||void 0===r?void 0:r.call(a,"image/webp"))||void 0===o?void 0:o.indexOf("data:image/webp"))}catch(e){n=!1}return n},e.asyncCanUseWebP=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseWebP)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setWebp)(!1),t(!1)},n.onload=function(){(0,e.setWebp)(!0),t(!0)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="}))}}({});var G=null;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.commitLog=e.getSpmId=e.getSpmPrefix=void 0;var t=function(){return"undefined"==typeof window},n="";e.getSpmPrefix=function(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t())return"";if(n&&!i)return n;try{return n=(null===(e=document.querySelector("meta[name=spm_prefix]"))||void 0===e?void 0:e.content)||""}catch(i){return""}},e.getSpmId=function(t){if(!t)return"";var n=(0,e.getSpmPrefix)();return n?t.indexOf(n)>-1?t:"".concat(n,".").concat(t):""},e.commitLog=function(n,i,r,o){var a,s,l,c;if(!t()&&(window.reportConfig||window.MReporter)&&n&&i){var u=null;if(!u&&window.reportConfig)if(window.reportMsgObj)u=window.reportMsgObj;else{var d=window.reportConfig.msgObjects;u=window[d]||null}var p=i.indexOf("selfDef");if(p>-1)u&&(u[i.substring(p+8)]=r,null===(a=window.reportObserver)||void 0===a||a.forceCommit());else{var h=(0,e.getSpmPrefix)();if(h){var f="object"==D(r)?JSON.stringify(r):JSON.stringify({});if(window.MReporter)return i.indexOf(h)>-1&&(i=i.replace("".concat(h,"."),"")),void(null===(l=(s=window.MReporter)[n])||void 0===l||l.call(s,{evt:i,msg:f,target_url:o||""}));null===(c=window.reportObserver)||void 0===c||c.reportCustomData(n,{spm_id:(0,e.getSpmId)(i),msg:f,target_url:o||""})}}}}}({});var X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Z={},Y={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});var K=!0,J=Q.default=function(){return K&&(K="undefined"==typeof window),K};!function(e){var t=X&&X.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseAvif=e.canUseAvif=e.setAvif=void 0;var n,i=t(Q);e.setAvif=function(e){n=e};e.canUseAvif=function(){return!(0,i.default)()&&(void 0!==n&&n)};e.asyncCanUseAvif=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseAvif)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setAvif)(!1),t(!1)},n.onload=function(){(0,e.setAvif)(!0),t(!0)},n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="}))}}(Y);var ee={};!function(e){var t=X&&X.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseWebP=e.canUseWebP=e.setWebp=void 0;var n,i=t(Q);e.setWebp=function(e){n=e};e.canUseWebP=function(){var e,t,r,o;if((0,i.default)())return!1;if(void 0!==n)return n;try{if("undefined"!=typeof navigator&&/Firefox\/(\d+)/i.test(navigator.userAgent))return n=Number((null===(e=navigator.userAgent.match(/Firefox\/(\d+)/i))||void 0===e?void 0:e[1])||"0")>=65;var a=document.createElement("canvas");n=!!(null===(t=a.getContext)||void 0===t?void 0:t.call(a,"2d"))&&0===(null===(o=null===(r=a.toDataURL)||void 0===r?void 0:r.call(a,"image/webp"))||void 0===o?void 0:o.indexOf("data:image/webp"))}catch(e){n=!1}return n};e.asyncCanUseWebP=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseWebP)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setWebp)(!1),t(!1)},n.onload=function(){(0,e.setWebp)(!0),t(!0)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="}))}}(ee);var te={},ne=X&&X.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});var ie=ne(Q);te.default=function(){return!(0,ie.default)()&&!!window.HTMLPictureElement},function(e){var t=X&&X.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.autoDetectAll=e.autoDetect=e.canUseHtmlPictureElement=e.canUseWebP=e.setWebp=e.canUseAvif=e.setAvif=void 0;var n=Y;Object.defineProperty(e,"canUseAvif",{enumerable:!0,get:function(){return n.canUseAvif}}),Object.defineProperty(e,"setAvif",{enumerable:!0,get:function(){return n.setAvif}});var i=ee;Object.defineProperty(e,"canUseWebP",{enumerable:!0,get:function(){return i.canUseWebP}}),Object.defineProperty(e,"setWebp",{enumerable:!0,get:function(){return i.setWebp}});var r=t(te);e.canUseHtmlPictureElement=r.default;e.autoDetect=function(e){void 0===e&&(e=["webp"]);for(var t=0;t<e.length;t++){if("avif"===e[t]&&(0,n.canUseAvif)())return e[t];if("webp"===e[t]&&(0,i.canUseWebP)())return e[t]}return""};e.autoDetectAll=function(){return new Promise((function(e){Promise.all([(0,n.asyncCanUseAvif)(),(0,i.asyncCanUseWebP)()]).then((function(t){var n=t[0],i=t[1];e({avif:n,webp:i})}))}))}}(Z);var re={},oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=function(e){return e?e.replace(/^http(s)?:/,""):""};var ae={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isInt=e.isNum=void 0;e.isNum=function(e){return"number"==typeof e};e.isInt=function(t){return(0,e.isNum)(t)&&(0|t)===t}}(ae);var se={};Object.defineProperty(se,"__esModule",{value:!0});var le=/\.(jpeg|jpg|png|webp|gif|avif)$/;se.default=function(e){var t;return(null===(t=e.match(le))||void 0===t?void 0:t[0])||null},function(e){var t=X&&X.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBmgSrc=e.isSupportBmgFormat=void 0;var n=t(oe),i=t(Q),r=ae,o=t(se);e.isSupportBmgFormat=function(e){return!!function(e){return!!/\/bfs\//.test(e)}(e)&&!!(0,o.default)(e)};var a=function(e){return"number"!=typeof e||isNaN(e)?0:Math.floor(e)||0};e.getBmgSrc=function(t,o){var s;if(void 0===o&&(o={c:!0}),"string"!=typeof t)return"";if(!(0,e.isSupportBmgFormat)(t))return t;if(t.indexOf("@")>-1){if(o.cache)return t;t=t.split("@")[0]}t=t.replace("pre-","");var l=o.dpr||((0,i.default)()?2:Math.floor(null!==(s=null===window||void 0===window?void 0:window.devicePixelRatio)&&void 0!==s?s:2)||1),c=[];o.w&&(0,r.isInt)(o.w)&&c.push("".concat(Math.floor(o.w*l),"w")),o.h&&(0,r.isInt)(o.h)&&c.push("".concat(Math.floor(o.h*l),"h")),o.e&&c.push("".concat(o.e,"e")),o.c&&c.push("1c"),o.a&&c.push("".concat([a(o.a.x),a(o.a.y),a(o.a.w)*l,a(o.a.h)*l].join("-"),"a")),o.p&&(0,r.isInt)(o.p)&&c.push("".concat(o.p,"p")),o.s&&c.push("1s"),o.q&&(0,r.isInt)(o.q)&&c.push("".concat(o.q,"q")),o.style&&c.push("!".concat(o.style));var u="";return o.ext&&["webp","avif"].includes(o.ext)&&(u=o.ext),0!==c.length||u?"".concat((0,n.default)(t),"@").concat(c.join("_")).concat(u?".".concat(u):""):t}}(re);var ce,ue={};function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}Object.defineProperty(ue,"__esModule",{value:!0});var pe="__BMG_TRACKER_COLLECT_QUEUE__",he="__BMG_TRACKER_COLLECT_EXTS__",fe="__BMG_TRACKER_COLLECT_MODE__",ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==X?X:"undefined"!=typeof self?self:{},me={};Object.defineProperty(me,"__esModule",{value:!0});var be=!0,ye=me.default=function(){return be&&(be="undefined"==typeof window),be},ge={};Object.defineProperty(ge,"__esModule",{value:!0});var we=/\.(jpeg|jpg|png|webp|gif|avif)$/,xe=ge.default=function(e){var t;return(null===(t=e.match(we))||void 0===t?void 0:t[0])||null},ke={};!function(e){var t=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseAvif=e.canUseAvif=e.setAvif=void 0;var n,i=t(me);e.setAvif=function(e){n=e},e.canUseAvif=function(){return!(0,i.default)()&&void 0!==n&&n},e.asyncCanUseAvif=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseAvif)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setAvif)(!1),t(!1)},n.onload=function(){(0,e.setAvif)(!0),t(!0)},n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="}))}}(ke);var Ae={};!function(e){var t=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseWebP=e.canUseWebP=e.setWebp=void 0;var n,i=t(me);e.setWebp=function(e){n=e},e.canUseWebP=function(){var e,t,r,o;if((0,i.default)())return!1;if(void 0!==n)return n;try{if("undefined"!=typeof navigator&&/Firefox\/(\d+)/i.test(navigator.userAgent))return n=Number((null===(e=navigator.userAgent.match(/Firefox\/(\d+)/i))||void 0===e?void 0:e[1])||"0")>=65;var a=document.createElement("canvas");n=!!(null===(t=a.getContext)||void 0===t?void 0:t.call(a,"2d"))&&0===(null===(o=null===(r=a.toDataURL)||void 0===r?void 0:r.call(a,"image/webp"))||void 0===o?void 0:o.indexOf("data:image/webp"))}catch(e){n=!1}return n},e.asyncCanUseWebP=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseWebP)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setWebp)(!1),t(!1)},n.onload=function(){(0,e.setWebp)(!0),t(!0)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="}))}}(Ae);var _e="BMG_EXTS",Ee=null,Ce=function(){if(Ee)return Ee;try{Ee=(localStorage.getItem(_e)||"").split(",")}catch(e){console.warn(e),Ee=[]}return Ee},Se=function(e){if(void 0===e&&(e=!1),!window[he]||e){var t=Ce();window[he]={avif:t.includes("avif"),webp:t.includes("webp")}}},Te=function(e){return function(t){switch(function(){var e=[],t=window[he]||{avif:!1,webp:!1};t.avif&&e.push("avif"),t.webp&&e.push("webp");try{localStorage.setItem(_e,e.join(","))}catch(e){console.warn(e)}}(),e){case"avif":ke.setAvif(t);break;case"webp":Ae.setWebp(t)}}},Oe=function(e){var t;"object"!=de(window[he])&&Se(),(null===(t=window[he])||void 0===t?void 0:t[e])||(window[he][e]=!0,Te(e)(!0))},Pe=function(){return window[fe]};ue.collect=function(e,t,n){if(!ye()){var i=ye()?null:window.__BMG_TRACKER__||null;n=n||Pe();var r=(xe(e)||"").substring(1);if(["avif","webp"].indexOf(r)>-1&&Oe(r),"onlyext"!==n)if(i)i.collect(e,t);else if("nocache"!==n){var o={src:e,type:t,ts:Date.now()/1e3|0};Array.isArray(window[pe])?window[pe].push(o):window[pe]=[o]}}},ue.getCollectMode=Pe,ue.getLocalExtsState=Ce,ce=ue.getWindowExtsState=function(e){var t,n;return"avif"===e?(null===(t=window[he])||void 0===t?void 0:t.avif)||!1:"webp"===e?(null===(n=window[he])||void 0===n?void 0:n.webp)||!1:window[he]||null},ue.initWindowExtsState=Se,ue.setCollectMode=function(e){window[fe]=e},ue.updateExtState=Te,ue.updateWindowExtsState=Oe;var Ie=new RegExp(function(e,t){return"".concat(e).concat(t,".hdslb.com")}("(s|i)","\\d")),Me=function(e){if(J())return e||"";var t=window.__BMG_AF__;return(null==t?void 0:t.defDomain)?(t.defUpdated,t.defDomain):e||""},Le=function(e,t){var n;if(!t)return e;var i=(null===(n=e.match(Ie))||void 0===n?void 0:n[0])||"";return i&&i!==t?e.replace(Ie,t):e},je=function(e,t,n){var i="";return J()?re.getBmgSrc((null==n?void 0:n.domain)?Le(e,n.domain):e,t):(i=ce("avif")?"avif":ce("webp")?"webp":Z.autoDetect(["avif","webp"]),re.getBmgSrc(Le(e,Me(null==n?void 0:n.domain)),Object.assign(Object.assign({},t),{ext:i})))},Re=function(e,t,n){n=(null==n?void 0:n.filter(Boolean))||[];var i="img"===e?">":">".concat(n.length?n.join(""):"","</").concat(e,">");return"<".concat(e," ").concat(Object.keys(t).filter((function(e){return"string"==typeof t[e]})).map((function(e){return"".concat(e,'="').concat((n=t[e]||"")?n.replace(i||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,(function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]||""})):"",'"');var n,i})).join(" ")," ").concat(i)},De=function(e){return e?"".concat(e,"(this)"):""},Ne=function(e,t){return-1===e.indexOf("@")?"".concat(e,"@.").concat(t):(e=e.replace(new RegExp(".(avif|webp)$"),""),"".concat(e,".").concat(t))},Be=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return P()?"":n&&(null===(e=window[z])||void 0===e?void 0:e.avif)?"avif":(null===(t=window[z])||void 0===t?void 0:t.webp)?"webp":function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["webp"],t=0;t<e.length;t++){if("avif"===e[t]&&(P(),0))return e[t];if("webp"===e[t]&&I())return e[t]}return""}()},ze=function(e,t,n){var i,r,o=[],a="";t.class?(o.push(t.class),a=o.join(" ")):a="",e=Le(e,Me(null==n?void 0:n.domain));var s=!!(null===(i=null==n?void 0:n.exts)||void 0===i?void 0:i.avif),l=!1!==(null===(r=null==n?void 0:n.exts)||void 0===r?void 0:r.webp),c=!(s||l),u=!!(null==n?void 0:n.performance),d=j(e)&&((null==n?void 0:n.tag)?"picture"===n.tag:!P()&&!!window.HTMLPictureElement),p=!W()&&U(window[N])&&U(window[B]),h={};if("object"===k(t.dataset))for(var f in t.dataset)h["data-".concat(f)]=t.dataset[f];var v=c?void 0:Be(u&&s),m=!1;u&&(s&&"avif"===v||l&&"webp"===v||c&&""===v)&&(m=!0),!m&&d&&!0===(null==n?void 0:n.safe)&&(v=void 0);var b=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{c:!0};if("string"!=typeof e)return"";if(!j(e))return e;if(e.indexOf("@")>-1){if(n.cache)return e;e=e.split("@")[0]}e=e.replace("pre-","");var i=n.dpr||(P()?2:Math.floor(null!==(t=null===window||void 0===window?void 0:window.devicePixelRatio)&&void 0!==t?t:2)||1),r=[];n.w&&M(n.w)&&r.push("".concat(Math.floor(n.w*i),"w")),n.h&&M(n.h)&&r.push("".concat(Math.floor(n.h*i),"h")),n.e&&r.push("".concat(n.e,"e")),n.c&&r.push("1c"),n.a&&r.push("".concat([R(n.a.x),R(n.a.y),R(n.a.w)*i,R(n.a.h)*i].join("-"),"a")),n.p&&M(n.p)&&r.push("".concat(n.p,"p")),n.s&&r.push("1s"),n.q&&M(n.q)&&r.push("".concat(n.q,"q")),n.style&&r.push("!".concat(n.style));var o,a="";return n.ext&&["webp","avif"].includes(n.ext)&&(a=n.ext),0!==r.length||a?"".concat((o=e,o?o.replace(/^http(s)?:/,""):""),"@").concat(r.join("_")).concat(a?".".concat(a):""):e}(e,Object.assign({},t,{ext:v})),y=Re("img",Object.assign({src:b,class:m||!d?a:null,alt:t.alt||null,loading:(null==t?void 0:t.loading)?"lazy":null,onload:p?De(N):De((null==n?void 0:n.onload)||"")||null,onerror:p?De(B):De((null==n?void 0:n.onerror)||"")||null,"data-onload":p&&(null==n?void 0:n.onload)||null,"data-onerror":p&&(null==n?void 0:n.onerror)||null},h));return m?y:d?Re("picture",{class:a||null},[s&&Re("source",{type:"image/avif",srcset:Ne(b,"avif")})||"",l&&Re("source",{type:"image/webp",srcset:Ne(b,"webp")})||"",y]):y};"undefined"!=typeof window&&function(e){if(void 0===e&&(e=!1),!window[z]||e){var t=function(){if(G)return G;try{G=(localStorage.getItem("BMG_EXTS")||"").split(",")}catch(e){console.warn(e),G=[]}return G}();window[z]={avif:t.includes("avif"),webp:t.includes("webp")}}}();var Ue="onAvtSrcError",Fe={animationWebpSrc:0,maskImageStyle:0},Ve=function(e,t){Fe[e]=t?1:2},He=function(){return s((function e(t,n){o(this,e),this.payload=t,this.size=n,this.layers=[],this.id=t.group_id,this.createElement()}),[{key:"createElement",value:function(){this.el=document.createElement("div"),this.el.classList.add("layers")}},{key:"render",value:function(){var e=i(m().mark((function e(){var t=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.payload.layers.filter((function(e){return!!e.visible})).map((function(e){return t.addLayer(e,t.size)})));case 3:return e.abrupt("return",this);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"addLayer",value:(e=i(m().mark((function e(t,n){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new qe(t,n).render();case 3:i=e.sent,this.layers.push(i),this.el.appendChild(i.el),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(t,n){return e.apply(this,arguments)})},{key:"removeLayer",value:function(e){var t=this.layers.findIndex((function(t){return t.id===e}));if(t>-1){var n=this.layers[t];this.el.removeChild(n.el),this.layers.splice(t,1)}}}]);var e}(),We=function(){return s((function e(t,n){switch(o(this,e),this.localSrcList=["//i0.hdslb.com/bfs/seed/jinkela/short/webui/avatar/img/res-local1.png","//i0.hdslb.com/bfs/seed/jinkela/short/webui/avatar/img/res-local2.png","//i0.hdslb.com/bfs/seed/jinkela/short/webui/avatar/img/res-local3.png","//i0.hdslb.com/bfs/seed/jinkela/short/webui/avatar/img/res-local4.png","//i0.hdslb.com/bfs/seed/jinkela/short/webui/avatar/img/res-local5.png","//i0.hdslb.com/bfs/seed/jinkela/short/webui/avatar/img/res-local6.jpeg"],this.type=t.res_type,this.createElement(),this.type){case 3:this.loadLocal(t.res_image.image_src.placeholder),this.load(t.res_image.image_src,n);break;case 4:this.play(t.res_animation.webp_src,n);break;case 5:this.draw(t.res_native_draw.draw_src.draw)}}),[{key:"createElement",value:function(){this.el=document.createElement("div"),this.el.classList.add("layer-res")}},{key:"registerHandler",value:function(){var e=window;e[Ue]||(e[Ue]=function(e){e.style.opacity="0"})}},{key:"setStyle",value:function(e,t){this.el.style[e]=t}},{key:"draw",value:function(e){var t,n=e.draw_type,i=e.fill_mode,r=e.color_config;1===n&&this.setStyle("borderRadius","50%"),1===i&&this.setStyle("backgroundColor",null==(t=null==r?void 0:r.day)?void 0:t.argb)}},{key:"play",value:(e=i(m().mark((function e(t,n){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.src_type,e.t0=i,e.next=1===e.t0?4:2===e.t0?11:3===e.t0?12:13;break;case 4:return e.prev=4,e.abrupt("return",(this.setStyle("background","url(".concat(je(t.remote.url,{w:Math.floor(n.width),h:Math.floor(n.height),c:!0,dpr:2}),") center / cover no-repeat")),!0));case 8:return e.prev=8,e.t1=e.catch(4),e.abrupt("return",Promise.reject(e.t1));case 11:return e.abrupt("return",(this.loadLocal(t.local),!0));case 12:return e.abrupt("return",(this.draw(t.draw),!0));case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this,[[4,8]])}))),function(t,n){return e.apply(this,arguments)})},{key:"load",value:function(e,t){switch(e.src_type){case 1:this.registerHandler(),this.el.innerHTML=ze(e.remote.url,{w:Math.floor(t.width),h:Math.floor(t.height),s:!0,c:!0,dpr:2},{onerror:Ue,exts:{avif:!0}});break;case 2:this.loadLocal(e.local);break;case 3:this.draw(e.draw)}}},{key:"loadLocal",value:function(e){var t=Math.floor(e)-1;t>-1&&this.localSrcList[t]&&this.setStyle("backgroundImage","url(".concat(this.localSrcList[t],")"))}}]);var e}(),$e=function(e,t){return new Promise((function(n,i){if(!e)return i();var r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=function(){if(!t)return n(e);t(r).then(n).catch(i)},r.onerror=function(){i()}}))},qe=function(){return s((function e(t,n){o(this,e),this.payload=t,this.size=n,this.id=t.layer_id,this.createElement()}),[{key:"createElement",value:function(){this.el=document.createElement("div"),this.el.classList.add("layer")}},{key:"render",value:(t=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.renderGeneralSpec(),e.next=4,this.renderResource();case 4:return this.renderTag(),this.renderMask(),e.abrupt("return",this);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"renderGeneralSpec",value:function(){var e=this.payload.general_spec;e.pos_spec&&(2===e.pos_spec.coordinate_pos?this.el.classList.add("center"):(this.el.style.left="".concat(e.pos_spec.axis_x*this.size.width,"px"),this.el.style.top="".concat(e.pos_spec.axis_y*this.size.height,"px"))),e.size_spec&&(this.size={width:e.size_spec.width*this.size.width,height:e.size_spec.height*this.size.height},this.el.style.width="".concat(this.size.width,"px"),this.el.style.height="".concat(this.size.height,"px")),e.render_spec&&"number"==typeof e.render_spec.opacity&&(this.el.style.opacity=String(e.render_spec.opacity))}},{key:"renderTag",value:function(){var e,t=null==(e=this.payload.layer_config)?void 0:e.tags;if(t)for(var n in t){var i=t[n],r=i.config_type,o=i.general_config;if(1===r&&o){var a=o.web_css_style;if(a)for(var s in a)this.el.style[s]=a[s]}}}},{key:"renderMask",value:(e=i(m().mark((function e(){var t,n,i,r,o,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null==(t=this.payload.layer_config)?void 0:t.layer_mask){e.next=3;break}return e.abrupt("return");case 3:if(1!==(r=i.mask_src).src_type){e.next=18;break}e.t0=Fe.maskImageStyle,e.next=0===e.t0?8:2===e.t0?10:11;break;case 8:return Ve("maskImageStyle",!0),e.abrupt("break",11);case 10:throw new Error("Not support [maskImageStyle]");case 11:return o=je(r.remote.url,{w:Math.round(this.size.width),h:Math.round(this.size.height)}),e.next=14,$e(o);case 14:a=e.sent,this.resource.setStyle("-webkit-mask-image","url(".concat(a,")")),this.resource.setStyle("-webkit-mask-size","cover"),e.next=19;break;case 18:3===(null==r?void 0:r.src_type)&&1===(null==(n=r.draw)?void 0:n.draw_type)&&this.resource.setStyle("borderRadius","50%");case 19:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"renderResource",value:function(){this.resource=new We(this.payload.resource,this.size),this.el.appendChild(this.resource.el)}}]);var e,t}(),Ge=("undefined"==typeof globalThis?"undefined":k(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":k(window))<"u"?window:("undefined"==typeof global?"undefined":k(global))<"u"?global:("undefined"==typeof self?"undefined":k(self))<"u"?self:{},Xe={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var Ye=!0;Ze.default=function(){return Ye&&(Ye=("undefined"==typeof window?"undefined":k(window))>"u"),Ye};var Qe=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});var Ke=Xe.unobserve=nt=Xe.observe=void 0,Je=Qe(Ze),et=null;(0,Je.default)()||window.IntersectionObserver;var tt=function(e,t){e.forEach((function(e){var t,n;null===(n=null===(t=e.target)||void 0===t?void 0:t.__i18r_callback__)||void 0===n||n.call(t,e)}))},nt=Xe.observe=function(e,t){(0,Je.default)()||(et||(et=new IntersectionObserver(tt)),e.__i18r_callback__=t,et.observe(e))};Ke=Xe.unobserve=function(e){var t;et&&(null===(t=et.unobserve)||void 0===t||t.call(et,e),delete e.__i18r_callback__)};var it=function(e){function t(){var e;return o(this,t),(e=r(this,t)).loaded=!1,e.size={width:0,height:0},e.config={baseSize:0,isFloat:!1,lazyload:!1},e.layers=[],e.attachShadow({mode:"open"}),e.shadowRoot&&(e.shadowRoot.innerHTML='\n        <style>\n          :host {\n            display: inline-block;\n            position: relative;\n            width: var(--avatar-width);\n            height: var(--avatar-height);\n          }\n          #canvas {\n            width: var(--avatar-canvas-width);\n            height: var(--avatar-canvas-height);\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            pointer-events: none;\n          }\n          .layers {\n            position: absolute;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n          }\n          .layer {\n            position: absolute;\n            isolation: isolate;\n            overflow: hidden;\n          }\n          .layer.center {\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n          }\n          .layer-res {\n            width: 100%;\n            height: 100%;\n            isolation: isolate;\n            overflow: hidden;\n            background-size: cover;\n            background-repeat: no-repeat;\n            background-position: center;\n          }\n          .layer-res picture {\n            display: inline-block;\n          }\n          .layer-res div,\n          .layer-res picture,\n          .layer-res img {\n            width: 100%;\n            height: 100%;\n          }\n        </style>\n        <div id="canvas"></div>\n      ',e.canvasElement=e.shadowRoot.querySelector("#canvas")),e}return p(t,e),s(t,[{key:"disconnectedCallback",value:function(){this.config.lazyload&&!this.loaded&&Ke(this.canvasElement),this.clearCanvas(),this.clearLayers(),this.loaded=!1}},{key:"load",value:function(e,t){var n={width:0,height:0};"number"==typeof t?(n.width=t,n.height=t):"object"==k(t)?("number"==typeof t.baseSize?(n.width=t.baseSize,n.height=t.baseSize):"object"==k(t.baseSize)?(n.width=t.baseSize.width,n.height=t.baseSize.height):console.warn("Not found 'baseSize' in Avatar Config"),this.config.isFloat=t.isFloat||!1,this.config.lazyload=t.lazyload||!1):console.warn("Not found 'baseSize' in Avatar Config"),this.size=v({},n),this.config.baseSize=n,this.initCanvas(e),this.renderLayers(e)}},{key:"renderLayers",value:function(e){var t,n=this;if(this.config.lazyload&&!this.loaded)return this.renderDefaultLayers(),void nt(this.canvasElement,(function(t){t.isIntersecting&&(n.loaded=!0,n.renderLayers(e),Ke(n.canvasElement))}));null!=(t=e.layers)&&t.length?this.renderNormalLayers(e):e.fallback_layers&&this.renderFallbackLayers(e.fallback_layers)}},{key:"initCanvas",value:function(e){var t=this.size.width*e.container_size.width,n=this.size.height*e.container_size.height;this.config.isFloat?(this.style.setProperty("--avatar-width","".concat(this.size.width,"px")),this.style.setProperty("--avatar-height","".concat(this.size.height,"px"))):(this.style.setProperty("--avatar-width",t+"px"),this.style.setProperty("--avatar-height",n+"px")),this.canvasElement.style.setProperty("--avatar-canvas-width",t+"px"),this.canvasElement.style.setProperty("--avatar-canvas-height",n+"px")}},{key:"renderDefaultLayers",value:(c=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.addLayerGroup({group_id:"",layers:[{layer_id:"",layer_config:{allow_over_paint:!1,is_critical:!0,layer_mask:null,tags:{AVATAR_LAYER:{config_type:0},GENERAL_CONFIG:{config_type:1,general_config:{web_css_style:{borderRadius:"50%"}}}}},general_spec:{pos_spec:{axis_x:.675,axis_y:.675,coordinate_pos:2},render_spec:{opacity:1},size_spec:{height:1,width:1}},visible:!0,resource:{res_type:3,res_image:{image_src:{src_type:2,placeholder:6,local:6}}}}],group_mask:null,is_critical_group:!0},this.size);case 2:this.renderCanvas();case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"renderNormalLayers",value:(l=i(m().mark((function e(t){var n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.layers.map((function(e){return n.addLayerGroup(e,n.size)})));case 3:this.renderCanvas(),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),this.clearCanvas(),this.clearLayers(),this.renderFallbackLayers(t.fallback_layers),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return l.apply(this,arguments)})},{key:"renderFallbackLayers",value:(a=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.addLayerGroup(t,this.size);case 3:this.renderCanvas(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.clearCanvas(),this.clearLayers(),this.renderDefaultLayers();case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return a.apply(this,arguments)})},{key:"clearCanvas",value:function(){var e=this;Array.from(this.canvasElement.children).forEach((function(t){e.canvasElement.removeChild(t)}))}},{key:"clearLayers",value:function(){this.layers=[]}},{key:"renderCanvas",value:function(){var e=this;this.clearCanvas(),this.layers.forEach((function(t){e.canvasElement.appendChild(t.el)}))}},{key:"addLayerGroup",value:(n=i(m().mark((function e(t,n){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new He(t,n).render();case 3:i=e.sent,this.layers.push(i),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return n.apply(this,arguments)})}]);var n,a,l,c}(_(HTMLElement));customElements.define("bili-avatar",it);var rt=function(){function e(){o(this,e),this.disposables=[]}return s(e,[{key:"addEventListener",value:function(e,t,n,i){return this.add(function(e,t,n,i){return e.addEventListener(t,n,i),function(){!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,t,n,i)}}(e,t,n,i))}},{key:"mutationObserve",value:function(e,t,n){var i=!1,r=new MutationObserver(t);return r.observe(e,n),function(){return function(e){i||(i=!0,e.disconnect())}(r)}}},{key:"requestAnimationFrame",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=requestAnimationFrame.apply(void 0,arguments);return this.add((function(){return cancelAnimationFrame(e)}))}))},{key:"nextFrame",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.requestAnimationFrame((function(){return e.requestAnimationFrame.apply(e,n)}))}},{key:"setTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=setTimeout.apply(void 0,arguments);return this.add((function(){return clearTimeout(e)}))}))},{key:"microTask",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i={current:!0};return function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}((function(){i.current&&t[0]()})),this.add((function(){i.current=!1}))}},{key:"style",value:function(e,t,n){var i=e.style.getPropertyValue(t);return Object.assign(e.style,c({},t,n)),this.add((function(){Object.assign(e.style,c({},t,i))}))}},{key:"group",value:function(t){var n=new e;return t(n),this.add((function(){return n.dispose()}))}},{key:"add",value:function(e){var t=this;return this.disposables.push(e),function(){var n=t.disposables.indexOf(e);n>=0&&t.remove(n,1)}}},{key:"remove",value:function(e,t){var n,i=l(this.disposables.splice(e,null!=t?t:this.disposables.length));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispose",value:function(){this.remove(0)}}])}();("undefined"==typeof window?"undefined":k(window))<"u"&&(window.__BILI_POPPER_ZINDEX__||(window.__BILI_POPPER_ZINDEX__=1e3));var ot=function(e){function t(){var e;return o(this,t),(e=r(this,t)).disposables=new rt,e.state={label:"",value:"",name:"",disabled:!1,checked:!1},e.attachShadow({mode:"open"}),e.shadowRoot&&(e.shadowRoot.innerHTML='\n        <style>\n          :host {\n            --bili-checkbox-size: 16px;\n            --bili-checkbox-font-size: 14px;\n            --bili-checkbox-border-width: 1px;\n            --bili-checkbox-border-radius: 2px;\n            --bili-checkbox-checked-color: var(--brand_blue);\n            --bili-checkbox-margin-inline-end: 8px;\n\n            display: inline-flex;\n            align-items: baseline;\n            padding: 0;\n            margin: 0;\n            cursor: pointer;\n            margin-inline-end: var(--bili-checkbox-margin-inline-end);\n          }\n          #input {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n            list-style: none;\n            position: relative;\n            display: inline-block;\n            outline: none;\n            cursor: pointer;\n            align-self: center;\n            border-radius: var(--bili-checkbox-border-radius);\n            width: var(--bili-checkbox-size);\n            height: var(--bili-checkbox-size);\n          }\n          #input input {\n            bottom: 0;\n            left: 0;\n            margin: 0;\n            opacity: 0;\n            outline: none;\n            position: absolute;\n            right: 0;\n            top: 0;\n            z-index: -1;\n          }\n          #input #inner {\n            display: block;\n            background-color: var(--bg1_float);\n            border: 1px solid var(--text4);\n            border-radius: var(--bili-checkbox-border-radius);\n            box-sizing: border-box;\n            width: 100%;\n            height: 100%;\n            transition: all .3s ease-in-out;\n          }\n          #input #inner:hover {\n            border-color: var(--bili-checkbox-checked-color);\n          }\n          #input[checked] #inner {\n            border-color: var(--bili-checkbox-checked-color);\n            background-color: var(--bili-checkbox-checked-color);\n          }\n          #input[checked] #inner::after {\n            transform: rotate(45deg) scale(1) translate(-65%, -50%);\n            opacity: 1;\n          }\n          #input #inner::after {\n            content: "";\n            position: absolute;\n            top: 50%;\n            left: 25%;\n            display: table;\n            width: 4px;\n            height: 8px;\n            border: 2px solid var(--text_white);\n            opacity: 0;\n            border-top: 0;\n            border-left: 0;\n            transition: all .3s ease-in-out;\n            transform: rotate(45deg) scale(0) translate(-50%, -50%);\n          }\n          #label {\n            margin-left: 8px;\n            font-size: var(--bili-checkbox-font-size);\n            color: var(--text2);\n          }\n        </style>\n        <span id="input">\n          <input type="checkbox">\n          <span id="inner"></span>\n        </span>\n        <slot>\n          <span id="label"></span>\n        </slot>\n      '),e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){var e=this;if(this.shadowRoot){var n=this.getAttribute("label");t.observedAttributes.forEach((function(t){var i=e.getAttribute(t);null!==i&&("value"===t&&!n&&e.updateAttribute("label",i),e.updateAttribute(t,i))})),this.shadowRoot&&this.disposables.addEventListener(this,"click",(function(){if(!e.state.disabled){e.state.checked=!e.state.checked,e.updateInput("checked",e.state.checked);var t={name:e.state.name,value:e.state.value,checked:e.state.checked},n=new CustomEvent("change",{detail:t});e.parentElement&&e.parentElement.isCheckboxGroup&&e.parentElement.onCheckboxChange(n),e.dispatchEvent(n)}}))}}},{key:"disconnectedCallback",value:function(){this.disposables.dispose()}},{key:"updateInput",value:function(e,t){var n,i,r=null==(n=this.shadowRoot)?void 0:n.querySelector("#input"),o=null==(i=this.shadowRoot)?void 0:i.querySelector("input");if(r&&o)switch(e){case"value":o.setAttribute(e,t);break;case"disabled":case"checked":t?(r.setAttribute(e,""),o.setAttribute(e,"")):(r.removeAttribute(e),o.removeAttribute(e))}}},{key:"updateLabel",value:function(e){var t,n=null==(t=this.shadowRoot)?void 0:t.querySelector("#label");n&&(n.textContent=e)}},{key:"updateAttribute",value:function(e,t){switch(e){case"name":this.state.name=t;break;case"label":this.updateLabel(t),this.state.label=t;break;case"value":this.updateInput(e,t),this.state[e]=t;break;case"disabled":case"checked":this.updateInput(e,"true"===t),this.state[e]="true"===t}}},{key:"attributeChangedCallback",value:function(e,t,n){this.updateAttribute(e,n)}}],[{key:"observedAttributes",get:function(){return["name","value","label","disabled","checked"]}}])}(_(HTMLElement));ot.elName="bili-checkbox";var at=ot,st=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).isCheckboxGroup=!0,e.valueList=[],e}return p(t,e),s(t,[{key:"onCheckboxChange",value:function(e){var t=e.detail,n=t.value;if(t.checked){if(this.valueList.includes(n))return;return this.valueList.push(n),void this.dispatchEvent(new CustomEvent("change",{detail:w(this.valueList)}))}var i=this.valueList.indexOf(n);-1!==i&&(this.valueList.splice(i,1),this.dispatchEvent(new CustomEvent("change",{detail:w(this.valueList)})))}}])}(_(HTMLElement));st.elName="bili-checkbox-group",customElements.get(at.elName)||(customElements.define(at.elName,at),customElements.define(st.elName,st));
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var lt,ct,ut=window,dt=ut.ShadowRoot&&(void 0===ut.ShadyCSS||ut.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pt=Symbol(),ht=new WeakMap,ft=function(){return s((function e(t,n,i){if(o(this,e),this._$cssResult$=!0,i!==pt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}),[{key:"styleSheet",get:function(){var e=this.o,t=this.t;if(dt&&void 0===e){var n=void 0!==t&&1===t.length;n&&(e=ht.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&ht.set(t,e))}return e}},{key:"toString",value:function(){return this.cssText}}])}(),vt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=1===e.length?e[0]:n.reduce((function(t,n,i){return t+function(e){if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")}(n)+e[i+1]}),e[0]);return new ft(r,e,pt)},mt=dt?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,n="",i=l(e.cssRules);try{for(i.s();!(t=i.n()).done;){n+=t.value.cssText}}catch(e){i.e(e)}finally{i.f()}return function(e){return new ft("string"==typeof e?e:e+"",void 0,pt)}(n)}(e):e},bt=window,yt=bt.trustedTypes,gt=yt?yt.emptyScript:"",wt=bt.reactiveElementPolyfillSupport,xt={toAttribute:function(e,t){switch(t){case Boolean:e=e?gt:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},kt=function(e,t){return t!==e&&(t==t||e==e)},At={attribute:!0,type:String,converter:xt,reflect:!1,hasChanged:kt},_t="finalized",Et=function(e){function t(){var e;return o(this,t),(e=r(this,t))._$Ei=new Map,e.isUpdatePending=!1,e.hasUpdated=!1,e._$El=null,e._$Eu(),e}return p(t,e),s(t,[{key:"_$Eu",value:function(){var e,t=this;this._$E_=new Promise((function(e){return t.enableUpdating=e})),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((function(e){return e(t)}))}},{key:"addController",value:function(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}},{key:"_$Eg",value:function(){var e=this;this.constructor.elementProperties.forEach((function(t,n){e.hasOwnProperty(n)&&(e._$Ei.set(n,e[n]),delete e[n])}))}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return function(e,t){dt?e.adoptedStyleSheets=t.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):t.forEach((function(t){var n=document.createElement("style"),i=ut.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=t.cssText,e.appendChild(n)}))}(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$EO",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:At,r=this.constructor._$Ep(e,i);if(void 0!==r&&!0===i.reflect){var o=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:xt).toAttribute(t,i.type);this._$El=e,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}},{key:"_$AK",value:function(e,t){var n,i=this.constructor,r=i._$Ev.get(e);if(void 0!==r&&this._$El!==r){var o=i.getPropertyOptions(r),a="function"==typeof o.converter?{fromAttribute:o.converter}:void 0!==(null===(n=o.converter)||void 0===n?void 0:n.fromAttribute)?o.converter:xt;this._$El=r,this[r]=a.fromAttribute(t,o.type),this._$El=null}}},{key:"requestUpdate",value:function(e,t,n){var i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||kt)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}},{key:"_$Ej",value:(n=i(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUpdatePending=!0,e.prev=1,e.next=4,this._$E_;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Promise.reject(e.t0);case 9:if(t=this.scheduleUpdate(),e.t1=null!=t,!e.t1){e.next=14;break}return e.next=14,t;case 14:return e.abrupt("return",!this.isUpdatePending);case 15:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return n.apply(this,arguments)})},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){var e,t=this;if(this.isUpdatePending){this.hasUpdated,this._$Ei&&(this._$Ei.forEach((function(e,n){return t[n]=e})),this._$Ei=void 0);var n=!1,i=this._$AL;try{(n=this.shouldUpdate(i))?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw n=!1,this._$Ek(),e}n&&this._$AE(i)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$Ek",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$E_}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._$EC&&(this._$EC.forEach((function(e,n){return t._$EO(n,t[n],e)})),this._$EC=void 0),this._$Ek()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}},{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this.elementProperties.forEach((function(n,i){var r=e._$Ep(i,n);void 0!==r&&(e._$Ev.set(r,i),t.push(r))})),t}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"==k(e)?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(i){var r=this[e];this[t]=i,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this.elementProperties.get(e)||At}},{key:"finalize",value:function(){if(this.hasOwnProperty(_t))return!1;this[_t]=!0;var e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=w(e.h)),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){var t,n=this.properties,i=l([].concat(w(Object.getOwnPropertyNames(n)),w(Object.getOwnPropertySymbols(n))));try{for(i.s();!(t=i.n()).done;){var r=t.value;this.createProperty(r,n[r])}}catch(e){i.e(e)}finally{i.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,i=l(new Set(e.flat(1/0).reverse()));try{for(i.s();!(n=i.n()).done;){var r=n.value;t.unshift(mt(r))}}catch(e){i.e(e)}finally{i.f()}}else void 0!==e&&t.push(mt(e));return t}},{key:"_$Ep",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}}]);var n}(_(HTMLElement));Et[_t]=!0,Et.elementProperties=new Map,Et.elementStyles=[],Et.shadowRootOptions={mode:"open"},null==wt||wt({ReactiveElement:Et}),(null!==(lt=bt.reactiveElementVersions)&&void 0!==lt?lt:bt.reactiveElementVersions=[]).push("1.6.3");var Ct=window,St=Ct.trustedTypes,Tt=St?St.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,Ot="$lit$",Pt="lit$".concat((Math.random()+"").slice(9),"$"),It="?"+Pt,Mt="<".concat(It,">"),Lt=document,jt=function(){return Lt.createComment("")},Rt=function(e){return null===e||"object"!=k(e)&&"function"!=typeof e},Dt=Array.isArray,Nt="[ \t\n\f\r]",Bt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zt=/-->/g,Ut=/>/g,Ft=RegExp(">|".concat(Nt,"(?:([^\\s\"'>=/]+)(").concat(Nt,"*=").concat(Nt,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),Vt=/'/g,Ht=/"/g,Wt=/^(?:script|style|textarea|title)$/i,$t=function(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return{_$litType$:e,strings:t,values:i}}}(1),qt=Symbol.for("lit-noChange"),Gt=Symbol.for("lit-nothing"),Xt=new WeakMap,Zt=Lt.createTreeWalker(Lt,129,null,!1);function Yt(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Tt?Tt.createHTML(t):t}var Qt=function(){return s((function e(t,n){var i,r=t.strings,a=t._$litType$;o(this,e),this.parts=[];var s=0,c=0,u=r.length-1,d=this.parts,p=function(e,t){for(var n,i=e.length-1,r=[],o=2===t?"<svg>":"",a=Bt,s=0;s<i;s++){for(var l=e[s],c=void 0,u=void 0,d=-1,p=0;p<l.length&&(a.lastIndex=p,null!==(u=a.exec(l)));)p=a.lastIndex,a===Bt?"!--"===u[1]?a=zt:void 0!==u[1]?a=Ut:void 0!==u[2]?(Wt.test(u[2])&&(n=RegExp("</"+u[2],"g")),a=Ft):void 0!==u[3]&&(a=Ft):a===Ft?">"===u[0]?(a=null!=n?n:Bt,d=-1):void 0===u[1]?d=-2:(d=a.lastIndex-u[2].length,c=u[1],a=void 0===u[3]?Ft:'"'===u[3]?Ht:Vt):a===Ht||a===Vt?a=Ft:a===zt||a===Ut?a=Bt:(a=Ft,n=void 0);var h=a===Ft&&e[s+1].startsWith("/>")?" ":"";o+=a===Bt?l+Mt:d>=0?(r.push(c),l.slice(0,d)+Ot+l.slice(d)+Pt+h):l+Pt+(-2===d?(r.push(void 0),s):h)}return[Yt(e,o+(e[i]||"<?>")+(2===t?"</svg>":"")),r]}(r,a),h=y(p,2),f=h[0],v=h[1];if(this.el=e.createElement(f,n),Zt.currentNode=this.el.content,2===a){var m=this.el.content,b=m.firstChild;b.remove(),m.append.apply(m,w(b.childNodes))}for(;null!==(i=Zt.nextNode())&&d.length<u;){if(1===i.nodeType){if(i.hasAttributes()){var g,x=[],k=l(i.getAttributeNames());try{for(k.s();!(g=k.n()).done;){var A=g.value;if(A.endsWith(Ot)||A.startsWith(Pt)){var _=v[c++];if(x.push(A),void 0!==_){var E=i.getAttribute(_.toLowerCase()+Ot).split(Pt),C=/([.?@])?(.*)/.exec(_);d.push({type:1,index:s,name:C[2],strings:E,ctor:"."===C[1]?nn:"?"===C[1]?on:"@"===C[1]?an:tn})}else d.push({type:6,index:s})}}}catch(e){k.e(e)}finally{k.f()}for(var S=0,T=x;S<T.length;S++){var O=T[S];i.removeAttribute(O)}}if(Wt.test(i.tagName)){var P=i.textContent.split(Pt),I=P.length-1;if(I>0){i.textContent=St?St.emptyScript:"";for(var M=0;M<I;M++)i.append(P[M],jt()),Zt.nextNode(),d.push({type:2,index:++s});i.append(P[I],jt())}}}else if(8===i.nodeType)if(i.data===It)d.push({type:2,index:s});else for(var L=-1;-1!==(L=i.data.indexOf(Pt,L+1));)d.push({type:7,index:s}),L+=Pt.length-1;s++}}),null,[{key:"createElement",value:function(e,t){var n=Lt.createElement("template");return n.innerHTML=e,n}}])}();function Kt(e,t){var n,i,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3?arguments[3]:void 0;if(t===qt)return t;var l=void 0!==s?null===(n=a._$Co)||void 0===n?void 0:n[s]:a._$Cl,c=Rt(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(i=null==l?void 0:l._$AO)||void 0===i||i.call(l,!1),void 0===c?l=void 0:(l=new c(e))._$AT(e,a,s),void 0!==s?(null!==(r=(o=a)._$Co)&&void 0!==r?r:o._$Co=[])[s]=l:a._$Cl=l),void 0!==l&&(t=Kt(e,l._$AS(e,t.values),l,s)),t}var Jt=function(){return s((function e(t,n){o(this,e),this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}),[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(e){var t,n=this._$AD,i=n.el.content,r=n.parts,o=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Lt).importNode(i,!0);Zt.currentNode=o;for(var a=Zt.nextNode(),s=0,l=0,c=r[0];void 0!==c;){if(s===c.index){var u=void 0;2===c.type?u=new en(a,a.nextSibling,this,e):1===c.type?u=new c.ctor(a,c.name,c.strings,this,e):6===c.type&&(u=new sn(a,this,e)),this._$AV.push(u),c=r[++l]}s!==(null==c?void 0:c.index)&&(a=Zt.nextNode(),s++)}return Zt.currentNode=Lt,o}},{key:"v",value:function(e){var t,n=0,i=l(this._$AV);try{for(i.s();!(t=i.n()).done;){var r=t.value;void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}catch(e){i.e(e)}finally{i.f()}}}])}(),en=function(){function e(t,n,i,r){var a;o(this,e),this.type=2,this._$AH=Gt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=r,this._$Cp=null===(a=null==r?void 0:r.isConnected)||void 0===a||a}return s(e,[{key:"_$AU",get:function(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}},{key:"parentNode",get:function(){var e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){e=Kt(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),Rt(e)?e===Gt||null==e||""===e?(this._$AH!==Gt&&this._$AR(),this._$AH=Gt):e!==this._$AH&&e!==qt&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):function(e){return Dt(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator])}(e)?this.T(e):this._(e)}},{key:"k",value:function(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}},{key:"$",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}},{key:"_",value:function(e){this._$AH!==Gt&&Rt(this._$AH)?this._$AA.nextSibling.data=e:this.$(Lt.createTextNode(e)),this._$AH=e}},{key:"g",value:function(e){var t,n=e.values,i=e._$litType$,r="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=Qt.createElement(Yt(i.h,i.h[0]),this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.v(n);else{var o=new Jt(r,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}},{key:"_$AC",value:function(e){var t=Xt.get(e.strings);return void 0===t&&Xt.set(e.strings,t=new Qt(e)),t}},{key:"T",value:function(t){Dt(this._$AH)||(this._$AH=[],this._$AR());var n,i,r=this._$AH,o=0,a=l(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;o===r.length?r.push(n=new e(this.k(jt()),this.k(jt()),this,this.options)):n=r[o],n._$AI(s),o++}}catch(e){a.e(e)}finally{a.f()}o<r.length&&(this._$AR(n&&n._$AB.nextSibling,o),r.length=o)}},{key:"_$AR",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,n=arguments.length>1?arguments[1]:void 0;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,n);t&&t!==this._$AB;){var i=t.nextSibling;t.remove(),t=i}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}])}(),tn=function(){return s((function e(t,n,i,r,a){o(this,e),this.type=1,this._$AH=Gt,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=a,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Gt}),[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=this.strings,o=!1;if(void 0===r)e=Kt(this,e,t,0),(o=!Rt(e)||e!==this._$AH&&e!==qt)&&(this._$AH=e);else{var a,s,l=e;for(e=r[0],a=0;a<r.length-1;a++)(s=Kt(this,l[n+a],t,a))===qt&&(s=this._$AH[a]),o||(o=!Rt(s)||s!==this._$AH[a]),s===Gt?e=Gt:e!==Gt&&(e+=(null!=s?s:"")+r[a+1]),this._$AH[a]=s}o&&!i&&this.j(e)}},{key:"j",value:function(e){e===Gt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}])}(),nn=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).type=3,e}return p(t,e),s(t,[{key:"j",value:function(e){this.element[this.name]=e===Gt?void 0:e}}])}(tn),rn=St?St.emptyScript:"",on=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).type=4,e}return p(t,e),s(t,[{key:"j",value:function(e){e&&e!==Gt?this.element.setAttribute(this.name,rn):this.element.removeAttribute(this.name)}}])}(tn),an=function(e){function t(e,n,i,a,s){var l;return o(this,t),(l=r(this,t,[e,n,i,a,s])).type=5,l}return p(t,e),s(t,[{key:"_$AI",value:function(e){var t;if((e=null!==(t=Kt(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:Gt)!==qt){var n=this._$AH,i=e===Gt&&n!==Gt||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==Gt&&(n===Gt||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}])}(tn),sn=function(){return s((function e(t,n,i){o(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}),[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){Kt(this,e)}}])}(),ln=Ct.litHtmlPolyfillSupport;null==ln||ln(Qt,en),(null!==(ct=Ct.litHtmlVersions)&&void 0!==ct?ct:Ct.litHtmlVersions=[]).push("2.8.0");var cn,un,dn=function(e){function n(){var e;return o(this,n),(e=r(this,n,arguments)).renderOptions={host:t(e)},e._$Do=void 0,e}return p(n,e),s(n,[{key:"createRenderRoot",value:function(){var e,t,i=u(d(n.prototype),"createRenderRoot",this).call(this);return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),u(d(n.prototype),"update",this).call(this,e),this._$Do=function(e,t,n){var i,r,o=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t,a=o._$litPart$;if(void 0===a){var s=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;o._$litPart$=a=new en(t.insertBefore(jt(),s),s,void 0,null!=n?n:{})}return a._$AI(e),a}(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;u(d(n.prototype),"connectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;u(d(n.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return qt}}])}(Et);
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */dn.finalized=!0,dn._$litElement$=!0,null===(cn=globalThis.litElementHydrateSupport)||void 0===cn||cn.call(globalThis,{LitElement:dn});var pn=globalThis.litElementPolyfillSupport;null==pn||pn({LitElement:dn}),(null!==(un=globalThis.litElementVersions)&&void 0!==un?un:globalThis.litElementVersions=[]).push("3.3.3");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var hn=function(e){return function(t){return"function"==typeof t?function(e,t){return customElements.define(e,t),t}(e,t):function(e,t){return{kind:t.kind,elements:t.elements,finisher:function(t){customElements.define(e,t)}}}(e,t)}},fn=function(e,t){return"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?v(v({},t),{},{finisher:function(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer:function(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher:function(n){n.createProperty(t.key,e)}}},vn=function(e,t,n){t.constructor.createProperty(n,e)};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */function mn(e){return function(t,n){return void 0!==n?vn(e,t,n):fn(e,t)}}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */function bn(e){return mn(v(v({},e),{},{state:!0}))}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */var yn,gn=function(e){var t=e.finisher,n=e.descriptor;return function(e,i){var r;if(void 0===i){var o=null!==(r=e.originalKey)&&void 0!==r?r:e.key,a=null!=n?{kind:"method",placement:"prototype",key:o,descriptor:n(e.key)}:v(v({},e),{},{key:o});return null!=t&&(a.finisher=function(e){t(e,o)}),a}var s=e.constructor;void 0!==n&&Object.defineProperty(e,i,n(i)),null==t||t(s,i)}};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */function wn(e,t){return gn({descriptor:function(n){var i={get:function(){var t,n;return null!==(n=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(t){var r="symbol"==k(n)?Symbol():"__"+n;i.get=function(){var t,n;return void 0===this[r]&&(this[r]=null!==(n=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==n?n:null),this[r]}}return i}})}
/**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */var xn=null!=(null===(yn=window.HTMLSlotElement)||void 0===yn?void 0:yn.prototype.assignedElements)?function(e,t){return e.assignedElements(t)}:function(e,t){return e.assignedNodes(t).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var kn,An=1,_n=2,En=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return{_$litDirective$:e,values:n}}},Cn=function(){return s((function e(t){o(this,e)}),[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AT",value:function(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}},{key:"_$AS",value:function(e,t){return this.update(e,t)}},{key:"update",value:function(e,t){return this.render.apply(this,w(t))}}])}(),Sn="important",Tn=" !"+Sn,On=En(function(e){function n(e){var i,a;if(o(this,n),i=r(this,n,[e]),e.type!==An||"style"!==e.name||(null===(a=e.strings)||void 0===a?void 0:a.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");return t(i)}return p(n,e),s(n,[{key:"render",value:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return null==i?t:t+"".concat(n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase(),":").concat(i,";")}),"")}},{key:"update",value:function(e,t){var n=this,i=y(t,1)[0],r=e.element.style;if(void 0===this.ht){for(var o in this.ht=new Set,i)this.ht.add(o);return this.render(i)}for(var a in this.ht.forEach((function(e){null==i[e]&&(n.ht.delete(e),e.includes("-")?r.removeProperty(e):r[e]="")})),i){var s=i[a];if(null!=s){this.ht.add(a);var l="string"==typeof s&&s.endsWith(Tn);a.includes("-")||l?r.setProperty(a,l?s.slice(0,-11):s,l?Sn:""):r[a]=s}}return qt}}])}(Cn)),Pn=function(e){"undefined"!=typeof window&&window.__BILI_X_ENGINE_SCRIPT_CACHE__&&void 0!==window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]&&delete window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]},In=function(e,t){if("undefined"==typeof window)return Promise.reject(new Error("window is not defined"));var n,i=e=e.replace(/^https?:\/\//,"//"),r=(n=i,"undefined"==typeof window?null:window.__BILI_X_ENGINE_SCRIPT_CACHE__&&window.__BILI_X_ENGINE_SCRIPT_CACHE__[n]||null);if(null!=r&&r.promise)return r.promise;var o=new Promise((function(n,i){var r=document.createElement("script");r.src=e,null!=t&&t.behavior&&r.setAttribute(t.behavior,""),r.onload=function(){var r=window;if(t.lib)return r[t.lib]?n(r[t.lib]):i(new Error('Failed to access library "'+t.lib+'" from '+e));n(null)},r.onerror=function(){i(new Error("Failed to load "+e)),document.head.removeChild(r)},document.head.appendChild(r)}));return function(e,t){"undefined"!=typeof window&&(window.__BILI_X_ENGINE_SCRIPT_CACHE__||(window.__BILI_X_ENGINE_SCRIPT_CACHE__={}),window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]=t)}(i,{promise:o,lib:null==t?void 0:t.lib}),o.then((function(){!1===(null==t?void 0:t.cache)&&Pn(i)})).catch((function(){!1===(null==t?void 0:t.cache)&&Pn(i)})),o},Mn=function(e){return Promise.resolve(function(){try{return window.KvSDK?Promise.resolve(window.KvSDK):Promise.resolve(In("//s1.hdslb.com/bfs/seed/jinkela/kv-sdk/index.js",{lib:"KvSDK"}))}catch(e){return Promise.reject(e)}}()).then((function(t){return new t(e)}))},Ln=function(){try{var e=function(){return Promise.resolve(window.__BiliUser__.get())},t=function(){if(!window.__BiliUser__)return Promise.resolve(function(){try{return Promise.resolve(In("//s1.hdslb.com/bfs/seed/jinkela/short/bili-user/index.js",{lib:"__BiliUser__"}))}catch(e){return Promise.reject(e)}}()).then((function(){}))}();return Promise.resolve(t&&t.then?t.then(e):e())}catch(e){return Promise.reject(e)}},jn=function(e){if(window.__BiliUser__){var t=window.__BiliUser__;return new Promise((function(n,i){t.quickLogin((function(e){0!==e.code?i():n()}),e)}))}return new Promise((function(t,n){function i(){kn.showComponent(),kn.addEventListener("success",(function(){t(),kn.removeEventListener("success"),kn.removeEventListener("cancel")})),kn.addEventListener("cancel",(function(){n(),kn.removeEventListener("success"),kn.removeEventListener("cancel")}))}kn?i():function(){try{return window.MiniLogin?Promise.resolve(window.MiniLogin):Promise.resolve(In("//s1.hdslb.com/bfs/seed/jinkela/short/mini-login/miniLogin.umd.min.js",{lib:"MiniLogin"}))}catch(e){return Promise.reject(e)}}().then((function(t){if(!t)return n("MiniLogin is not found");kn=new t(e),i()})).catch(n)}))};function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Rn.apply(this,arguments)}var Dn,Nn,Bn,zn,Un,Fn,Vn,Hn="",Wn=function(){return Hn||((Hn=function(e){if("undefined"==typeof window)return"";var t=document.querySelector('meta[name="'+e+'"]');return null!=t&&t.content?t.content:""}("spm_prefix"))||"0.0")},$n=function(e){return Promise.resolve(function(){try{return window.ReporterPb?Promise.resolve(window.ReporterPb):Promise.resolve(In("//s1.hdslb.com/bfs/seed/jinkela/short/reporter-pb/index.js",{lib:"ReporterPb"}))}catch(e){return Promise.reject(e)}}()).then((function(t){return new t(e)}))},qn=function(e,t,n,i){console.warn("["+("undefined"==typeof window?"Node":"Browser")+"]Miss reporter args: "+JSON.stringify({type:e,spm:t,data:n,options:i}))},Gn=function(e){var t=window,n=Wn(),i=t[e].report.bind(t[e]);return function(e,t,r,o){return"string"!=typeof t?t.prefix||(t=Rn({},t,{prefix:n})):t.split(".").length<=3&&(t=n+"."+t),i(e,t,r,o)}},Xn=function(e,t,n,i){var r=window.biliMirror,o=r.customReportPb,a=r.techReportPb,s="",l="";if("string"!=typeof t)l=[t.c,t.d,t.e].filter(Boolean).join("."),t.prefix&&(s=t.prefix);else{var c=t.split(".");isNaN(Number(c[0]))||isNaN(Number(c[1]))?l=t:(s=c.splice(0,2).join("."),l=c.join("."))}if("tech"===e){if(a)return void a({eventId:l,msg:n,otherSpmId:s})}else if(o)return void o({type:e,eventId:l,msg:n,otherSpmId:s});qn(e,t,n,i)},Zn=function(e,t,n,i){return function(e){if("undefined"==typeof window)return qn;var t=window,n="";function i(){var e=t[n];return!(null==e||!e.report)}return"string"==typeof(null==e?void 0:e.globalInst)&&(n=e.globalInst,i())?Gn(n):!1!==(null==e?void 0:e.mirror)&&window.biliMirror?Xn:(n="__biliMirrorPbInstance__",i()?Gn(n):qn)}()(e,t,n,i)},Yn=function(e){try{return window.Unios?Promise.resolve(window.Unios.request(e)):Promise.resolve(function(e){if(window.Unios)return Promise.resolve(window.Unios);var t=window.__LOAD_REQUEST_TYPE__||e||"web";return In("//s1.hdslb.com/bfs/seed/jinkela/short/unios/"+t+".min.js",{lib:"Unios"})}()).then((function(){return window.Unios.request(e)}))}catch(e){return Promise.reject(e)}},Qn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Kn={};function Jn(){var e=window.__BILI_EMOJI_PICKER_DATA_TASK__;return e&&e instanceof Promise||(e=new Promise((function(e,t){Yn({url:"//api.bilibili.com/x/emote/user/panel/web",params:{business:"reply"}}).then((function(n){if(0!==n.code||!n.data)return delete window.__BILI_EMOJI_PICKER_DATA_TASK__,t(new Error(n.message||"get emoji data error"));e(n.data)})).catch(t)})),window.__BILI_EMOJI_PICKER_DATA_TASK__=e),e}!function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Qn?Qn:"undefined"!=typeof self?self:{},i={},r={},o={};Object.defineProperty(o,"__esModule",{value:!0});var a=!0,s=o.default=function(){return a&&(a="undefined"==typeof window),a};!function(e){var t=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseAvif=e.canUseAvif=e.setAvif=void 0;var i,r=t(o);e.setAvif=function(e){i=e};e.canUseAvif=function(){return!(0,r.default)()&&(void 0!==i&&i)};e.asyncCanUseAvif=function(){return new Promise((function(t){if((0,r.default)())return t(!1);if((0,e.canUseAvif)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setAvif)(!1),t(!1)},n.onload=function(){(0,e.setAvif)(!0),t(!0)},n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="}))}}(r);var l={};!function(e){var t=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseWebP=e.canUseWebP=e.setWebp=void 0;var i,r=t(o);e.setWebp=function(e){i=e};e.canUseWebP=function(){var e,t,n,o;if((0,r.default)())return!1;if(void 0!==i)return i;try{if("undefined"!=typeof navigator&&/Firefox\/(\d+)/i.test(navigator.userAgent))return i=Number((null===(e=navigator.userAgent.match(/Firefox\/(\d+)/i))||void 0===e?void 0:e[1])||"0")>=65;var a=document.createElement("canvas");i=!!(null===(t=a.getContext)||void 0===t?void 0:t.call(a,"2d"))&&0===(null===(o=null===(n=a.toDataURL)||void 0===n?void 0:n.call(a,"image/webp"))||void 0===o?void 0:o.indexOf("data:image/webp"))}catch(e){i=!1}return i};e.asyncCanUseWebP=function(){return new Promise((function(t){if((0,r.default)())return t(!1);if((0,e.canUseWebP)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setWebp)(!1),t(!1)},n.onload=function(){(0,e.setWebp)(!0),t(!0)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="}))}}(l);var c={},u=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(c,"__esModule",{value:!0});var d=u(o);c.default=function(){return!(0,d.default)()&&!!window.HTMLPictureElement},function(e){var t=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.autoDetectAll=e.autoDetect=e.canUseHtmlPictureElement=e.canUseWebP=e.setWebp=e.canUseAvif=e.setAvif=void 0;var i=r;Object.defineProperty(e,"canUseAvif",{enumerable:!0,get:function(){return i.canUseAvif}}),Object.defineProperty(e,"setAvif",{enumerable:!0,get:function(){return i.setAvif}});var o=l;Object.defineProperty(e,"canUseWebP",{enumerable:!0,get:function(){return o.canUseWebP}}),Object.defineProperty(e,"setWebp",{enumerable:!0,get:function(){return o.setWebp}});var a=t(c);e.canUseHtmlPictureElement=a.default;e.autoDetect=function(e){void 0===e&&(e=["webp"]);for(var t=0;t<e.length;t++){if("avif"===e[t]&&(0,i.canUseAvif)())return e[t];if("webp"===e[t]&&(0,o.canUseWebP)())return e[t]}return""};e.autoDetectAll=function(){return new Promise((function(e){Promise.all([(0,i.asyncCanUseAvif)(),(0,o.asyncCanUseWebP)()]).then((function(t){var n=t[0],i=t[1];e({avif:n,webp:i})}))}))}}(i);var p={},h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e){return e?e.replace(/^http(s)?:/,""):""};var f={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isInt=e.isNum=void 0;e.isNum=function(e){return"number"==typeof e};e.isInt=function(t){return(0,e.isNum)(t)&&(0|t)===t}}(f);var v={};Object.defineProperty(v,"__esModule",{value:!0});var m=/\.(jpeg|jpg|png|webp|gif|avif)$/;v.default=function(e){var t;return(null===(t=e.match(m))||void 0===t?void 0:t[0])||null},function(e){var t=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBmgSrc=e.isSupportBmgFormat=void 0;var i=t(h),r=t(o),a=f,s=t(v);e.isSupportBmgFormat=function(e){return!!function(e){return!!/\/bfs\//.test(e)}(e)&&!!(0,s.default)(e)};var l=function(e){return"number"!=typeof e||isNaN(e)?0:Math.floor(e)||0};e.getBmgSrc=function(t,n){var o;if(void 0===n&&(n={c:!0}),"string"!=typeof t)return"";if(!(0,e.isSupportBmgFormat)(t))return t;if(t.indexOf("@")>-1){if(n.cache)return t;t=t.split("@")[0]}t=t.replace("pre-","");var s=n.dpr||((0,r.default)()?2:Math.floor(null!==(o=null===window||void 0===window?void 0:window.devicePixelRatio)&&void 0!==o?o:2)||1),c=[];n.w&&(0,a.isInt)(n.w)&&c.push("".concat(Math.floor(n.w*s),"w")),n.h&&(0,a.isInt)(n.h)&&c.push("".concat(Math.floor(n.h*s),"h")),n.e&&c.push("".concat(n.e,"e")),n.c&&c.push("1c"),n.a&&c.push("".concat([l(n.a.x),l(n.a.y),l(n.a.w)*s,l(n.a.h)*s].join("-"),"a")),n.p&&(0,a.isInt)(n.p)&&c.push("".concat(n.p,"p")),n.s&&c.push("1s"),n.q&&(0,a.isInt)(n.q)&&c.push("".concat(n.q,"q")),n.style&&c.push("!".concat(n.style));var u="";return n.ext&&["webp","avif"].includes(n.ext)&&(u=n.ext),0!==c.length||u?"".concat((0,i.default)(t),"@").concat(c.join("_")).concat(u?".".concat(u):""):t}}(p);var b,y={};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}e.initWindowExtsState=void 0,e.getWindowExtsState=void 0,Object.defineProperty(y,"__esModule",{value:!0});var w="__BMG_TRACKER_COLLECT_QUEUE__",x="__BMG_TRACKER_COLLECT_EXTS__",k="__BMG_TRACKER_COLLECT_MODE__",A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},_={};Object.defineProperty(_,"__esModule",{value:!0});var E=!0,C=_.default=function(){return E&&(E="undefined"==typeof window),E},S={};Object.defineProperty(S,"__esModule",{value:!0});var T=/\.(jpeg|jpg|png|webp|gif|avif)$/,O=S.default=function(e){var t;return(null===(t=e.match(T))||void 0===t?void 0:t[0])||null},P={};!function(e){var t=A&&A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseAvif=e.canUseAvif=e.setAvif=void 0;var n,i=t(_);e.setAvif=function(e){n=e},e.canUseAvif=function(){return!(0,i.default)()&&void 0!==n&&n},e.asyncCanUseAvif=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseAvif)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setAvif)(!1),t(!1)},n.onload=function(){(0,e.setAvif)(!0),t(!0)},n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="}))}}(P);var I={};!function(e){var t=A&&A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncCanUseWebP=e.canUseWebP=e.setWebp=void 0;var n,i=t(_);e.setWebp=function(e){n=e},e.canUseWebP=function(){var e,t,r,o;if((0,i.default)())return!1;if(void 0!==n)return n;try{if("undefined"!=typeof navigator&&/Firefox\/(\d+)/i.test(navigator.userAgent))return n=Number((null===(e=navigator.userAgent.match(/Firefox\/(\d+)/i))||void 0===e?void 0:e[1])||"0")>=65;var a=document.createElement("canvas");n=!!(null===(t=a.getContext)||void 0===t?void 0:t.call(a,"2d"))&&0===(null===(o=null===(r=a.toDataURL)||void 0===r?void 0:r.call(a,"image/webp"))||void 0===o?void 0:o.indexOf("data:image/webp"))}catch(e){n=!1}return n},e.asyncCanUseWebP=function(){return new Promise((function(t){if((0,i.default)())return t(!1);if((0,e.canUseWebP)())return t(!0);var n=new Image;n.onerror=function(){(0,e.setWebp)(!1),t(!1)},n.onload=function(){(0,e.setWebp)(!0),t(!0)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="}))}}(I);var M="BMG_EXTS",L=null,j=function(){if(L)return L;try{L=(localStorage.getItem(M)||"").split(",")}catch(e){console.warn(e),L=[]}return L},R=function(e){if(void 0===e&&(e=!1),!window[x]||e){var t=j();window[x]={avif:t.includes("avif"),webp:t.includes("webp")}}},D=function(e){return function(t){switch(function(){var e=[],t=window[x]||{avif:!1,webp:!1};t.avif&&e.push("avif"),t.webp&&e.push("webp");try{localStorage.setItem(M,e.join(","))}catch(e){console.warn(e)}}(),e){case"avif":P.setAvif(t);break;case"webp":I.setWebp(t)}}},N=function(e){var t;"object"!=g(window[x])&&R(),(null===(t=window[x])||void 0===t?void 0:t[e])||(window[x][e]=!0,D(e)(!0))},B=function(){return window[k]};y.collect=function(e,t,n){if(!C()){var i=C()?null:window.__BMG_TRACKER__||null;n=n||B();var r=(O(e)||"").substring(1);if(["avif","webp"].indexOf(r)>-1&&N(r),"onlyext"!==n)if(i)i.collect(e,t);else if("nocache"!==n){var o={src:e,type:t,ts:Date.now()/1e3|0};Array.isArray(window[w])?window[w].push(o):window[w]=[o]}}},y.getCollectMode=B,y.getLocalExtsState=j,e.getWindowExtsState=y.getWindowExtsState=function(e){var t,n;return"avif"===e?(null===(t=window[x])||void 0===t?void 0:t.avif)||!1:"webp"===e?(null===(n=window[x])||void 0===n?void 0:n.webp)||!1:window[x]||null},e.initWindowExtsState=y.initWindowExtsState=R,y.setCollectMode=function(e){window[k]=e},y.updateExtState=D,b=y.updateWindowExtsState=N;var z=new RegExp(function(e,t){return"".concat(e).concat(t,".hdslb.com")}("(s|i)","\\d")),U=function(e){if(s())return e||"";var t=window.__BMG_AF__;return(null==t?void 0:t.defDomain)?(t.defUpdated,t.defDomain):e||""},F=function(e,t){var n;if(!t)return e;var i=(null===(n=e.match(z))||void 0===n?void 0:n[0])||"";return i&&i!==t?e.replace(z,t):e};e.autoDetectAllExts=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(r){var o=function(e){e.avif&&b("avif"),e.webp&&b("webp"),r(e)};if(s())o({avif:!1,webp:!1});else{if(n){var a=e.getWindowExtsState();if(a&&"object"===t(a))return void o({webp:a.webp||!1,avif:a.avif||!1})}if(e.initWindowExtsState(),e.getWindowExtsState("avif")||e.getWindowExtsState("webp"))return o(e.getWindowExtsState());i.autoDetectAll().then(o)}}))},e.getBmgSrcNext=function(t,n,r){var o="";return s()?p.getBmgSrc((null==r?void 0:r.domain)?F(t,r.domain):t,n):(o=e.getWindowExtsState("avif")?"avif":e.getWindowExtsState("webp")?"webp":i.autoDetect(["avif","webp"]),p.getBmgSrc(F(t,U(null==r?void 0:r.domain)),Object.assign(Object.assign({},n),{ext:o})))},e.getSrcDefDomain=U,e.replaceSrcDefDomain=F}(Kn);var ei=Object.defineProperty,ti=Object.getOwnPropertyDescriptor,ni=function(e,t,n,i){for(var r,o=i>1?void 0:i?ti(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&ei(t,n,o),o},ii=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).pageCount=5,e.packages=[],e.contentLoading=!1,e.currentIdx=0,e}return p(t,e),s(t,[{key:"currentPage",get:function(){return Math.floor(this.currentIdx/this.pageCount)}},{key:"isFirstPage",get:function(){return 0===this.currentPage}},{key:"isLastPage",get:function(){var e=Math.floor(this.packages.length/this.pageCount)+(this.packages.length%this.pageCount?1:0);return this.currentPage===e-1}},{key:"currentPackage",get:function(){return this.packages.length&&this.packages[this.currentIdx]||null}},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.initData()}},{key:"initData",value:(n=i(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn();case 3:t=e.sent,n=t.packages,this.packages=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return n.apply(this,arguments)})},{key:"setTab",value:function(e){var t=this;if(!(e>this.packages.length-1||e<0)){this.contentLoading=!0,this.currentIdx=e;var n=Math.floor(e/this.pageCount);this.shadowRoot.querySelector("#tabs-track").style.setProperty("transform","translateX(".concat(100*-n,"%)")),window.setTimeout((function(){t.contentLoading=!1}),200)}}},{key:"handlePrev",value:function(){this.isFirstPage||this.setTab(this.currentPage*this.pageCount-1)}},{key:"handleNext",value:function(){this.isLastPage||this.setTab((this.currentPage+1)*this.pageCount)}},{key:"handleSelect",value:function(e){this.dispatchEvent(new CustomEvent("select",{detail:e}))}},{key:"emojiRenderer",value:function(e){var t=this,n=e.type,i=e.meta,r=e.text,o=e.url,a=e.gif_url,s=e.webp_url;if(4===n)return $t(Dn||(Dn=g(['<div\n        class="emoji text"\n        @click=',"\n      >\n        ","\n      </div>"])),(function(){t.handleSelect(e)}),r);var l=1===i.size?24:56,c=Kn.getBmgSrcNext(s||a||o,{w:l,h:l,dpr:2});return $t(Nn||(Nn=g(['<div\n      class="emoji img"\n      style="height:','px"\n      @click=','\n    >\n      <img width="','" height="','" src="','" alt="','" />\n    </div>'])),l,(function(){t.handleSelect(e)}),l,l,c,r)}},{key:"contentTemplate",value:function(){var e=this;return $t(Bn||(Bn=g(['<div id="content">',"</div>"])),this.currentPackage.emote.map((function(t){return e.emojiRenderer(t)})))}},{key:"render",value:function(){var e=this;return $t(zn||(zn=g(['<div id="picker">\n      <div id="header">','</div>\n      <div id="body">','</div>\n      <div id="footer">\n        <div id="tabs">\n          <div\n            id="tabs-track"\n            style="','"\n          >\n            ','\n          </div>\n        </div>\n        <div id="nav">\n          <button\n            class="','"\n            @click=','\n          >\n            <bili-icon size="16" icon="BDC/arrow_back_left_line/3"></bili-icon>\n          </button>\n          <button\n            class="','"\n            @click=','\n          >\n            <bili-icon size="16" icon="BDC/arrow_forward_right_line/3"></bili-icon>\n          </button>\n        </div>\n      </div>\n    </div>'])),this.currentPackage?this.currentPackage.text:"表情",this.currentPackage&&!this.contentLoading?this.contentTemplate():$t(Un||(Un=g(['<div id="spinner">加载中...</div>']))),On({transform:"translateX(".concat(58*-this.currentPage*this.pageCount,"px)")}),this.packages.map((function(t,n){return $t(Fn||(Fn=g(['<div\n                class="','"\n                @click=','\n              >\n                <img\n                  width="22"\n                  height="22"\n                  src="','"\n                  alt="','"\n                />\n              </div>'])),e.currentIdx===n?"tab active":"tab",(function(){e.setTab(n)}),Kn.getBmgSrcNext(t.url,{w:22,h:22}),t.text)})),this.isFirstPage?"disabled":"",(function(){e.handlePrev()}),this.isLastPage?"disabled":"",(function(){e.handleNext()}))}}]);var n}(dn);ii.styles=vt(Vn||(Vn=g(["\n    :host {\n      --bili-emoji-picker-tab-count: 5;\n      --bili-emoji-picker-tab-width: 58px;\n      --bili-emoji-picker-nav-width: 73px;\n      --bili-emoji-picker-body-height: 196px;\n    }\n    #picker {\n      width: calc(var(--bili-emoji-picker-tab-width) * var(--bili-emoji-picker-tab-count) + var(--bili-emoji-picker-nav-width));\n      font-size: 12px;\n      color: var(--text2);\n      overflow: hidden;\n      background-color: var(--bg1);\n      border: 1px solid var(--graph_bg_thick);\n      border-radius: 8px;\n      box-sizing: border-box;\n    }\n\n    #header {\n      padding: 13px 15px 6px;\n      box-sizing: border-box;\n    }\n    #body {\n      height: var(--bili-emoji-picker-body-height);\n    }\n    #spinner {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n    }\n    #content {\n      height: 100%;\n      padding: 0 11px;\n      background-color: var(--bg1);\n      overflow: auto;\n    }\n    #content::-webkit-scrollbar {\n      width: 4px;\n      border-radius: 4px;\n      background-color: transparent;\n    }\n    #content::-webkit-scrollbar-thumb {\n      border-radius: 4px;\n      border-radius: 4px;\n      background-color: var(--graph_bg_thick);\n      transition: 0.3s ease-in-out;\n    }\n    #content::-webkit-scrollbar-track {\n      border-radius: 4px;\n      background-color: transparent;\n    }\n    #content .emoji {\n      display: inline-block;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n    #content .emoji:hover {\n      background-color: var(--graph_bg_thick);\n    }\n    #content .emoji.img {\n      box-sizing: content-box;\n      padding: 4px;\n    }\n    #content .emoji.text {\n      padding: 5px 8px;\n      line-height: 22px;\n    }\n    #footer {\n      background-color: var(--bg3);\n      box-sizing: border-box;\n      height: 36px;\n      display: flex;\n    }\n    #tabs {\n      height: 100%;\n      width: calc(100% - var(--bili-emoji-picker-nav-width));\n      overflow: hidden;\n    }\n    #tabs-track {\n      transition: transform 0.3s ease-in-out;\n      transform: translateX(0);\n      display: flex;\n      flex-wrap: no-wrap;\n      height: 100%;\n    }\n    .tab {\n      height: 100%;\n      flex-shrink: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: var(--bili-emoji-picker-tab-width);\n      height: 100%;\n      cursor: pointer;\n    }\n    .tab:hover {\n      background-color: var(--graph_bg_thick);\n    }\n    .tab.active {\n      background-color: var(--bg1);\n    }\n    #nav {\n      height: 100%;\n      width: var(--bili-emoji-picker-nav-width);\n      display: flex;\n      justify-content: space-evenly;\n      align-items: center;\n    }\n    #nav button {\n      width: 36px;\n      height: 100%;\n      color: var(--text2);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      outline: none;\n      border: none;\n      background-color: transparent;\n      cursor: pointer;\n      transition: color 0.2s;\n    }\n    #nav button.disabled {\n      color: var(--text4);\n    }\n  "]))),ni([bn()],ii.prototype,"packages",2),ni([bn()],ii.prototype,"contentLoading",2),ni([bn()],ii.prototype,"currentIdx",2),ni([bn()],ii.prototype,"currentPage",1),ni([bn()],ii.prototype,"isFirstPage",1),ni([bn()],ii.prototype,"isLastPage",1),ni([bn()],ii.prototype,"currentPackage",1),ii=ni([hn("bili-emoji-picker")],ii);
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var ri=function(e,t){return(ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function oi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ri(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ai(e,t){var n=e[0],i=e[1];return[n*Math.cos(t)-i*Math.sin(t),n*Math.sin(t)+i*Math.cos(t)]}function si(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)if("number"!=typeof e[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+k(e[n])+" == typeof "+e[n]);return!0}var li=Math.PI;function ci(e,t,n){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var i=e.rX,r=e.rY,o=e.x,a=e.y;i=Math.abs(e.rX),r=Math.abs(e.rY);var s=ai([(t-o)/2,(n-a)/2],-e.xRot/180*li),l=s[0],c=s[1],u=Math.pow(l,2)/Math.pow(i,2)+Math.pow(c,2)/Math.pow(r,2);1<u&&(i*=Math.sqrt(u),r*=Math.sqrt(u)),e.rX=i,e.rY=r;var d=Math.pow(i,2)*Math.pow(c,2)+Math.pow(r,2)*Math.pow(l,2),p=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(r,2)-d)/d)),h=i*c/r*p,f=-r*l/i*p,v=ai([h,f],e.xRot/180*li);e.cX=v[0]+(t+o)/2,e.cY=v[1]+(n+a)/2,e.phi1=Math.atan2((c-f)/r,(l-h)/i),e.phi2=Math.atan2((-c-f)/r,(-l-h)/i),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*li),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*li),e.phi1*=180/li,e.phi2*=180/li}function ui(e,t,n){si(e,t,n);var i=e*e+t*t-n*n;if(0>i)return[];if(0===i)return[[e*n/(e*e+t*t),t*n/(e*e+t*t)]];var r=Math.sqrt(i);return[[(e*n+t*r)/(e*e+t*t),(t*n-e*r)/(e*e+t*t)],[(e*n-t*r)/(e*e+t*t),(t*n+e*r)/(e*e+t*t)]]}var di,pi=Math.PI/180;function hi(e,t,n){return(1-n)*e+n*t}function fi(e,t,n,i){return e+Math.cos(i/180*li)*t+Math.sin(i/180*li)*n}function vi(e,t,n,i){var r=1e-6,o=t-e,a=n-t,s=3*o+3*(i-n)-6*a,l=6*(a-o),c=3*o;return Math.abs(s)<r?[-c/l]:function(e,t,n){void 0===n&&(n=1e-6);var i=e*e/4-t;if(i<-n)return[];if(i<=n)return[-e/2];var r=Math.sqrt(i);return[-e/2-r,-e/2+r]}(l/s,c/s,r)}function mi(e,t,n,i,r){var o=1-r;return e*(o*o*o)+t*(3*o*o*r)+n*(3*o*r*r)+i*(r*r*r)}!function(e){function t(){return r((function(e,t,n){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=n),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=n),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=n),e.relative=!1),e}))}function n(){var e=NaN,t=NaN,n=NaN,i=NaN;return r((function(r,o,a){return r.type&ki.SMOOTH_CURVE_TO&&(r.type=ki.CURVE_TO,e=isNaN(e)?o:e,t=isNaN(t)?a:t,r.x1=r.relative?o-e:2*o-e,r.y1=r.relative?a-t:2*a-t),r.type&ki.CURVE_TO?(e=r.relative?o+r.x2:r.x2,t=r.relative?a+r.y2:r.y2):(e=NaN,t=NaN),r.type&ki.SMOOTH_QUAD_TO&&(r.type=ki.QUAD_TO,n=isNaN(n)?o:n,i=isNaN(i)?a:i,r.x1=r.relative?o-n:2*o-n,r.y1=r.relative?a-i:2*a-i),r.type&ki.QUAD_TO?(n=r.relative?o+r.x1:r.x1,i=r.relative?a+r.y1:r.y1):(n=NaN,i=NaN),r}))}function i(){var e=NaN,t=NaN;return r((function(n,i,r){if(n.type&ki.SMOOTH_QUAD_TO&&(n.type=ki.QUAD_TO,e=isNaN(e)?i:e,t=isNaN(t)?r:t,n.x1=n.relative?i-e:2*i-e,n.y1=n.relative?r-t:2*r-t),n.type&ki.QUAD_TO){e=n.relative?i+n.x1:n.x1,t=n.relative?r+n.y1:n.y1;var o=n.x1,a=n.y1;n.type=ki.CURVE_TO,n.x1=((n.relative?0:i)+2*o)/3,n.y1=((n.relative?0:r)+2*a)/3,n.x2=(n.x+2*o)/3,n.y2=(n.y+2*a)/3}else e=NaN,t=NaN;return n}))}function r(e){var t=0,n=0,i=NaN,r=NaN;return function(o){if(isNaN(i)&&!(o.type&ki.MOVE_TO))throw new Error("path must start with moveto");var a=e(o,t,n,i,r);return o.type&ki.CLOSE_PATH&&(t=i,n=r),void 0!==o.x&&(t=o.relative?t+o.x:o.x),void 0!==o.y&&(n=o.relative?n+o.y:o.y),o.type&ki.MOVE_TO&&(i=t,r=n),a}}function o(e,t,n,i,o,a){return si(e,t,n,i,o,a),r((function(r,s,l,c){var u=r.x1,d=r.x2,p=r.relative&&!isNaN(c),h=void 0!==r.x?r.x:p?0:s,f=void 0!==r.y?r.y:p?0:l;function v(e){return e*e}r.type&ki.HORIZ_LINE_TO&&0!==t&&(r.type=ki.LINE_TO,r.y=r.relative?0:l),r.type&ki.VERT_LINE_TO&&0!==n&&(r.type=ki.LINE_TO,r.x=r.relative?0:s),void 0!==r.x&&(r.x=r.x*e+f*n+(p?0:o)),void 0!==r.y&&(r.y=h*t+r.y*i+(p?0:a)),void 0!==r.x1&&(r.x1=r.x1*e+r.y1*n+(p?0:o)),void 0!==r.y1&&(r.y1=u*t+r.y1*i+(p?0:a)),void 0!==r.x2&&(r.x2=r.x2*e+r.y2*n+(p?0:o)),void 0!==r.y2&&(r.y2=d*t+r.y2*i+(p?0:a));var m=e*i-t*n;if(void 0!==r.xRot&&(1!==e||0!==t||0!==n||1!==i))if(0===m)delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag,r.type=ki.LINE_TO;else{var b=r.xRot*Math.PI/180,y=Math.sin(b),g=Math.cos(b),w=1/v(r.rX),x=1/v(r.rY),k=v(g)*w+v(y)*x,A=2*y*g*(w-x),_=v(y)*w+v(g)*x,E=k*i*i-A*t*i+_*t*t,C=A*(e*i+t*n)-2*(k*n*i+_*e*t),S=k*n*n-A*e*n+_*e*e,T=(Math.atan2(C,E-S)+Math.PI)%Math.PI/2,O=Math.sin(T),P=Math.cos(T);r.rX=Math.abs(m)/Math.sqrt(E*v(P)+C*O*P+S*v(O)),r.rY=Math.abs(m)/Math.sqrt(E*v(O)-C*O*P+S*v(P)),r.xRot=180*T/Math.PI}return void 0!==r.sweepFlag&&0>m&&(r.sweepFlag=+!r.sweepFlag),r}))}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),si(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return r((function(e,t,n){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=n),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=n),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=n),e.relative=!0),e}))},e.NORMALIZE_HVZ=function(e,t,n){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),r((function(i,r,o,a,s){if(isNaN(a)&&!(i.type&ki.MOVE_TO))throw new Error("path must start with moveto");return t&&i.type&ki.HORIZ_LINE_TO&&(i.type=ki.LINE_TO,i.y=i.relative?0:o),n&&i.type&ki.VERT_LINE_TO&&(i.type=ki.LINE_TO,i.x=i.relative?0:r),e&&i.type&ki.CLOSE_PATH&&(i.type=ki.LINE_TO,i.x=i.relative?a-r:a,i.y=i.relative?s-o:s),i.type&ki.ARC&&(0===i.rX||0===i.rY)&&(i.type=ki.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},e.NORMALIZE_ST=n,e.QT_TO_C=i,e.INFO=r,e.SANITIZE=function(e){void 0===e&&(e=0),si(e);var t=NaN,n=NaN,i=NaN,o=NaN;return r((function(r,a,s,l,c){var u=Math.abs,d=!1,p=0,h=0;if(r.type&ki.SMOOTH_CURVE_TO&&(p=isNaN(t)?0:a-t,h=isNaN(n)?0:s-n),r.type&(ki.CURVE_TO|ki.SMOOTH_CURVE_TO)?(t=r.relative?a+r.x2:r.x2,n=r.relative?s+r.y2:r.y2):(t=NaN,n=NaN),r.type&ki.SMOOTH_QUAD_TO?(i=isNaN(i)?a:2*a-i,o=isNaN(o)?s:2*s-o):r.type&ki.QUAD_TO?(i=r.relative?a+r.x1:r.x1,o=r.relative?s+r.y1:r.y2):(i=NaN,o=NaN),r.type&ki.LINE_COMMANDS||r.type&ki.ARC&&(0===r.rX||0===r.rY||!r.lArcFlag)||r.type&ki.CURVE_TO||r.type&ki.SMOOTH_CURVE_TO||r.type&ki.QUAD_TO||r.type&ki.SMOOTH_QUAD_TO){var f=void 0===r.x?0:r.relative?r.x:r.x-a,v=void 0===r.y?0:r.relative?r.y:r.y-s;p=isNaN(i)?void 0===r.x1?p:r.relative?r.x:r.x1-a:i-a,h=isNaN(o)?void 0===r.y1?h:r.relative?r.y:r.y1-s:o-s;var m=void 0===r.x2?0:r.relative?r.x:r.x2-a,b=void 0===r.y2?0:r.relative?r.y:r.y2-s;u(f)<=e&&u(v)<=e&&u(p)<=e&&u(h)<=e&&u(m)<=e&&u(b)<=e&&(d=!0)}return r.type&ki.CLOSE_PATH&&u(a-l)<=e&&u(s-c)<=e&&(d=!0),d?[]:r}))},e.MATRIX=o,e.ROTATE=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),si(e,t,n);var i=Math.sin(e),r=Math.cos(e);return o(r,i,-i,r,t-t*r+n*i,n-t*i-n*r)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),si(e,t),o(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),si(e,t),o(e,0,0,t,0,0)},e.SKEW_X=function(e){return si(e),o(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return si(e),o(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),si(e),o(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),si(e),o(1,0,0,-1,0,e)},e.A_TO_C=function(){return r((function(e,t,n){return ki.ARC===e.type?function(e,t,n){var i,r,o,a;e.cX||ci(e,t,n);for(var s=Math.min(e.phi1,e.phi2),l=Math.max(e.phi1,e.phi2)-s,c=Math.ceil(l/90),u=new Array(c),d=t,p=n,h=0;h<c;h++){var f=hi(e.phi1,e.phi2,h/c),v=hi(e.phi1,e.phi2,(h+1)/c),m=v-f,b=4/3*Math.tan(m*pi/4),y=[Math.cos(f*pi)-b*Math.sin(f*pi),Math.sin(f*pi)+b*Math.cos(f*pi)],g=y[0],w=y[1],x=[Math.cos(v*pi),Math.sin(v*pi)],k=x[0],A=x[1],_=[k+b*Math.sin(v*pi),A-b*Math.cos(v*pi)],E=_[0],C=_[1];u[h]={relative:e.relative,type:ki.CURVE_TO};var S=function(t,n){var i=ai([t*e.rX,n*e.rY],e.xRot),r=i[0],o=i[1];return[e.cX+r,e.cY+o]};i=S(g,w),u[h].x1=i[0],u[h].y1=i[1],r=S(E,C),u[h].x2=r[0],u[h].y2=r[1],o=S(k,A),u[h].x=o[0],u[h].y=o[1],e.relative&&(u[h].x1-=d,u[h].y1-=p,u[h].x2-=d,u[h].y2-=p,u[h].x-=d,u[h].y-=p),d=(a=[u[h].x,u[h].y])[0],p=a[1]}return u}(e,e.relative?0:t,e.relative?0:n):e}))},e.ANNOTATE_ARCS=function(){return r((function(e,t,n){return e.relative&&(t=0,n=0),ki.ARC===e.type&&ci(e,t,n),e}))},e.CLONE=function(){return function(e){var t={};for(var n in e)t[n]=e[n];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),o=i(),a=n(),s=r((function(t,n,i){var r=a(o(e(function(e){var t={};for(var n in e)t[n]=e[n];return t}(t))));function l(e){e>s.maxX&&(s.maxX=e),e<s.minX&&(s.minX=e)}function c(e){e>s.maxY&&(s.maxY=e),e<s.minY&&(s.minY=e)}if(r.type&ki.DRAWING_COMMANDS&&(l(n),c(i)),r.type&ki.HORIZ_LINE_TO&&l(r.x),r.type&ki.VERT_LINE_TO&&c(r.y),r.type&ki.LINE_TO&&(l(r.x),c(r.y)),r.type&ki.CURVE_TO){l(r.x),c(r.y);for(var u=0,d=vi(n,r.x1,r.x2,r.x);u<d.length;u++)0<(S=d[u])&&1>S&&l(mi(n,r.x1,r.x2,r.x,S));for(var p=0,h=vi(i,r.y1,r.y2,r.y);p<h.length;p++)0<(S=h[p])&&1>S&&c(mi(i,r.y1,r.y2,r.y,S))}if(r.type&ki.ARC){l(r.x),c(r.y),ci(r,n,i);for(var f=r.xRot/180*Math.PI,v=Math.cos(f)*r.rX,m=Math.sin(f)*r.rX,b=-Math.sin(f)*r.rY,y=Math.cos(f)*r.rY,g=r.phi1<r.phi2?[r.phi1,r.phi2]:-180>r.phi2?[r.phi2+360,r.phi1+360]:[r.phi2,r.phi1],w=g[0],x=g[1],k=function(e){var t=e[0],n=e[1],i=180*Math.atan2(n,t)/Math.PI;return i<w?i+360:i},A=0,_=ui(b,-v,0).map(k);A<_.length;A++)(S=_[A])>w&&S<x&&l(fi(r.cX,v,b,S));for(var E=0,C=ui(y,-m,0).map(k);E<C.length;E++){var S;(S=C[E])>w&&S<x&&c(fi(r.cY,m,y,S))}}return t}));return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(di||(di={}));var bi,yi=function(){function e(){}return e.prototype.round=function(e){return this.transform(di.ROUND(e))},e.prototype.toAbs=function(){return this.transform(di.TO_ABS())},e.prototype.toRel=function(){return this.transform(di.TO_REL())},e.prototype.normalizeHVZ=function(e,t,n){return this.transform(di.NORMALIZE_HVZ(e,t,n))},e.prototype.normalizeST=function(){return this.transform(di.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(di.QT_TO_C())},e.prototype.aToC=function(){return this.transform(di.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(di.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(di.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(di.SCALE(e,t))},e.prototype.rotate=function(e,t,n){return this.transform(di.ROTATE(e,t,n))},e.prototype.matrix=function(e,t,n,i,r,o){return this.transform(di.MATRIX(e,t,n,i,r,o))},e.prototype.skewX=function(e){return this.transform(di.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(di.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(di.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(di.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(di.ANNOTATE_ARCS())},e}(),gi=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},wi=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},xi=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return oi(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var n=this;void 0===t&&(t=[]);for(var i=function(e){t.push(e),n.curArgs.length=0,n.canParseCommandOrComma=!0},r=0;r<e.length;r++){var o=e[r],a=!(this.curCommandType!==ki.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=wi(o)&&("0"===this.curNumber&&"0"===o||a);if(!wi(o)||s)if("e"!==o&&"E"!==o)if("-"!==o&&"+"!==o||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==o||this.curNumberHasExp||this.curNumberHasDecimal||a){if(this.curNumber&&-1!==this.curCommandType){var l=Number(this.curNumber);if(isNaN(l))throw new SyntaxError("Invalid number ending at "+r);if(this.curCommandType===ki.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>l)throw new SyntaxError('Expected positive number, got "'+l+'" at index "'+r+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+r+'"');this.curArgs.push(l),this.curArgs.length===Ai[this.curCommandType]&&(ki.HORIZ_LINE_TO===this.curCommandType?i({type:ki.HORIZ_LINE_TO,relative:this.curCommandRelative,x:l}):ki.VERT_LINE_TO===this.curCommandType?i({type:ki.VERT_LINE_TO,relative:this.curCommandRelative,y:l}):this.curCommandType===ki.MOVE_TO||this.curCommandType===ki.LINE_TO||this.curCommandType===ki.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),ki.MOVE_TO===this.curCommandType&&(this.curCommandType=ki.LINE_TO)):this.curCommandType===ki.CURVE_TO?i({type:ki.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===ki.SMOOTH_CURVE_TO?i({type:ki.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===ki.QUAD_TO?i({type:ki.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===ki.ARC&&i({type:ki.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!gi(o))if(","===o&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==o&&"-"!==o&&"."!==o)if(s)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+r+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+r+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==o&&"Z"!==o)if("h"===o||"H"===o)this.curCommandType=ki.HORIZ_LINE_TO,this.curCommandRelative="h"===o;else if("v"===o||"V"===o)this.curCommandType=ki.VERT_LINE_TO,this.curCommandRelative="v"===o;else if("m"===o||"M"===o)this.curCommandType=ki.MOVE_TO,this.curCommandRelative="m"===o;else if("l"===o||"L"===o)this.curCommandType=ki.LINE_TO,this.curCommandRelative="l"===o;else if("c"===o||"C"===o)this.curCommandType=ki.CURVE_TO,this.curCommandRelative="c"===o;else if("s"===o||"S"===o)this.curCommandType=ki.SMOOTH_CURVE_TO,this.curCommandRelative="s"===o;else if("q"===o||"Q"===o)this.curCommandType=ki.QUAD_TO,this.curCommandRelative="q"===o;else if("t"===o||"T"===o)this.curCommandType=ki.SMOOTH_QUAD_TO,this.curCommandRelative="t"===o;else{if("a"!==o&&"A"!==o)throw new SyntaxError('Unexpected character "'+o+'" at index '+r+".");this.curCommandType=ki.ARC,this.curCommandRelative="a"===o}else t.push({type:ki.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal="."===o}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,n){void 0===n&&(n=[]);for(var i=0,r=Object.getPrototypeOf(this).parse.call(this,t);i<r.length;i++){var o=r[i],a=e(o);Array.isArray(a)?n.push.apply(n,a):n.push(a)}return n}}})},t}(yi),ki=function(e){function t(n){var i=e.call(this)||this;return i.commands="string"==typeof n?t.parse(n):n,i}return oi(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=di.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],n=0,i=this.commands;n<i.length;n++){var r=e(i[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return this.commands=t,this},t.encode=function(e){return function(e){var t="";Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];if(i.type===ki.CLOSE_PATH)t+="z";else if(i.type===ki.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===ki.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===ki.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===ki.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===ki.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===ki.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===ki.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===ki.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==ki.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+n+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}(e)},t.parse=function(e){var t=new xi,n=[];return t.parse(e,n),t.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(yi),Ai=((bi={})[ki.MOVE_TO]=2,bi[ki.LINE_TO]=2,bi[ki.HORIZ_LINE_TO]=1,bi[ki.VERT_LINE_TO]=1,bi[ki.CLOSE_PATH]=0,bi[ki.QUAD_TO]=4,bi[ki.SMOOTH_QUAD_TO]=2,bi[ki.CURVE_TO]=6,bi[ki.SMOOTH_CURVE_TO]=4,bi[ki.ARC]=7,bi),_i={},Ei=function(e,t,n){var i=[];return e.commands.forEach((function(e,r){i.push(function(e,t,n){if(e.type!==t.type)throw new Error("Cannot diff between different command types");var i=e,r=t,o={};return["x","y","x1","y1","x2","y2"].forEach((function(e){void 0!==i[e]&&void 0!==r[e]&&(o[e]=(r[e]-i[e])*n)})),o}(e,t.commands[r],n))})),i},Ci=function(e,t,n){var i=t.max-t.min,r=n.max-n.min,o=(e-t.min)/i;return n.min+o*r},Si=function(e,t,n){for(var i=e,r=0;r<t.length;r++){var o=t[r];if(r===t.length-1)return void(i[o]=n);i[o]||(i[o]={}),i=i[o]}},Ti=function(){var e=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","function"==typeof window.fetch?fetch(t).then((function(e){return e.json()})):new Promise((function(e,n){var i=new XMLHttpRequest;i.addEventListener("load",(function(){try{e(JSON.parse(i.responseText))}catch(e){n(e)}})),i.onerror=n,i.open("GET",t),i.send()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oi=function(){var e=i(m().mark((function e(t){var n,i,r,o,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.category,i=t.url,r=t.json,o=null,r)if("string"==typeof r)try{o=JSON.parse(r)}catch(e){}else"object"==k(r)&&(o=r);if(o||!i){e.next=14;break}return e.prev=4,e.next=7,Ti(i);case 7:o=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return");case 14:if(o){e.next=16;break}return e.abrupt("return");case 16:a=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(i<=0)return t;for(var r in n)t[r]?t[r]=e(t[r],n[r],i-1):t[r]=n[r];return t},n?Ri[n]=a(Ri[n]||{},o,2):Object.keys(o).map((function(e){Ri[e]=a(Ri[e]||{},o[e],2)}));case 18:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),Pi=[],Ii=function(){var e=i(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Promise.all(t.map(Oi)),Pi.push(n),e.next=4,n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mi=function(){var e=i(m().mark((function e(t){var n,i,r,o,a,s,l,c,u,d,p,h,f,v,b,g,w,x;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(("undefined"==typeof window?"undefined":k(window))>"u")){e.next=2;break}return e.abrupt("return",Promise.resolve(null));case 2:if(f=t.icon.split("/"),v=y(f,3),b=v[0],g=v[1],w=v[2],b&&g&&w){e.next=5;break}throw new Error("SVGIconNext: invalid icon option");case 5:return e.prev=5,e.next=8,Promise.all(Pi);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:if(null==(i=null==(n=Ri[b])?void 0:n[g])||!i[w]){e.next=14;break}return e.abrupt("return",null==(o=null==(r=Ri[b])?void 0:r[g])?void 0:o[w]);case 14:if(null==(s=null==(a=_i[b])?void 0:a[g])||!s[w]){e.next=16;break}return e.abrupt("return",null==(c=null==(l=_i[b])?void 0:l[g])?void 0:c[w]);case 16:return e.prev=16,x=Ti("//i0.hdslb.com/bfs/svg-next/".concat(b,"/").concat(g,"/v").concat(w,".json")),Si(_i,f,x),e.t1=Si,e.t2=Ri,e.t3=f,e.next=24,null==(d=null==(u=_i[b])?void 0:u[g])?void 0:d[w];case 24:e.t4=e.sent,(0,e.t1)(e.t2,e.t3,e.t4),e.next=31;break;case 28:throw e.prev=28,e.t5=e.catch(16),Si(_i,f,null),new Error("SVGIconNext: fetch icon config failed");case 31:return e.abrupt("return",null==(h=null==(p=Ri[b])?void 0:p[g])?void 0:h[w]);case 32:case"end":return e.stop()}}),e,null,[[5,10],[16,28]])})));return function(t){return e.apply(this,arguments)}}(),Li=function(e,t){var n;if(!e.palette)return"currentColor";if(Array.isArray(e.palette))return e.palette;var i=null==(n=null==t?void 0:t.palettes)?void 0:n.find((function(t){return t.name===e.palette}));return i?i.value:e.palette},ji=function(e,t){var n,i;if(!t)return[];var r=function(e){var t=[24,24];return Array.isArray(e.size)?(t[0]=e.size[0],t[1]=e.size[1]):"number"==typeof e.size&&!Number.isNaN(t)&&(t[0]=e.size,t[1]=e.size),t}(e),o=t.default.map((function(e){return new ki(e).toAbs()})),a=(null==(n=t.axes)?void 0:n.map((function(e){return{min:e.min.map((function(e){return new ki(e).toAbs()})),max:e.max.map((function(e){return new ki(e).toAbs()}))}})))||[];return null!=(i=t.axes)&&i.length?o.map((function(n,i){var o=t.axes.map((function(t,o){var s=a[o].min[i],l=a[o].max[i];if(!s||!l||[s,l].some((function(e){return e.commands.length!==n.commands.length})))return[];var c=function(){var n,i=null==(n=e.axes)?void 0:n[t.name];return i?"stroke"===t.name?i/(r[0]/24):i:t.value.default}(),u=0;if(c<t.value.default){var d={min:t.value.min,max:t.value.default};u=Ci(c,d,{min:-1,max:0})}else{var p={min:t.value.default,max:t.value.max};u=Ci(c,p,{min:0,max:1})}return Ei(n,u<0?s:l,Math.abs(u))}));return function(e,t){var n,i=new ki(e.encode()),r=l(t);try{var o=function(){var e=n.value;0!==e.length&&i.commands.forEach((function(t,n){Object.keys(e[n]).forEach((function(i){t[i]=t[i]+e[n][i]}))}))};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return i}(n,o).scale(r[0]/24,r[1]/24).encode()})):o.map((function(e){return new ki(e.encode()).scale(r[0]/24,r[1]/24).encode()}))},Ri={};("undefined"==typeof window?"undefined":k(window))<"u"&&(window.__SVG_ICON_NEXT_CACHE__&&(Ri=window.__SVG_ICON_NEXT_CACHE__),window.__SVG_ICON_NEXT_PRELOAD_PACKS__||(window.__SVG_ICON_NEXT_PRELOAD_PACKS__=Ii));var Di=function(e){function t(){var e;return o(this,t),(e=r(this,t)).axes=null,e.palette="",e.width="",e.height="",e.attachShadow({mode:"open"}),e.shadowRoot&&(e.shadowRoot.innerHTML='\n        <style>\n          :host {\n            display: inline-flex;\n            align-items: center;\n          }\n        </style>\n        <svg\n          id="icon"\n          xmlns="http://www.w3.org/2000/svg"\n          xmlns:xlink="http://www.w3.org/1999/xlink"\n        ></svg>\n      '),e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){if(this.shadowRoot){var e=this.getAttribute("icon");e&&this.updateSvg(e)}}},{key:"disconnectedCallback",value:function(){this.palette="",this.axes={}}},{key:"getSVGIconOptions",value:function(e){return{icon:e,size:[Number(this.width),Number(this.height)],axes:this.axes||{},palette:this.palette}}},{key:"initSize",value:function(){var e="24",t="24",n=this.getAttribute("size")||"";if(n){var i=n.split(",");return 2===i.length?(e=i[0],t=i[1]):e=t=i[0],this.width=e,void(this.height=t)}var r=this.getAttribute("width"),o=this.getAttribute("height");r&&o&&(e=r,t=o),this.width=e,this.height=t}},{key:"updateSvg",value:(n=i(m().mark((function e(t){var n,i,r,o,a,s,l=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shadowRoot){e.next=2;break}return e.abrupt("return");case 2:if(n=this.shadowRoot.querySelector("#icon")){e.next=5;break}return e.abrupt("return");case 5:return this.initSize(),n.setAttribute("width",this.width),n.setAttribute("height",this.height),n.setAttribute("viewBox","0 0 ".concat(this.width," ").concat(this.height)),i=this.getSVGIconOptions(t),e.next=9,Mi(i);case 9:if(r=e.sent){e.next=12;break}return e.abrupt("return");case 12:null!=(o=ji(i,r))&&o.length&&(null!=(a=Li(i,r))&&a.length&&(this.palette=a),s=o.map((function(e,t){return'\n                    <path\n                        d="'.concat(e,'"\n                        fill="').concat("string"==typeof l.palette?l.palette:l.palette[t]||"",'"\n                    ></path>\n                ')})).join(""),n.innerHTML=s);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"attributeChangedCallback",value:function(e,t,n){if("icon"===e)n&&n!==t&&this.updateSvg(n)}}],[{key:"observedAttributes",get:function(){return["icon"]}}]);var n}(_(HTMLElement));Di.elName="bili-icon",customElements.get(Di.elName)||customElements.define(Di.elName,Di);var Ni=function(){return s((function e(){o(this,e),this.reset()}),[{key:"reset",value:function(e){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}}])}();function Bi(){return new Ni}function zi(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}var Ui=function(){function e(){o(this,e),this.disposables=[]}return s(e,[{key:"addEventListener",value:function(e,t,n,i){return this.add(function(e,t,n,i){return e.addEventListener(t,n,i),function(){!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,t,n,i)}}(e,t,n,i))}},{key:"mutationObserve",value:function(e,t,n){var i=!1,r=new MutationObserver(t);return r.observe(e,n),function(){return function(e){i||(i=!0,e.disconnect())}(r)}}},{key:"requestAnimationFrame",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=requestAnimationFrame.apply(void 0,arguments);return this.add((function(){return cancelAnimationFrame(e)}))}))},{key:"nextFrame",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.requestAnimationFrame((function(){return e.requestAnimationFrame.apply(e,n)}))}},{key:"setTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=setTimeout.apply(void 0,arguments);return this.add((function(){return clearTimeout(e)}))}))},{key:"microTask",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i={current:!0};return zi((function(){i.current&&t[0]()})),this.add((function(){i.current=!1}))}},{key:"style",value:function(e,t,n){var i=e.style.getPropertyValue(t);return Object.assign(e.style,c({},t,n)),this.add((function(){Object.assign(e.style,c({},t,i))}))}},{key:"group",value:function(t){var n=new e;return t(n),this.add((function(){return n.dispose()}))}},{key:"add",value:function(e){var t=this;return this.disposables.push(e),function(){var n=t.disposables.indexOf(e);n>=0&&t.remove(n,1)}}},{key:"remove",value:function(e,t){var n,i=l(this.disposables.splice(e,null!=t?t:this.disposables.length));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispose",value:function(){this.remove(0)}}])}();function Fi(){return new Ui}function Vi(e,t){if(e in t){for(var n=t[e],i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return"function"==typeof n?n.apply(void 0,r):n}var a=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((function(e){return'"'.concat(e,'"')})).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(a,Vi),a}var Hi=("undefined"==typeof window?"undefined":k(window))<"u",Wi=1e3;function $i(){return Hi?window.__BILI_POPPER_ZINDEX__++:Wi}function qi(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e&&i.length>0&&(t=e.classList).add.apply(t,i)}function Gi(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e&&i.length>0&&(t=e.classList).remove.apply(t,i)}function Xi(e,t,n,i){var r=n?"enter":"leave",o=Fi(),a=void 0!==i?function(e){var t={called:!1};return function(){if(!t.called)return t.called=!0,e.apply(void 0,arguments)}}(i):function(){};"enter"===r&&(e.removeAttribute("hidden"),e.style.display="");var s=Vi(r,{enter:function(){return t.enter},leave:function(){return t.leave}}),l=Vi(r,{enter:function(){return t.enterTo},leave:function(){return t.leaveTo}}),c=Vi(r,{enter:function(){return t.enterFrom},leave:function(){return t.leaveFrom}});return Gi.apply(void 0,[e].concat(w(t.base),w(t.enter),w(t.enterTo),w(t.enterFrom),w(t.leave),w(t.leaveFrom),w(t.leaveTo),w(t.entered))),qi.apply(void 0,[e].concat(w(t.base),w(s),w(c))),o.nextFrame((function(){Gi.apply(void 0,[e].concat(w(t.base),w(s),w(c))),qi.apply(void 0,[e].concat(w(t.base),w(s),w(l))),function(e,t){var n=Fi();if(!e)return n.dispose;var i=getComputedStyle(e),r=[i.transitionDuration,i.transitionDelay].map((function(e){var t=e.split(",").filter(Boolean).map((function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)})).sort((function(e,t){return t-e})),n=y(t,1)[0];return void 0===n?0:n})),o=y(r,2),a=o[0]+o[1];if(0!==a){n.group((function(n){n.setTimeout((function(){t(),n.dispose()}),a),n.addEventListener(e,"transitionrun",(function(e){e.target===e.currentTarget&&n.dispose()}))}));var s=n.addEventListener(e,"transitionend",(function(e){e.target===e.currentTarget&&(t(),s())}))}else t();n.add((function(){return t()})),n.dispose}(e,(function(){return Gi.apply(void 0,[e].concat(w(t.base),w(s),w(l))),qi.apply(void 0,[e].concat(w(t.base),w(t.entered))),a()}))})),o.dispose}Hi&&(window.__BILI_POPPER_ZINDEX__||(window.__BILI_POPPER_ZINDEX__=Wi));var Zi=function(e){function t(){var e;o(this,t),(e=r(this,t)).disposables=Fi(),e.deferred=Bi(),e.onConfirm=null,e.onCancel=null,e.final=null;var n=e.attachShadow({mode:"open"}),i=document.createElement("template");i.innerHTML='\n        <style>\n            :host {\n              position: fixed;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              top: 0;\n            }\n            #mask {\n              position: absolute;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              top: 0;\n              background-color: rgba(0, 0, 0, 0.5);\n            }\n            #wrap {\n              position: absolute;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              top: 0;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n            }\n            #dialog {\n              -webkit-font-smoothing: antialiased;\n              background-color: var(--bg1);\n              border-radius: 8px;\n              box-sizing: border-box;\n              font-family: PingFang SC,HarmonyOS_Regular,Helvetica Neue,Microsoft YaHei,sans-serif!important;\n              font-weight: 400;\n              overflow: hidden;\n              padding-bottom: 24px!important;\n              padding: 16px;\n              position: relative;\n              width: 320px;\n              transform-origin: center center;\n            }\n            #close {\n                color: var(--text2);\n                cursor: pointer;\n                height: 22px;\n                position: absolute;\n                right: 16px;\n                top: 16px;\n                width: 22px;\n            }\n            #title {\n                color: var(--text1);\n                font-size: 16px;\n                font-weight: 600;\n                margin-top: 16px;\n                margin-bottom: 10px;\n                text-align: center;\n                padding: 0 16px;\n            }\n            #message {\n                color: var(--text2);\n                font-size: 14px;\n                margin-bottom: 14px;\n                text-align: center;\n                padding: 0 16px 10px;\n                white-space: pre-wrap;\n            }\n            #action {\n                align-items: center;\n                display: flex;\n                justify-content: center;\n                padding-right: 12px;\n            }\n            #action button {\n                -webkit-font-smoothing: antialiased;\n                border: 1px solid var(--brand_blue);\n                border-radius: 6px;\n                box-sizing: border-box;\n                cursor: pointer;\n                font-family: PingFang SC,HarmonyOS_Regular,Helvetica Neue,Microsoft YaHei,sans-serif!important;\n                font-weight: 400;\n                height: 32px;\n                outline: none;\n                transition: all .2s;\n                width: 130px;\n                margin-left: 12px;\n            }\n            #action button#cancel {\n                background-color: var(--bg1);\n                border-color: var(--line_regular);\n                color: var(--text1);\n            }\n            #action button#confirm {\n                background-color: var(--brand_blue);\n                border-color: var(--brand_blue);\n                color: var(--text_white);\n            }\n        </style>\n        <div id="mask"></div>\n        <div id="wrap">\n          <div \n              role="dialog" \n              id="dialog"\n          >\n              <div id="close"><bili-icon icon="BDC/xmark_close_line/1" size="22"></bili-icon></div>\n              <div id="title"></div>\n              <div id="message"></div>\n              <div id="action">\n                  <button id="cancel"></button>\n                  <button id="confirm"></button>\n              </div>\n          </div>\n        </div>\n    ';var a=document.importNode(i.content,!0);return n.appendChild(a),e}return p(t,e),s(t,[{key:"getEl",value:function(e){var t;return null==(t=this.shadowRoot)?void 0:t.querySelector("#".concat(e))}},{key:"connectedCallback",value:function(){var e=this;this.disposables.addEventListener(this.getEl("close"),"click",(function(){e.handleActionEvent("cancel")})),this.disposables.addEventListener(this.getEl("cancel"),"click",(function(){e.handleActionEvent("cancel")})),this.disposables.addEventListener(this.getEl("confirm"),"click",(function(){e.handleActionEvent("confirm")}))}},{key:"disconnectedCallback",value:function(){this.disposables.dispose()}},{key:"handleActionEvent",value:(l=i(m().mark((function e(t){var n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i="cancel"===t?this.onCancel:this.onConfirm)){e.next=6;break}return e.next=4,i(this.hide.bind(this));case 4:e.next=8;break;case 6:return e.next=8,this.hide();case 8:null==(n=this.final)||n.call(this);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"handleText",value:function(e,t){this.getEl(e).textContent=t,""===t&&this.handleVisible(e,!1)}},{key:"doTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=this.getEl(e);r.style.transition="all ".concat(i,"ms linear"),r.style.opacity="var(--bili-modal-opacity, ".concat(t?"0":"1",")"),"dialog"===e&&(r.style.transform="var(--bili-modal-transform, scale(1))"),t&&(r.style.display="block"),setTimeout((function(){r.style.setProperty("--bili-modal-opacity",t?"1":"0"),"dialog"===e&&r.style.setProperty("--bili-modal-transform",t?"scale(1)":"scale(.8)"),setTimeout((function(){t||(r.style.display="none","mask"===e&&n.handleVisible("",!1)),r.style.removeProperty("transition"),r.style.removeProperty("opacity"),r.style.removeProperty("--bili-modal-opacity"),n.deferred.resolve(!0)}),i+20)}),0)}},{key:"handleVisible",value:function(e,t,n){var i=""===e?this:this.getEl(e);n?"mask"!==e&&"dialog"!==e||this.doTransition(e,t):i.style.display=t?"block":"none"}},{key:"handleAction",value:function(e,t){var n=this;if(!1!==t&&""!==t){this.handleVisible(e,!0);var r=function(){var e=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.hide();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o="cancel"===e?"取消":"确定";k(t)>"u"?t={text:o,click:r}:"string"==typeof t?t={text:t,click:r}:"function"==typeof t&&(t={text:o,click:t});var a=t;this.handleText(e,a.text),this["cancel"===e?"onCancel":"onConfirm"]=a.click}else this.handleVisible(e,!1)}},{key:"show",value:(a=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.deferred=Bi(),this.final=t.final||null,this.handleVisible("mask",!1!==t.mask,!0),this.handleVisible("dialog",!0),this.handleVisible("",!0),this.style.setProperty("z-index",String(t.zIndex||$i()),"important"),this.handleText("title",t.title||""),this.handleText("message",t.message||""),this.handleAction("cancel",t.cancel),this.handleAction("confirm",t.confirm),e.next=12,this.deferred.promise;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"hide",value:(n=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.deferred=Bi(),this.handleVisible("dialog",!1,!0),"block"===this.getEl("mask").style.display?this.handleVisible("mask",!1,!0):this.handleVisible("",!1),e.next=5,this.deferred.promise;case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]);var n,a,l}(_(HTMLElement));customElements.get("bili-modal")||customElements.define("bili-modal",Zi);var Yi=333,Qi="cubic-bezier(0.4, 0, 0.22, 1)",Ki=function(e){function t(){var e;return o(this,t),(e=r(this,t)).visible=!1,e.disposables=Fi(),e.imgs=[],e.isOpening=!1,e.isZoomIn=!1,e.isZooming=!1,e.isOpen=!1,e.isClosing=!1,e.currIndex=0,e.removeSelfByClose=!1,e.isZoomInDragging=!1,e.zoomInDragPos=null,e.zoomInOffset={x:0,y:0},e.viewportRect={w:0,h:0,x:0,y:0},e.attachShadow({mode:"open"}),e.render(),e}return p(t,e),s(t,[{key:"shadowRootQuerySelector",value:function(e){return this.shadowRoot.querySelector(e)}},{key:"container",get:function(){return this.shadowRootQuerySelector("#container")}},{key:"item",get:function(){return this.shadowRootQuerySelector("#container #item")}},{key:"zoomWrap",get:function(){return this.shadowRootQuerySelector("#container #item #zoom-wrap")}},{key:"currImgEl",get:function(){return this.shadowRootQuerySelector("#container #item #zoom-wrap img")}},{key:"spinner",get:function(){return this.shadowRootQuerySelector("#container #spinner")}},{key:"thumb",get:function(){return this.shadowRootQuerySelector("#wrap #thumb")}},{key:"currImg",get:function(){return this.imgs[this.currIndex]}},{key:"connectedCallback",value:(y=i(m().mark((function e(){var t=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zi((function(){t.initEvents()}));case 1:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)})},{key:"timeoutPromise",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(n){e.disposables.setTimeout((function(){n(!0)}),t)}))}},{key:"initEvents",value:function(){var e=this;if(this.shadowRoot){var t=this.shadowRoot.querySelector("#close"),n=this.shadowRoot.querySelector("#prev"),r=this.shadowRoot.querySelector("#next");this.disposables.addEventListener(t,"click",(function(){e.close()})),this.disposables.addEventListener(n,"click",(function(){e.prev()})),this.disposables.addEventListener(r,"click",(function(){e.next()})),this.disposables.addEventListener(this.thumb,"click",(function(t){if(t.target instanceof HTMLElement){var n,i=null!==(n=t.target.dataset.index)&&void 0!==n?n:e.currIndex;i!==e.currIndex&&e.goTo(Number(i))}})),this.disposables.addEventListener(this.zoomWrap,"click",(function(t){if(!e.isZoomInDragging)if(e.isZoomIn)e.zoomTo();else{var n=e.zoomWrap.getBoundingClientRect(),i=n.left,r=n.top;e.zoomTo({x:t.clientX-i,y:t.clientY-r})}}));var o=function(t){e.isOpen&&t.preventDefault()};this.disposables.addEventListener(this,"touchmove",o,{passive:!1}),this.disposables.addEventListener(this.container,"click",(function(t){if(t.target===e.item){if(e.isZoomIn||e.isZooming)return;e.close()}})),this.disposables.addEventListener(this.zoomWrap,"wheel",(function(t){o(t),e.isZoomIn&&!e.isZooming&&e.scrollZoomWrap(t.deltaX,t.deltaY)}),{passive:!0}),this.disposables.addEventListener(this.zoomWrap,"mousedown",(function(t){!e.isZoomIn||e.isZooming||(e.isZoomInDragging=!0,e.zoomInDragPos={x:t.clientX,y:t.clientY,isOrigin:!0})})),this.disposables.addEventListener(this.zoomWrap,"mousemove",(function(t){if(e.isZoomIn&&!e.isZooming&&e.zoomInDragPos){var n=e.zoomInDragPos.x-t.clientX,i=e.zoomInDragPos.y-t.clientY;e.scrollZoomWrap(n,i),e.zoomInDragPos={x:t.clientX,y:t.clientY,isOrigin:!1}}})),this.disposables.addEventListener(this.zoomWrap,"mouseup",i(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isZoomIn||e.isZooming){t.next=11;break}if(e.zoomInDragPos){t.next=4;break}return e.isZoomInDragging=!1,t.abrupt("return");case 4:if(null==(n=e.zoomInDragPos)||!n.isOrigin){t.next=7;break}return e.zoomInDragPos=null,e.isZoomInDragging=!1,t.abrupt("return");case 7:return e.zoomInDragPos=null,t.next=10,e.timeoutPromise(300);case 10:e.isZoomInDragging=!1;case 11:case"end":return t.stop()}}),t)})))),this.disposables.addEventListener(document,"keydown",(function(t){var n=function(){t.stopPropagation(),t.preventDefault()};if(e.isOpen)switch(t.key){case"Escape":e.close(),n();break;case"ArrowLeft":e.prev(),n();break;case"ArrowRight":e.next(),n()}})),this.disposables.addEventListener(window,"resize",function(e,t,n){var i,r=n||{},o=r.noTrailing,a=void 0!==o&&o,s=r.noLeading,l=void 0!==s&&s,c=r.debounceMode,u=void 0===c?void 0:c,d=!1,p=0;function h(){i&&clearTimeout(i)}function f(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=this,c=Date.now()-p;function f(){p=Date.now(),t.apply(s,r)}function v(){i=void 0}d||(l||!u||i||f(),h(),void 0===u&&c>e?l?(p=Date.now(),a||(i=setTimeout(u?v:f,e))):f():!0!==a&&(i=setTimeout(u?v:f,void 0===u?e-c:e)))}return f.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;h(),d=!n},f}(10,(function(){e.getViewportRect(),!e.isZooming&&!e.isZoomInDragging&&e.currImg&&(delete e.currImg.zoom,e.calculateImgZoom(),e.animateToOpenState(!1))})))}}},{key:"disconnectedCallback",value:function(){this.disposables.dispose(),this.isOpen=!1}},{key:"getViewportRect",value:function(){var e=this.container;if(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height,r=t.x,o=t.y;this.viewportRect.w=n,this.viewportRect.h=i,this.viewportRect.x=r,this.viewportRect.y=o}}},{key:"setTransitionStyle",value:function(e,t,n,i){e.style.setProperty("transition",t?"".concat(t," ").concat(n,"ms ").concat(i||Qi):"none")}},{key:"removeTransitionStyle",value:function(e){e.style.removeProperty("transition")}},{key:"animateTo",value:(b=i(m().mark((function e(t,n,i){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.timeoutPromise();case 2:return this.setTransitionStyle(t,n,Yi),e.next=5,this.timeoutPromise(30);case 5:t.style.setProperty(n,i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return b.apply(this,arguments)})},{key:"initialize",value:(f=i(m().mark((function e(t){var n,i,r,o,a,s,l,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){return new Error("bili photoswipe open options error")},i=t.gallery,r=t.children,o=t.dataSource,a=t.index,s=t.appendToEl,!i||!r){e.next=12;break}if(l=document.querySelector(i)){e.next=6;break}return e.abrupt("return",Promise.reject(n()));case 6:if((c=Array.from(l.querySelectorAll(r)||[])).length){e.next=9;break}return e.abrupt("return",Promise.reject(n()));case 9:this.imgs=Array.from(c).map((function(e){var t=e.dataset;return{src:t.pswpSrc||"",width:Number(t.pswpWidth)||0,height:Number(t.pswpHeight)||0,thumbEl:e,thumbCropped:null!==t.cropped}})),e.next=17;break;case 12:if(null==o||!o.length){e.next=16;break}this.imgs=o.map((function(e){return v({},e)})),e.next=17;break;case 16:return e.abrupt("return",Promise.reject(n()));case 17:if("number"==typeof a&&a>=0&&a<this.imgs.length&&(this.currIndex=0|a),e.t0=s||!this.parentElement,!e.t0){e.next=24;break}return this.removeSelfByClose=!0,(s||document.body).appendChild(this),e.next=24,this.timeoutPromise();case 24:this.getViewportRect(),this.setAttribute("visible",""),this.style.setProperty("z-index",String(1e4+$i())),this.setThumb();case 28:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"setThumb",value:function(){if(1!==this.imgs.length){this.thumb.innerHTML=this.imgs.map((function(e,t){return function(e,t){return'\n        <div class="thumb-item" data-index="'.concat(t,'"><img src="').concat(e,'"></div>\n      ')}("".concat(e.src,"@96w_96h_1c.webp"),t)})).join(""),this.updateThumbActive()}else this.thumb.style.display="none"}},{key:"updateThumbActive",value:function(){if(1!==this.imgs.length){var e=this.thumb.querySelector(".thumb-item.active");e&&e.classList.remove("active");var t=this.thumb.children[this.currIndex];t&&t.classList.add("active")}}},{key:"getCurrImgOpenData",value:function(){var e=this.currImg,t=e.src,n=e.width,i=e.height,r=e.zoom;return{src:t,width:this.isZoomIn?n:(null==r?void 0:r.width)||n,height:this.isZoomIn?i:(null==r?void 0:r.height)||i}}},{key:"animateZoomWrapToOpenState",value:(h=i(m().mark((function e(t,n){var i,r,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getCurrImgOpenData(),r=i.width,o=i.height,a=(this.viewportRect.w-r)/2,s=o>=this.viewportRect.h?0:(this.viewportRect.h-o)/2,t?this.animateTo(this.zoomWrap,"transform",this.getTransform(a,s,n)):(this.removeTransitionStyle(this.zoomWrap),this.zoomWrap.style.setProperty("transform",this.getTransform(a,s,n))),e.next=4,this.timeoutPromise(30+(t?Yi:0));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"animateToOpenState",value:(d=i(m().mark((function e(t){var n,i,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getCurrImgOpenData(),i=n.width,r=n.height,t?(this.animateTo(this.container,"transform",this.getTransform(0,0)),this.animateTo(this.item,"transform","none"),this.animateZoomWrapToOpenState(t,1)):(this.animateZoomWrapToOpenState(t,1),this.currImgEl&&this.setElementSize(this.currImgEl,i,r)),e.next=4,this.timeoutPromise(30+(t?Yi:0));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"animateToClosedState",value:(u=i(m().mark((function e(t){var n,i,r,o,a,s,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.currImg).thumbEl){e.next=3;break}return e.abrupt("return");case 3:if((i=n.thumbCropped?this.getCroppedBoundsByElement(n.thumbEl,n.width,n.height):this.getBoundsByElement(n.thumbEl)).innerRect){e.next=6;break}return e.abrupt("return");case 6:return r=this.getCurrImgOpenData().width,o=-this.viewportRect.w+(i.x-i.innerRect.x)+i.innerRect.w,a=-this.viewportRect.h+(i.y-i.innerRect.y)+i.innerRect.h,s=this.viewportRect.w-i.innerRect.w,l=this.viewportRect.h-i.innerRect.h,this.zoomWrap.style.setProperty("transform-origin","0 0"),t?(this.animateTo(this.container,"transform",this.getTransform(o,a)),this.animateTo(this.item,"transform",this.getTransform(s,l)),this.animateTo(this.zoomWrap,"transform",this.getTransform(i.innerRect.x,i.innerRect.y,i.w/r))):(this.container.style.setProperty("transform",this.getTransform(o,a)),this.item.style.setProperty("transform",this.getTransform(s,l)),this.zoomWrap.style.setProperty("transform",this.getTransform(i.innerRect.x,i.innerRect.y,i.w/r))),e.next=11,this.timeoutPromise(30+(t?Yi:0));case 11:this.zoomWrap.classList.add("opend");case 12:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"open",value:(c=i(m().mark((function e(t){var n,i,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.visible){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.initialize(t);case 4:if(this.triggerEvent("before-open"),this.visible=!0,n=this.calculateImgZoom(),i=n.src,!n.thumbEl){e.next=22;break}return this.isOpening=!0,this.appendPlaceholderEl(),r=this.loadImg(i),e.next=12,this.animateToClosedState(!1);case 12:return e.next=14,this.animateToOpenState(!0);case 14:return e.t0=this,e.next=17,r;case 17:e.t1=e.sent,e.t0.appendImgEl.call(e.t0,e.t1),this.isOpening=!1,e.next=25;break;case 22:return this.appendImgEl(),e.next=25,this.animateToOpenState(!1);case 25:this.isOpen=!0,this.triggerEvent("after-open");case 26:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"close",value:(l=i(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.visible&&!this.isOpening&&!this.isClosing){e.next=2;break}return e.abrupt("return");case 2:if(this.isClosing=!0,this.visible=!1,this.triggerEvent("before-close"),this.removeAttribute("visible"),t=this.currImg.thumbEl,e.t0=t,!e.t0){e.next=8;break}return e.next=8,this.animateToClosedState(!0);case 8:this.imgs=[],this.triggerEvent("after-close"),this.removeSelfByClose&&this.parentElement&&this.parentElement.removeChild(this),this.removeSelfByClose=!1,this.isOpen=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"triggerEvent",value:function(e){this.dispatchEvent(new CustomEvent(e))}},{key:"prev",value:function(){this.triggerEvent("prev"),this.goTo(this.currIndex-1)}},{key:"next",value:function(){this.triggerEvent("next"),this.goTo(this.currIndex+1)}},{key:"clearZoomState",value:function(){this.zoomInOffset.x=0,this.zoomInOffset.y=0,this.isZoomIn=!1,this.zoomWrap.classList.remove("zoom-in"),this.zoomWrap.classList.add("zoom-out")}},{key:"goTo",value:(a=i(m().mark((function e(t){var n,i,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0||t>this.imgs.length-1)){e.next=2;break}return e.abrupt("return");case 2:if(this.currIndex=t,this.updateThumbActive(),this.isZoomIn&&this.clearZoomState(),n=this.calculateImgZoom(),i=n.src,r=n.thumbEl,this.animateToOpenState(!1),e.prev=5,!r){e.next=15;break}return this.appendPlaceholderEl(),e.t0=this,e.next=11,this.loadImg(i);case 11:e.t1=e.sent,e.t0.appendImgEl.call(e.t0,e.t1),e.next=23;break;case 15:return this.removeImgFromContent(),this.spinner.classList.add("visible"),e.t2=this,e.next=20,this.loadImg(i);case 20:e.t3=e.sent,e.t2.appendImgEl.call(e.t2,e.t3),this.spinner.classList.remove("visible");case 23:e.next=28;break;case 25:e.prev=25,e.t4=e.catch(5),console.log(e.t4);case 28:case"end":return e.stop()}}),e,this,[[5,25]])}))),function(e){return a.apply(this,arguments)})},{key:"scrollZoomWrap",value:function(e,t){var n=this.currImg,i=n.width,r=n.height;n.zoom&&(i<this.viewportRect.w&&r<this.viewportRect.h||(this.zoomInOffset.x=i>this.viewportRect.w?-Math.max(0,Math.min(-this.zoomInOffset.x+e,i-this.viewportRect.w)):(this.viewportRect.w-i)/2,this.zoomInOffset.y=r>this.viewportRect.h?-Math.max(0,Math.min(-this.zoomInOffset.y+t,r-this.viewportRect.h)):(this.viewportRect.h-r)/2,this.zoomWrap.style.setProperty("transform",this.getTransform(this.zoomInOffset.x,this.zoomInOffset.y,1))))}},{key:"zoomTo",value:(n=i(m().mark((function e(t){var n,i,r,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.currImg,i=n.width,r=n.height,(o=n.zoom)&&!this.isZooming){e.next=3;break}return e.abrupt("return");case 3:if(!this.isZoomIn){e.next=12;break}return this.isZooming=!0,this.clearZoomState(),e.next=8,this.animateZoomWrapToOpenState(!0,o.width/i);case 8:return e.next=10,this.animateToOpenState(!1);case 10:return this.isZooming=!1,e.abrupt("return");case 12:return this.isZooming=!0,this.isZoomIn=!0,this.zoomWrap.classList.remove("zoom-out"),this.zoomWrap.classList.add("zoom-in"),a=(this.viewportRect.w-i)/2,s=0,i>this.viewportRect.w&&(a=-((null==t?void 0:t.x)||0)/o.width*(i-this.viewportRect.w)),r<this.viewportRect.h?s=(this.viewportRect.h-r)/2:null!=t&&t.y&&(s=-((null==t?void 0:t.y)||0)/o.height*(r-this.viewportRect.h)),this.zoomInOffset.x=a,this.zoomInOffset.y=s,e.next=20,this.animateTo(this.zoomWrap,"transform",this.getTransform(a,s,i/o.width));case 20:return e.next=22,this.timeoutPromise(363);case 22:this.removeTransitionStyle(this.zoomWrap),this.setElementSize(this.currImgEl,i,r),this.zoomWrap.style.setProperty("transform",this.getTransform(a,s,1)),this.isZooming=!1;case 26:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"loadImg",value:function(e,t){return new Promise((function(n,i){var r=t||new Image;r.onload=function(){n(r)},r.onerror=function(){i(new Error("load img error"))},r.src=e}))}},{key:"calculateImgZoom",value:function(e){var t;if((e=null!==(t=e)&&void 0!==t?t:this.currIndex)>=this.imgs.length||e<0)throw new Error("index out of range");if(this.imgs[e].zoom)return this.imgs[e];var n=this.imgs[e],i=n.width,r=n.height,o=!1,a=i/r,s=this.viewportRect.w/this.viewportRect.h;if(a>s)i>this.viewportRect.w&&(r=(i=this.viewportRect.w)/a,o=!0);else if(a<s)r>this.viewportRect.h&&(i=(r=this.viewportRect.h)*a,o=!0);else{var l=Math.min(this.viewportRect.w,this.viewportRect.h);l<i&&(o=!0,i=r=l)}return o&&(this.imgs[e].zoom={width:Math.round(i),height:Math.round(r)}),this.imgs[e]}},{key:"getBoundsByElement",value:function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width}}},{key:"getCroppedBoundsByElement",value:function(e,t,n){var i=e.getBoundingClientRect(),r=i.width/t,o=i.height/n,a=r>o?r:o,s=(i.width-t*a)/2,l=(i.height-n*a)/2;return{x:i.left+s,y:i.top+l,w:t*a,innerRect:{w:i.width,h:i.height,x:s,y:l}}}},{key:"getTransform",value:function(e,t,n){var i="translate3d(".concat(e,"px, ").concat(t,"px, 0px)");return"number"==typeof n&&(i+=" scale3d(".concat(n,", ").concat(n,", 1)")),i}},{key:"appendImgToContent",value:function(e){var t=this.zoomWrap.querySelector("img");t?this.zoomWrap.replaceChild(e,t):this.zoomWrap.appendChild(e)}},{key:"removeImgFromContent",value:function(){var e=this.zoomWrap.querySelector("img");e&&this.zoomWrap.removeChild(e)}},{key:"appendPlaceholderEl",value:function(){var e=this.currImg.thumbEl;if(e){var t=e.querySelector("img"),n=null==t?void 0:t.getAttribute("src");if(n){var i=new Image;i.alt="",i.src=n,i.setAttribute("role","presentation"),i.setAttribute("aria-hidden","true"),this.setElementSize(i,250),i.style.setProperty("width","250px"),i.style.setProperty("height","auto"),i.style.transformOrigin="0 0",i.style.transform=this.getTransform(0,0,this.getCurrImgOpenData().width/250),this.appendImgToContent(i)}}}},{key:"setElementSize",value:function(e,t,n){e.style.setProperty("width","".concat(t,"px")),e.style.setProperty("height",n?"".concat(n,"px"):"auto")}},{key:"appendImgEl",value:function(e){var t=this.getCurrImgOpenData(),n=t.src,i=t.width,r=t.height;e||((e=new Image).src=n),this.setElementSize(e,i,r),this.appendImgToContent(e),this.currImg.zoom&&this.zoomWrap.classList.add("zoom-out"),this.zoomWrap.classList.contains("opend")||this.zoomWrap.classList.add("opend")}},{key:"render",value:function(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n      <style>\n        :host {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n        }\n        #bg {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: #000;\n        }\n        :host([visible]) .ui-visible {\n          opacity: .8;\n          pointer-events: auto;\n        }\n        :host([visible]) #thumb.ui-visible {\n          opacity: 1;\n          pointer-events: auto;\n        }\n        .ui-visible {\n          opacity: 0.005;\n          will-change: opacity;\n          transition: opacity ".concat(Yi,"ms ease;\n          pointer-events: none;\n        }\n        #wrap,\n        #wrap #container,\n        #wrap #container #item,\n        #wrap #container #zoom-wrap {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n        #wrap button {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          position: absolute;\n          z-index: 2;\n          width: 42px;\n          height: 42px;\n          border-radius: 50%;\n          color: var(--text_white);\n          background: rgba(0,0,0,.58);\n          transition-function: ").concat(Qi,';\n          cursor: pointer;\n          outline: none;\n          border: none;\n        }\n        button.top {\n          top: 16px;\n        }\n        button.left {\n          left: 16px;\n        }\n        button.right {\n          right: 16px;\n        }\n        button.middle {\n          top: 50%;\n        }\n        button#prev {\n          transform: translateY(-50%);\n        }\n        button#next {\n          transform: translateY(-50%) rotate(180deg);\n        }\n        #wrap button:hover {\n          color: var(--brand_pink);\n        }\n        #wrap #container,\n        #wrap #item {\n          overflow: hidden;\n        }\n        #wrap #container #zoom-wrap.opend {\n          width: auto;\n          height: auto;\n        }\n        #zoom-wrap img {\n          max-width: none;\n          -webkit-user-drag: none;\n        }\n        #zoom-wrap.zoom-out {\n          cursor: zoom-in;\n        }\n        #zoom-wrap.zoom-in {\n          cursor: move;\n          cursor: -webkit-grab;\n          cursor: -moz-grab;\n          cursor: grab;\n        }\n        #spinner {\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n          padding: 20px 0;\n          width: 100%;\n          text-align: center;\n          font-size: 14px;\n          color: var(--text3);\n          pointer-events: none;\n          display: none;\n        }\n        #spinner.visible {\n          display: block;\n        }\n        #spinner img {\n          margin-right: 8px;\n          vertical-align: bottom;\n        }\n        #thumb {\n          display: flex;\n          align-items: center;\n          position: absolute;\n          left: 50%;\n          bottom: 30px;\n          z-index: 2;\n          padding: 6px 10px;\n          border-radius: 8px;\n          background: rgba(24,25,28,.8);\n          backdrop-filter: blur(20px);\n          transform: translate(-50%);\n        }\n        #thumb .thumb-item {\n          width: 54px;\n          height: 54px;\n          padding: 1px;\n          border: 2px solid transparent;\n          border-radius: 8px;\n          transition: .3s;\n          cursor: pointer;\n          box-sizing: border-box;\n        }\n        #thumb .thumb-item img {\n          width: 100%;\n          height: 100%;\n          border-radius: 6px;\n          -webkit-user-drag: none;\n          pointer-events: none;\n        }\n        #thumb .thumb-item.active {\n          border-color: var(--brand_pink);\n        }\n      </style>\n      <div id="bg" class="ui-visible"></div>\n      <section id="wrap" aria-roledescription="carousel">\n        <div id="container">\n          <div id="item">\n            <div id="zoom-wrap"></div>\n          </div>\n          <div id="spinner">\n            <img width="24" height="24" src="//s1.hdslb.com/bfs/static/jinkela/long/gif/loading-blue.gif" />\n            <span>正在玩命加载…</span>\n          </div>\n        </div>\n        <button id="close" class="right top ui-visible"><bili-icon icon="BDC/xmark_close_line/1" size="20"></bili-icon></button>\n        <button id="prev" class="left middle ui-visible"><bili-icon icon="BDC/arrow_back_left_line/3" size="20"></bili-icon></button>\n        <button id="next" class="right middle ui-visible"><bili-icon icon="BDC/arrow_back_left_line/3" size="20"></bili-icon></button>\n        <div id="thumb" class="ui-visible"></div>\n      </section>\n    '))}}]);var n,a,l,c,u,d,h,f,b,y}(_(HTMLElement));customElements.get("bili-photoswipe")||customElements.define("bili-photoswipe",Ki);var Ji="top",er="bottom",tr="right",nr="left",ir="auto",rr=[Ji,er,tr,nr],or="start",ar="end",sr="clippingParents",lr="viewport",cr="popper",ur="reference",dr=rr.reduce((function(e,t){return e.concat([t+"-"+or,t+"-"+ar])}),[]),pr=[].concat(rr,[ir]).reduce((function(e,t){return e.concat([t,t+"-"+or,t+"-"+ar])}),[]),hr=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function fr(e){return e?(e.nodeName||"").toLowerCase():null}function vr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mr(e){return e instanceof vr(e).Element||e instanceof Element}function br(e){return e instanceof vr(e).HTMLElement||e instanceof HTMLElement}function yr(e){return"undefined"!=typeof ShadowRoot&&(e instanceof vr(e).ShadowRoot||e instanceof ShadowRoot)}var gr={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];br(r)&&fr(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});br(i)&&fr(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};function wr(e){return e.split("-")[0]}var xr=Math.max,kr=Math.min,Ar=Math.round;function _r(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Er(){return!/^((?!chrome|android).)*safari/i.test(_r())}function Cr(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&br(e)&&(r=e.offsetWidth>0&&Ar(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Ar(i.height)/e.offsetHeight||1);var a=(mr(e)?vr(e):window).visualViewport,s=!Er()&&n,l=(i.left+(s&&a?a.offsetLeft:0))/r,c=(i.top+(s&&a?a.offsetTop:0))/o,u=i.width/r,d=i.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Sr(e){var t=Cr(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Tr(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&yr(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Or(e){return vr(e).getComputedStyle(e)}function Pr(e){return["table","td","th"].indexOf(fr(e))>=0}function Ir(e){return((mr(e)?e.ownerDocument:e.document)||window.document).documentElement}function Mr(e){return"html"===fr(e)?e:e.assignedSlot||e.parentNode||(yr(e)?e.host:null)||Ir(e)}function Lr(e){return br(e)&&"fixed"!==Or(e).position?e.offsetParent:null}function jr(e){for(var t=vr(e),n=Lr(e);n&&Pr(n)&&"static"===Or(n).position;)n=Lr(n);return n&&("html"===fr(n)||"body"===fr(n)&&"static"===Or(n).position)?t:n||function(e){var t=/firefox/i.test(_r());if(/Trident/i.test(_r())&&br(e)&&"fixed"===Or(e).position)return null;var n=Mr(e);for(yr(n)&&(n=n.host);br(n)&&["html","body"].indexOf(fr(n))<0;){var i=Or(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}function Rr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Dr(e,t,n){return xr(e,kr(t,n))}function Nr(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Br(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var zr={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=wr(n.placement),l=Rr(s),c=[nr,tr].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return Nr("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Br(e,rr))}(r.padding,n),d=Sr(o),p="y"===l?Ji:nr,h="y"===l?er:tr,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],v=a[l]-n.rects.reference[l],m=jr(o),b=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,y=f/2-v/2,g=u[p],w=b-d[c]-u[h],x=b/2-d[c]/2+y,k=Dr(g,x,w),A=l;n.modifiersData[i]=((t={})[A]=k,t.centerOffset=k-x,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&Tr(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ur(e){return e.split("-")[1]}var Fr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vr(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=a.x,h=void 0===p?0:p,f=a.y,v=void 0===f?0:f,m="function"==typeof u?u({x:h,y:v}):{x:h,y:v};h=m.x,v=m.y;var b=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),g=nr,w=Ji,x=window;if(c){var k=jr(n),A="clientHeight",_="clientWidth";if(k===vr(n)&&"static"!==Or(k=Ir(n)).position&&"absolute"===s&&(A="scrollHeight",_="scrollWidth"),r===Ji||(r===nr||r===tr)&&o===ar)w=er,v-=(d&&k===x&&x.visualViewport?x.visualViewport.height:k[A])-i.height,v*=l?1:-1;if(r===nr||(r===Ji||r===er)&&o===ar)g=tr,h-=(d&&k===x&&x.visualViewport?x.visualViewport.width:k[_])-i.width,h*=l?1:-1}var E,C=Object.assign({position:s},c&&Fr),S=!0===u?function(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Ar(n*r)/r||0,y:Ar(i*r)/r||0}}({x:h,y:v},vr(n)):{x:h,y:v};return h=S.x,v=S.y,l?Object.assign({},C,((E={})[w]=y?"0":"",E[g]=b?"0":"",E.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",E)):Object.assign({},C,((t={})[w]=y?v+"px":"",t[g]=b?h+"px":"",t.transform="",t))}var Hr={passive:!0};var Wr={left:"right",right:"left",bottom:"top",top:"bottom"};function $r(e){return e.replace(/left|right|bottom|top/g,(function(e){return Wr[e]}))}var qr={start:"end",end:"start"};function Gr(e){return e.replace(/start|end/g,(function(e){return qr[e]}))}function Xr(e){var t=vr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Zr(e){return Cr(Ir(e)).left+Xr(e).scrollLeft}function Yr(e){var t=Or(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Qr(e){return["html","body","#document"].indexOf(fr(e))>=0?e.ownerDocument.body:br(e)&&Yr(e)?e:Qr(Mr(e))}function Kr(e,t){var n;void 0===t&&(t=[]);var i=Qr(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=vr(i),a=r?[o].concat(o.visualViewport||[],Yr(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(Kr(Mr(a)))}function Jr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function eo(e,t,n){return t===lr?Jr(function(e,t){var n=vr(e),i=Ir(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var c=Er();(c||!c&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+Zr(e),y:l}}(e,n)):mr(t)?function(e,t){var n=Cr(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Jr(function(e){var t,n=Ir(e),i=Xr(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=xr(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=xr(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Zr(e),l=-i.scrollTop;return"rtl"===Or(r||n).direction&&(s+=xr(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Ir(e)))}function to(e,t,n,i){var r="clippingParents"===t?function(e){var t=Kr(Mr(e)),n=["absolute","fixed"].indexOf(Or(e).position)>=0&&br(e)?jr(e):e;return mr(n)?t.filter((function(e){return mr(e)&&Tr(e,n)&&"body"!==fr(e)})):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o[0],s=o.reduce((function(t,n){var r=eo(e,n,i);return t.top=xr(r.top,t.top),t.right=kr(r.right,t.right),t.bottom=kr(r.bottom,t.bottom),t.left=xr(r.left,t.left),t}),eo(e,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function no(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?wr(r):null,a=r?Ur(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case Ji:t={x:s,y:n.y-i.height};break;case er:t={x:s,y:n.y+n.height};break;case tr:t={x:n.x+n.width,y:l};break;case nr:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?Rr(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case or:t[c]=t[c]-(n[u]/2-i[u]/2);break;case ar:t[c]=t[c]+(n[u]/2-i[u]/2)}}return t}function io(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?sr:s,c=n.rootBoundary,u=void 0===c?lr:c,d=n.elementContext,p=void 0===d?cr:d,h=n.altBoundary,f=void 0!==h&&h,v=n.padding,m=void 0===v?0:v,b=Nr("number"!=typeof m?m:Br(m,rr)),y=p===cr?ur:cr,g=e.rects.popper,w=e.elements[f?y:p],x=to(mr(w)?w:w.contextElement||Ir(e.elements.popper),l,u,a),k=Cr(e.elements.reference),A=no({reference:k,element:g,strategy:"absolute",placement:r}),_=Jr(Object.assign({},g,A)),E=p===cr?_:k,C={top:x.top-E.top+b.top,bottom:E.bottom-x.bottom+b.bottom,left:x.left-E.left+b.left,right:E.right-x.right+b.right},S=e.modifiersData.offset;if(p===cr&&S){var T=S[r];Object.keys(C).forEach((function(e){var t=[tr,er].indexOf(e)>=0?1:-1,n=[Ji,er].indexOf(e)>=0?"y":"x";C[e]+=T[n]*t}))}return C}function ro(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?pr:l,u=Ur(i),d=u?s?dr:dr.filter((function(e){return Ur(e)===u})):rr,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,n){return t[n]=io(e,{placement:n,boundary:r,rootBoundary:o,padding:a})[wr(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}var oo={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,v=n.allowedAutoPlacements,m=t.options.placement,b=wr(m),y=l||(b===m||!f?[$r(m)]:function(e){if(wr(e)===ir)return[];var t=$r(e);return[Gr(e),t,Gr(t)]}(m)),g=[m].concat(y).reduce((function(e,n){return e.concat(wr(n)===ir?ro(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:v}):n)}),[]),w=t.rects.reference,x=t.rects.popper,k=new Map,A=!0,_=g[0],E=0;E<g.length;E++){var C=g[E],S=wr(C),T=Ur(C)===or,O=[Ji,er].indexOf(S)>=0,P=O?"width":"height",I=io(t,{placement:C,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),M=O?T?tr:nr:T?er:Ji;w[P]>x[P]&&(M=$r(M));var L=$r(M),j=[];if(o&&j.push(I[S]<=0),s&&j.push(I[M]<=0,I[L]<=0),j.every((function(e){return e}))){_=C,A=!1;break}k.set(C,j)}if(A)for(var R=function(e){var t=g.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},D=f?3:1;D>0;D--){if("break"===R(D))break}t.placement!==_&&(t.modifiersData[i]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ao(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function so(e){return[Ji,tr,er,nr].some((function(t){return e[t]>=0}))}var lo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,a=pr.reduce((function(e,n){return e[n]=function(e,t,n){var i=wr(e),r=[nr,Ji].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[nr,tr].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=a}};var co={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,v=void 0===f?0:f,m=io(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=wr(t.placement),y=Ur(t.placement),g=!y,w=Rr(b),x="x"===w?"y":"x",k=t.modifiersData.popperOffsets,A=t.rects.reference,_=t.rects.popper,E="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,C="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(k){if(o){var O,P="y"===w?Ji:nr,I="y"===w?er:tr,M="y"===w?"height":"width",L=k[w],j=L+m[P],R=L-m[I],D=h?-_[M]/2:0,N=y===or?A[M]:_[M],B=y===or?-_[M]:-A[M],z=t.elements.arrow,U=h&&z?Sr(z):{width:0,height:0},F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=F[P],H=F[I],W=Dr(0,A[M],U[M]),$=g?A[M]/2-D-W-V-C.mainAxis:N-W-V-C.mainAxis,q=g?-A[M]/2+D+W+H+C.mainAxis:B+W+H+C.mainAxis,G=t.elements.arrow&&jr(t.elements.arrow),X=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Z=null!=(O=null==S?void 0:S[w])?O:0,Y=L+q-Z,Q=Dr(h?kr(j,L+$-Z-X):j,L,h?xr(R,Y):R);k[w]=Q,T[w]=Q-L}if(s){var K,J="x"===w?Ji:nr,ee="x"===w?er:tr,te=k[x],ne="y"===x?"height":"width",ie=te+m[J],re=te-m[ee],oe=-1!==[Ji,nr].indexOf(b),ae=null!=(K=null==S?void 0:S[x])?K:0,se=oe?ie:te-A[ne]-_[ne]-ae+C.altAxis,le=oe?te+A[ne]+_[ne]-ae-C.altAxis:re,ce=h&&oe?function(e,t,n){var i=Dr(e,t,n);return i>n?n:i}(se,te,le):Dr(h?se:ie,te,h?le:re);k[x]=ce,T[x]=ce-te}t.modifiersData[i]=T}},requiresIfExists:["offset"]};function uo(e,t,n){void 0===n&&(n=!1);var i,r,o=br(t),a=br(t)&&function(e){var t=e.getBoundingClientRect(),n=Ar(t.width)/e.offsetWidth||1,i=Ar(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),s=Ir(t),l=Cr(e,a,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&(("body"!==fr(t)||Yr(s))&&(c=(i=t)!==vr(i)&&br(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Xr(i)),br(t)?((u=Cr(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=Zr(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function po(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}function ho(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var fo={placement:"bottom",modifiers:[],strategy:"absolute"};function vo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function mo(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?fo:r;return function(e,t,n){void 0===n&&(n=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},fo,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:r,setOptions:function(n){var s="function"==typeof n?n(r.options):n;c(),r.options=Object.assign({},o,r.options,s),r.scrollParents={reference:mr(e)?Kr(e):e.contextElement?Kr(e.contextElement):[],popper:Kr(t)};var u,d,p=function(e){var t=po(e);return hr.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((u=[].concat(i,r.options.modifiers),d=u.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return r.orderedModifiers=p.filter((function(e){return e.enabled})),r.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var s=o({state:r,name:t,instance:l,options:i}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=r.elements,t=e.reference,n=e.popper;if(vo(t,n)){r.rects={reference:uo(t,jr(n),"fixed"===r.options.strategy),popper:Sr(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(e){return r.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],a=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"==typeof a&&(r=a({state:r,options:u,name:d,instance:l})||r)}else r.reset=!1,i=-1}}},update:ho((function(){return new Promise((function(e){l.forceUpdate(),e(r)}))})),destroy:function(){c(),s=!0}};if(!vo(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var bo=mo({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,l=vr(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,Hr)})),s&&l.addEventListener("resize",n.update,Hr),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Hr)})),s&&l.removeEventListener("resize",n.update,Hr)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=no({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:wr(t.placement),variation:Ur(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Vr(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vr(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},gr,lo,oo,co,zr,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=io(t,{elementContext:"reference"}),s=io(t,{altBoundary:!0}),l=ao(a,i),c=ao(s,r,o),u=so(l),d=so(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),yo=function(e){function t(e){var n;return o(this,t),(n=r(this,t)).timer=null,k(e)<"u"&&n.reset(e),n}return p(t,e),s(t,[{key:"reset",value:function(e){var n=this;u(d(t.prototype),"reset",this).call(this),k(e)<"u"&&(this.timer=window.setTimeout((function(){n.resolve(!0),n.timer=null}),e))}},{key:"clear",value:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null,this.reject(new Error("User canceled")))}}])}(Ni),go=function(e){function t(){var e;o(this,t),(e=r(this,t)).reference=null,e.transition="",e.disposables=Fi(),e.deferred=null,e.state="hidden",e.showDelay=0,e.hideDelay=0,e.zIndex=0;var n=e.attachShadow({mode:"open"}),i=document.createElement("template");i.innerHTML='\n      <style>\n        :host {\n        }\n      </style>\n      <div id="content">\n        <slot></slot>\n      </div>\n    ';var a=document.importNode(i.content,!0);return n.appendChild(a),e}return p(t,e),s(t,[{key:"setup",value:function(e,t){var n,i=this;if(this.reference)console.warn("This popover has been setuped");else if("string"==typeof e&&(this.parentElement&&(n=this.parentElement.querySelector(e)),n||(n=document.querySelector(e))),n){if(this.reference=n,this.popperInstance=bo(n,this,{placement:(null==t?void 0:t.placement)||"bottom",modifiers:[{name:"offset",options:{offset:(null==t?void 0:t.offset)||[0,4]}}]}),null!=t&&t.zIndex&&(this.zIndex=t.zIndex),null!=t&&t.to){var r=null;(r="string"==typeof t.to?document.querySelector(t.to):t.to)?r.appendChild(this):console.warn("Popover config.to is not found:",t.to)}null!=t&&t.transition&&("string"==typeof(null==t?void 0:t.transition)?this.transition=null==t?void 0:t.transition:this.transition="bili-popover-transition");var o=(null==t?void 0:t.trigger)||"hover";null!=t&&t.delay?"number"==typeof t.delay?(this.showDelay=t.delay,this.hideDelay=t.delay):Array.isArray(t.delay)&&(this.showDelay=t.delay[0],this.hideDelay=t.delay[1]):"hover"===o&&(this.showDelay=100,this.hideDelay=200),"hover"===o?(this.disposables.addEventListener(n,"mouseenter",this.show.bind(this)),this.disposables.addEventListener(n,"mouseleave",this.hide.bind(this))):"click"===o&&this.disposables.addEventListener(n,"click",(function(){"block"!==i.style.display?i.show():i.hide()})),this.disposables.mutationObserve(n,(function(e){var t,r=l(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("childList"===o.type&&Array.from(o.removedNodes).includes(n)){i.parentElement&&i.parentElement.removeChild(i);break}}}catch(e){r.e(e)}finally{r.f()}}),{childList:!0})}else console.warn("reference is not found:",e)}},{key:"getTransitionTimingClass",value:function(e){return"".concat(this.transition,"-").concat(e)}},{key:"delay",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"doTransition",value:function(e){var t=this;this.dispatchEvent(new CustomEvent(e?"before-enter":"before-leave"));var n=new yo;return Xi(this,e?{base:[],enter:[],enterFrom:[this.getTransitionTimingClass("enter-from")],enterTo:[this.getTransitionTimingClass("enter-active")],leave:[],leaveFrom:[],leaveTo:[],entered:[]}:{base:[],enter:[],enterFrom:[],enterTo:[],leave:[],leaveFrom:[this.getTransitionTimingClass("leave-from")],leaveTo:[this.getTransitionTimingClass("leave-active")],entered:[]},e,(function(){t.dispatchEvent(new CustomEvent(e?"after-enter":"after-leave")),n.resolve(!0)})),this.deferred=n,n.promise}},{key:"showDeferred",value:(u=i(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.deferred)){e.next=12;break}if("showing"!==this.state&&"visible"!==this.state){e.next=4;break}return e.abrupt("return",(t.clear(),this.deferred=null,Promise.reject("popover is showing or visible")));case 4:if("hiding"!==this.state){e.next=11;break}return e.next=7,t.promise;case 7:return e.next=9,this.delay(0);case 9:e.next=12;break;case 11:t.clear();case 12:return t=this.deferred=new yo(this.showDelay),e.next=15,t.promise;case 15:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"hideDeferred",value:(c=i(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.deferred)){e.next=10;break}if("hiding"!==this.state&&"hidden"!==this.state){e.next=4;break}return e.abrupt("return",(t.clear(),this.deferred=null,Promise.reject("popover is hiding or hidden")));case 4:if("showing"!==this.state){e.next=9;break}return e.next=7,t.promise;case 7:e.next=10;break;case 9:t.clear();case 10:return t=this.deferred=new yo(this.hideDelay),e.next=13,t.promise;case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"toggle",value:function(e){if(this.popperInstance){var t="show"===e;Array.from(this.children).forEach((function(e){if(e instanceof HTMLElement){if(!t)return void e.style.removeProperty("display");e.style.setProperty("display","block","important")}})),t?(this.popperInstance.update(),this.style.setProperty("display","block","important"),this.style.setProperty("z-index",String(this.zIndex||$i()),"important")):this.style.removeProperty("display")}}},{key:"show",value:(a=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.popperInstance){e.next=17;break}return e.prev=1,e.next=4,this.showDeferred();case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return");case 9:if(this.state="showing",this.toggle("show"),e.t1=this.transition,!e.t1){e.next=15;break}return e.next=15,this.doTransition(!0);case 15:this.state="visible",this.deferred=null;case 17:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return a.apply(this,arguments)})},{key:"hide",value:(n=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.popperInstance){e.next=17;break}return e.prev=1,e.next=4,this.hideDeferred();case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return");case 9:if(this.state="hiding",!this.transition){e.next=14;break}return e.next=12,this.doTransition(!1);case 12:e.next=16;break;case 14:if("block"===this.style.display){e.next=16;break}return e.abrupt("return");case 16:this.toggle("hide"),this.deferred=null;case 17:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return n.apply(this,arguments)})},{key:"connectedCallback",value:function(){var e=this.getAttribute("reference");if(e){var t=this.getAttribute("placement"),n=this.getAttribute("trigger"),i=this.getAttribute("z-index"),r=this.getAttribute("transition"),o=this.getAttribute("delay"),a=this.getAttribute("to"),s={};if(t&&(s.placement=t),n&&["hover","click"].includes(n)?s.trigger=n:s.trigger="hover",i&&(s.zIndex=Number(i)),r&&(["1","true"].includes(r)?s.transition=!0:s.transition=r),a&&(s.to=a),o){var l=o.split(",");2===l.length?s.delay=[Number(l[0]),Number(l[1])]:s.delay=Number(l[0])}this.setup(e,s)}}},{key:"disconnectedCallback",value:function(){this.disposables.dispose(),this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=void 0),this.reference=null}}]);var n,a,c,u}(_(HTMLElement));customElements.get("bili-popover")||customElements.define("bili-popover",go);var wo=function(e){function t(){var e;return o(this,t),(e=r(this,t)).disposables=Fi(),e.state={label:"",value:"",name:"",disabled:!1,checked:!1},e.attachShadow({mode:"open"}),e.shadowRoot&&(e.shadowRoot.innerHTML='\n        <style>\n          :host {\n            --bili-radio-size: 16px;\n            --bili-radio-font-size: 14px;\n            --bili-radio-border-width: 1px;\n            --bili-radio-checked-color: var(--brand_blue);\n            --bili-radio-margin-inline-end: 8px;\n\n            display: inline-flex;\n            align-items: baseline;\n            padding: 0;\n            margin: 0;\n            cursor: pointer;\n            margin-inline-end: var(--bili-radio-margin-inline-end);\n          }\n          #input {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n            list-style: none;\n            position: relative;\n            display: inline-block;\n            outline: none;\n            cursor: pointer;\n            align-self: center;\n            border-radius: 50%;\n            width: var(--bili-radio-size);\n            height: var(--bili-radio-size);\n          }\n          #input input {\n            bottom: 0;\n            left: 0;\n            margin: 0;\n            opacity: 0;\n            outline: none;\n            position: absolute;\n            right: 0;\n            top: 0;\n            z-index: -1;\n          }\n          #input #inner {\n            display: block;\n            background-color: var(--bg1_float);\n            border: 1px solid var(--text4);\n            border-radius: 50%;\n            box-sizing: border-box;\n            width: 100%;\n            height: 100%;\n          }\n          #input[checked] #inner {\n            border-color: var(--bili-radio-checked-color);\n          }\n          #input[checked] #inner::after {\n            transform: translate(-50%,-50%) scale(1);\n          }\n          #input #inner::after {\n            width: 50%;\n            height: 50%;\n            background-color: var(--bili-radio-checked-color);\n            border-radius: 50%;\n            content: "";\n            left: 50%;\n            position: absolute;\n            top: 50%;\n            transform: translate(-50%,-50%) scale(0);\n            transition: transform .15s ease-in;\n          }\n          #label {\n            margin-left: 8px;\n            font-size: var(--bili-radio-font-size);\n            color: var(--text2);\n          }\n        </style>\n        <span id="input">\n          <input type="radio">\n          <span id="inner"></span>\n        </span>\n        <slot>\n          <span id="label"></span>\n        </slot>\n      '),e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){var e=this;if(this.shadowRoot){var n=this.getAttribute("label");if(t.observedAttributes.forEach((function(t){var i=e.getAttribute(t);null!==i&&("value"===t&&!n&&e.updateAttribute("label",i),e.updateAttribute(t,i))})),this.shadowRoot&&this.disposables.addEventListener(this,"click",(function(){if(!e.state.disabled&&!e.state.checked)if(e.updateInput("checked",!0),e.state.name){var t={name:e.state.name,value:e.state.value},n=new CustomEvent("bili-radio-change",{detail:t});document.dispatchEvent(n)}else{var i=new CustomEvent("change",{detail:{value:e.state.value}});e.dispatchEvent(i)}})),this.state.name){var i=function(t){var n=t.detail;n&&n.name===e.state.name&&n.value!==e.state.value&&e.updateInput("checked",!1)};document.addEventListener("bili-radio-change",i),this.disposables.add((function(){document.removeEventListener("bili-radio-change",i)}))}}}},{key:"disconnectedCallback",value:function(){this.disposables.dispose()}},{key:"updateInput",value:function(e,t){var n,i,r=null==(n=this.shadowRoot)?void 0:n.querySelector("#input"),o=null==(i=this.shadowRoot)?void 0:i.querySelector("input");if(r&&o)switch(e){case"value":o.setAttribute(e,t);break;case"disabled":case"checked":t?(r.setAttribute(e,""),o.setAttribute(e,"")):(r.removeAttribute(e),o.removeAttribute(e))}}},{key:"updateLabel",value:function(e){var t,n=null==(t=this.shadowRoot)?void 0:t.querySelector("#label");n&&(n.textContent=e)}},{key:"updateAttribute",value:function(e,t){switch(e){case"name":this.state.name=t;break;case"label":this.updateLabel(t),this.state.label=t;break;case"value":this.updateInput(e,t),this.state[e]=t;break;case"disabled":case"checked":this.updateInput(e,"true"===t),this.state[e]="true"===t}}},{key:"attributeChangedCallback",value:function(e,t,n){this.updateAttribute(e,n)}}],[{key:"observedAttributes",get:function(){return["name","value","label","disabled","checked"]}}])}(_(HTMLElement));wo.elName="bili-radio";var xo=wo;customElements.get(xo.elName)||customElements.define(xo.elName,xo);var ko=function(){function e(){o(this,e),this.disposables=[]}return s(e,[{key:"addEventListener",value:function(e,t,n,i){return this.add(function(e,t,n,i){return e.addEventListener(t,n,i),function(){!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,t,n,i)}}(e,t,n,i))}},{key:"mutationObserve",value:function(e,t,n){var i=!1,r=new MutationObserver(t);return r.observe(e,n),function(){return function(e){i||(i=!0,e.disconnect())}(r)}}},{key:"requestAnimationFrame",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=requestAnimationFrame.apply(void 0,arguments);return this.add((function(){return cancelAnimationFrame(e)}))}))},{key:"nextFrame",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.requestAnimationFrame((function(){return e.requestAnimationFrame.apply(e,n)}))}},{key:"setTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=setTimeout.apply(void 0,arguments);return this.add((function(){return clearTimeout(e)}))}))},{key:"microTask",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i={current:!0};return function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}((function(){i.current&&t[0]()})),this.add((function(){i.current=!1}))}},{key:"style",value:function(e,t,n){var i=e.style.getPropertyValue(t);return Object.assign(e.style,c({},t,n)),this.add((function(){Object.assign(e.style,c({},t,i))}))}},{key:"group",value:function(t){var n=new e;return t(n),this.add((function(){return n.dispose()}))}},{key:"add",value:function(e){var t=this;return this.disposables.push(e),function(){var n=t.disposables.indexOf(e);n>=0&&t.remove(n,1)}}},{key:"remove",value:function(e,t){var n,i=l(this.disposables.splice(e,null!=t?t:this.disposables.length));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispose",value:function(){this.remove(0)}}])}();("undefined"==typeof window?"undefined":k(window))<"u"&&(window.__BILI_POPPER_ZINDEX__||(window.__BILI_POPPER_ZINDEX__=1e3));var Ao,_o,Eo,Co,So,To,Oo,Po,Io,Mo,Lo,jo,Ro,Do=function(e){function t(){var e;return o(this,t),(e=r(this,t)).disposables=new ko,e.attachShadow({mode:"open"}),e.shadowRoot&&(e.shadowRoot.innerHTML='\n        <style>\n          :host {\n            --bili-rich-text-display: block;\n            --bili-rich-text-white-space: pre-line;\n            --bili-rich-text-icon-vertical-align: sub;\n            --bili-rich-text-link-color: var(--text_link, #008AC5);\n            --bili-rich-text-link-color-hover: var(--brand_blue, #00AEEC);\n            --icon-vertical-align: var(--bili-rich-text-icon-vertical-align);\n            color: var(--bili-rich-text-color, var(--text1, #18191C));\n            font-size: var(--bili-rich-text-font-size, 15px);\n            line-height: var(--bili-rich-text-line-height, 21px);\n            font-family: var(--bili-font-family);\n          }\n          #contents {\n            margin-block-start: 0;\n            margin-block-end: 0;\n            margin-inline-start: 0;\n            margin-inline-end: 0;\n            display: var(--bili-rich-text-display);\n            white-space: var(--bili-rich-text-white-space);\n            -webkit-font-smoothing: antialiased;\n          }\n          #contents a {\n            color: var(--bili-rich-text-link-color);\n            text-decoration: none;\n            background-color: transparent;\n            cursor: pointer;\n          }\n\n          #contents a:hover {\n            color: var(--bili-rich-text-link-color-hover);\n          }\n          \n          #contents a bili-icon {\n            vertical-align: var(--bili-rich-text-icon-vertical-align);\n          }\n          #contents img, #contents a i {\n            display: inline-block;\n            width: 1.2em;\n            height: 1.2em;\n            vertical-align: var(--bili-rich-text-icon-vertical-align);\n          }\n        </style>\n        <p id="contents"></p>\n      '),e}return p(t,e),s(t,[{key:"contentsElement",get:function(){return this.shadowRoot.querySelector("#contents")}},{key:"connectedCallback",value:function(){var e=this;this.disposables.addEventListener(this.contentsElement,"click",(function(t){var n=v({},t.target.dataset);0!==Object.keys(n).length&&e.dispatchEvent(new CustomEvent("text-click",{detail:n}))}))}},{key:"disconnectedCallback",value:function(){this.disposables.dispose()}},{key:"contents",get:function(){return this.shadowRoot.querySelector("#contents")}},{key:"styleMap",value:function(e){return e?Object.keys(e).reduce((function(t,n){return e[n]?t+"".concat(n,":").concat(e[n],";"):t}),""):""}},{key:"renderToString",value:function(e,t,n){var i="";return t&&(i=Object.keys(t||{}).reduce((function(e,n){return t[n]?e+" ".concat(n,'="').concat(t[n],'"'):e}),"")),"<".concat(e).concat(i).concat("img"===e?"/>":">".concat(n||"","</").concat(e,">"))}},{key:"setContents",value:function(e){var t=this,n=e.map((function(e){var n=v({style:t.styleMap(e.style)},e[e.tag]||{}),i=e.dataset;if(i){Object.assign(n,Object.keys(i).reduce((function(e,t){var n=i[t];return n&&(e["data-".concat(t)]=n),e}),{}))}var r="";return e.html?t.renderToString(e.tag,n,e.html):(n.text&&(n.icon&&(/^(https?:)?\/\//.test(n.icon)?r+=t.renderToString("img",{src:n.icon,loading:"lazy",style:"width:var(--icon-width);height:var(--icon-height);vertical-align:var(--icon-vertical-align);"}):r+=t.renderToString("i",{class:"holder "+n.icon}),delete n.icon),r+=n.text,delete n.text),t.renderToString(e.tag,n,r))})).join("");this.contents.innerHTML=n,setTimeout((function(){var e=Array.from(t.contents.getElementsByTagName("i"));if(e.length){var n=e[0].getBoundingClientRect().width.toString();e.forEach((function(e){var t=document.createElement("bili-icon");t.setAttribute("size",n),t.setAttribute("icon",e.classList[1]),e.parentElement.replaceChild(t,e)}))}}),0)}}])}(_(HTMLElement));Do.elName="bili-rich-text",customElements.get(Do.elName)||customElements.define(Do.elName,Do);var No=function(e){("undefined"==typeof window?"undefined":k(window))>"u"||window.__BILI_X_ENGINE_SCRIPT_CACHE__&&k(window.__BILI_X_ENGINE_SCRIPT_CACHE__[e])<"u"&&delete window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]},Bo=function(e,t){if(("undefined"==typeof window?"undefined":k(window))>"u")return Promise.reject(new Error("window is not defined"));var n=e=e.replace(/^https?:\/\//,"//"),i=function(e){return("undefined"==typeof window?"undefined":k(window))>"u"||!window.__BILI_X_ENGINE_SCRIPT_CACHE__?null:window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]||null}(n);if(null!=i&&i.promise)return i.promise;var r=new Promise((function(n,i){var r=document.createElement("script");r.src=e,null!=t&&t.behavior&&r.setAttribute(t.behavior,""),r.onload=function(){var r=window;if(t.lib)return r[t.lib]?n(r[t.lib]):i(new Error('Failed to access library "'+t.lib+'" from '+e));n(null)},r.onerror=function(){i(new Error("Failed to load "+e)),document.head.removeChild(r)},document.head.appendChild(r)}));return function(e,t){("undefined"==typeof window?"undefined":k(window))>"u"||(window.__BILI_X_ENGINE_SCRIPT_CACHE__||(window.__BILI_X_ENGINE_SCRIPT_CACHE__={}),window.__BILI_X_ENGINE_SCRIPT_CACHE__[e]=t)}(n,{promise:r,lib:null==t?void 0:t.lib}),r.then((function(){!1===(null==t?void 0:t.cache)&&No(n)})).catch((function(){!1===(null==t?void 0:t.cache)&&No(n)})),r},zo=function(e){try{return window.Unios?Promise.resolve(window.Unios.request(e)):Promise.resolve(function(e){if(window.Unios)return Promise.resolve(window.Unios);var t=window.__LOAD_REQUEST_TYPE__||e||"web";return Bo("//s1.hdslb.com/bfs/seed/jinkela/short/unios/"+t+".min.js",{lib:"Unios"})}()).then((function(){return window.Unios.request(e)}))}catch(e){return Promise.reject(e)}},Uo=function(e,t,n){try{return window.BToast?Promise.resolve(window.BToast.show(e,t,n)):Promise.resolve(function(){try{return window.BToast?Promise.resolve(window.BToast):Promise.resolve(Bo("//s1.hdslb.com/bfs/seed/jinkela/short/webui/toast/index.js",{lib:"BToast"}))}catch(e){return Promise.reject(e)}}()).then((function(){return window.BToast.show(e,t,n)}))}catch(e){return Promise.reject(e)}};function Fo(e){return new Promise((function(t,n){zo({url:"//api.bilibili.com/x/web-interface/card",params:{mid:e,photo:"true"}}).then((function(e){if(0!==e.code||!e.data)return n(new Error(e.message||"get card data error"));t(e.data)})).catch(n)}))}var Vo="";function Ho(){var e;return Vo||(Vo=(null==(e=document.querySelector("meta[name=spm_prefix]"))?void 0:e.getAttribute("content"))||"")}function Wo(e,t){return new Promise((function(n,i){zo({url:"//api.bilibili.com/x/relation/modify",method:"POST",data:{act:t?1:2,fid:e,spmid:Ho(),re_src:0},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){if(0!==e.code)return i(new Error(e.message||"modify relation error"));n(e)})).catch(i)}))}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qo="to top right";function Go(e,t){return"linear-gradient(".concat(e,",").concat(t,")")}function Xo(e,t){var n=(t=t||{}).theme||"",i=t.stringType||!1,r="",o="";if(function(e){return!(!e||"object"!=k(e)||k(e.render_scheme)>"u"||!e.colors_info||!e.colors_info.color||!Array.isArray(e.colors_info.color))}(e)){var a=e.render_scheme,s=e.colors_info.color;if(1!==a&&"Colorful"!==a||!s||0===s.length)return null;var l=function(e){var t=e.length,n=[],i=[],r=function(e,n){return"".concat(function(e){return"#"===e[0]?e:"#".concat(e)}(e)," ").concat(n/(t-1)*100,"%")};return e.forEach((function(e,t){n.push(r(e.color_day,t)),i.push(r(e.color_night,t))})),{light:Go(qo,n.join(",")),dark:Go(qo,i.join(","))}}(s);r=l.light,o=l.dark}if(r&&o){var c,u={base:{"background-clip":"text","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"},theme:{light:{"background-image":r},dark:{"background-image":o}}};if(["light","dark"].includes(n)){var d=Object.assign({},u.base,u.theme[n]);return i?function(e){var t=Object.keys(e);if(0===t.length)return"";var n="";return t.forEach((function(t){void 0!==e[t]&&(n+="".concat(t,":").concat(e[t],";"))})),n}(d):d}if(t.variable&&"string"==typeof t.variable&&/^--[a-z]/.test(t.variable))u.variable=($o(c={},"".concat(t.variable,"-light"),r),$o(c,"".concat(t.variable,"-dark"),o),c);return u}return null}var Zo=Object.defineProperty,Yo=Object.getOwnPropertyDescriptor,Qo=function(e,t,n,i){for(var r,o=i>1?void 0:i?Yo(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Zo(t,n,o),o},Ko=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t=Math.max(0,t),"number"!=typeof e&&(e=Number(e)),isNaN(e)?0:e>1e8?(e/1e8).toFixed(t)+"亿":e>1e4?(e/1e4).toFixed(t)+"万":e},Jo=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).uid="",e.data=null,e.showSpinner=!1,e.isFollowing=!1,e.disposables=Fi(),e.cacheData={},e.showTimer=null,e.hideTimer=null,e.lastShowEl=null,e}return p(t,e),s(t,[{key:"backgroundImage",get:function(){var e;return Kn.getBmgSrcNext((null==(e=this.data)?void 0:e.space.l_img)||"",{w:366,h:85,c:!0,dpr:2})}},{key:"faceSrc",get:function(){var e;return Kn.getBmgSrcNext((null==(e=this.data)?void 0:e.card.face)||"//i0.hdslb.com/bfs/face/member/noface.jpg",{w:48,h:48,dpr:2})}},{key:"ovType",get:function(){var e,t,n,i;return null!==(e=null==(i=null==(n=null==(t=this.data)?void 0:t.card)?void 0:n.Official)?void 0:i.type)&&void 0!==e?e:-1}},{key:"ovText",get:function(){var e;return this.ovType>-1?"bilibili".concat(1===this.ovType?"机构":"个人","认证：").concat(null==(e=this.data)?void 0:e.card.Official.title):""}},{key:"name",get:function(){var e;return this.data?null==(e=this.data)?void 0:e.card.name:""}},{key:"nameRenderStyle",get:function(){var e,t,n;if(null==(t=null==(e=this.data)?void 0:e.card)||!t.name_render)return"";var i=Xo(null==(n=this.data)?void 0:n.card.name_render,{variable:"--name-render-bg"});return null!=i&&i.variable?i.variable:null}},{key:"nameStyle",get:function(){var e;if(null==(e=this.data)||!e.card)return null;if(this.nameRenderStyle)return this.nameRenderStyle;var t="",n=this.data.card.vip;return 1===n.status&&n.nickname_color&&(t=n.nickname_color),t?{color:t}:null}},{key:"gender",get:function(){var e="";return this.data&&["男","女"].includes(this.data.card.sex)&&(e="男"===this.data.card.sex?"male":"female"),e}},{key:"genderImg",get:function(){return Kn.getBmgSrcNext("//i0.hdslb.com/bfs/seed/jinkela/short/webui/user-profile/img/gender_".concat(this.gender,".png"),{dpr:2})}},{key:"level",get:function(){var e={img:"",url:"//www.bilibili.com/html/help.html#k_5"};if(!this.data)return e;var t=this.data.card,n=t.is_senior_member,i=t.level_info.current_level;return e.img=Jo.getLevelImgSrc(i,!!n),e}},{key:"vipLabel",get:function(){var e,t,n=((null==(e=this.data)?void 0:e.card)||{}).vip;return n&&null!=(t=n.label)&&t.text?{img:n.label.img_label_uri_hans_static||"",text:n.label.text,style:{backgroundColor:n.label.bg_color,color:n.label.text_color}}:null}},{key:"stats",get:function(){var e,t,n,i,r;return[{key:"follow",count:String(Ko((null==(t=null==(e=this.data)?void 0:e.card)?void 0:t.attention)||0)),url:this.getSpaceLink("follow"),label:"关注"},{key:"fans",count:String(Ko((null==(i=null==(n=this.data)?void 0:n.card)?void 0:i.fans)||0)),url:this.getSpaceLink("fans"),label:"粉丝"},{key:"like",count:String(Ko((null==(r=this.data)?void 0:r.like_num)||0)),label:"获赞"}]}},{key:"signText",get:function(){var e;return null==(e=this.data)?void 0:e.card.sign}},{key:"appendToParent",value:function(e){var t=document.body;if(e){var n=document.querySelector(e);n&&(t=n)}t.appendChild(this)}},{key:"setup",value:function(e){var t=this.disposables.addEventListener(e,"mouseenter",this.refMouseEnter.bind(this)),n=this.disposables.addEventListener(e,"mouseleave",this.refMouseLeave.bind(this));return function(){t(),n()}}},{key:"setPosition",value:function(e){var t=window.innerWidth,n=e.getBoundingClientRect(),i=n.width,r=n.bottom,o=n.left,a=n.top,s=o+i/2;t-s<366&&(s-=366),this.style.left="".concat(s,"px"),a>290?(this.style.top="",this.style.bottom="".concat(window.innerHeight-a,"px")):(this.style.bottom="",this.style.top="".concat(r,"px")),this.style.zIndex="".concat($i())}},{key:"clearTimer",value:function(e){"show"!==e?this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null):this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=null)}},{key:"refMouseEnter",value:function(e){var t=this,n=e.target;if(this.clearTimer("hide"),this.showTimer){if(this.lastShowEl===n)return;this.clearTimer("show")}this.lastShowEl=n,this.showTimer=window.setTimeout((function(){t.showTimer=null,t.show(n)}),300)}},{key:"hide",value:function(){var e=this;this.hideTimer=window.setTimeout((function(){e.visible(!1),e.lastShowEl=null,e.hideTimer=null}),300)}},{key:"refMouseLeave",value:function(e){e.target===this.lastShowEl&&(this.clearTimer("show"),this.hide())}},{key:"visible",value:function(e){this.style.display=e?"block":""}},{key:"show",value:(a=i(m().mark((function e(t){var n,i,r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parentElement||this.appendToParent(t.getAttribute("data-user-profile-parent")||""),i=t.getAttribute("data-user-profile-id")){e.next=5;break}return this.uid="",e.abrupt("return");case 5:if(this.uid=i,this.setPosition(t),this.visible(!0),e.prev=6,!(r=this.cacheData[i])){e.next=12;break}this.data=r,e.next=17;break;case 12:return this.showSpinner=!0,e.next=15,Fo(i);case 15:o=e.sent,this.cacheData[i]=o,this.data=o;case 17:this.isFollowing=(null==(n=this.data)?void 0:n.following)||!1,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.warn(e.t0.message);case 23:this.showSpinner=!1;case 24:case"end":return e.stop()}}),e,this,[[6,20]])}))),function(e){return a.apply(this,arguments)})},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),this.disposables.addEventListener(this,"mouseenter",(function(){e.clearTimer("hide")})),this.disposables.addEventListener(this,"mouseleave",(function(){e.hide()}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose(),this.cacheData={},this.lastShowEl=null}},{key:"handleJumpMsg",value:function(){window.open("https://message.bilibili.com/#/whisper/mid".concat(this.uid))}},{key:"getSpaceLink",value:function(e){if(!this.data)return"";var t="//space.bilibili.com/".concat(this.uid);switch(e){case"follow":return"".concat(t,"/fans/follow");case"fans":return"".concat(t,"/fans/fans");default:return t}}},{key:"handleFollow",value:(n=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wo(this.uid,!this.isFollowing);case 3:this.isFollowing=!this.isFollowing,this.data&&(this.data.following=this.isFollowing),document.body.dispatchEvent(new CustomEvent("bili-user-profile-follow",{detail:{uid:this.uid,isFollowing:this.isFollowing}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Uo(e.t0.message||"操作失败，请稍后再试");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return n.apply(this,arguments)})},{key:"ovIconTemplate",value:function(){return $t(Ao||(Ao=g(['<i id="ov-icon" class="ov-','"></i>'])),this.ovType)}},{key:"ovTemplate",value:function(){return $t(_o||(_o=g(['<div id="ov">\n      ',"\n      <span>","</span>\n    </div>"])),this.ovIconTemplate(),this.ovText)}},{key:"vipLabelTemplate",value:function(){return this.vipLabel?this.vipLabel.img?$t(Eo||(Eo=g(['<div id="vip"><img src="','" /></div>'])),this.vipLabel.img):$t(Co||(Co=g(['<div id="vip">\n      <label style="','"><span>',"</span></label>\n    </div>"])),On(this.vipLabel.style),this.vipLabel.text):""}},{key:"viewTemplate",value:function(){return $t(So||(So=g(['\n      <div id="view">\n        <div\n          id="bg"\n          style="','"\n        ></div>\n        <a href="','" target="_blank" id="avatar">\n          <img id="face" src="','" />\n          ','\n        </a>\n        <div id="body">\n          <div id="title">\n            <a id="name" class="','" style="','"\n              >',"</a\n            >\n            ","\n            ","\n            ",'\n          </div>\n          <div id="content">\n            <div id="stats">\n              ',"\n            </div>\n            ",'\n            <div id="sign">','</div>\n          </div>\n          <div id="action">\n            <button id="follow" class="','" @click=','>\n              <bili-icon icon="BDC/plus_add_line/2" size="16"></bili-icon>\n              <span>','</span>\n            </button>\n            <button id="chat" @click=',">发消息</button>\n          </div>\n        </div>\n      </div>\n    "])),On({backgroundImage:"url(".concat(this.backgroundImage,")")}),this.getSpaceLink(""),this.faceSrc,this.ovType>-1?this.ovIconTemplate():"",this.nameRenderStyle?"render-style":"",this.nameStyle?On(this.nameStyle):"",this.name,this.gender?$t(To||(To=g(['<div id="gender"><img width="16" height="16" src="','" /></div>'])),this.genderImg):"",this.level.img?$t(Oo||(Oo=g(['<a id="level" href="','" target="_blank"><img src="','" /></a>'])),this.level.url,this.level.img):"",this.vipLabelTemplate(),this.stats.map((function(e){return e.url?$t(Po||(Po=g(['<a id="','" href="','" target="_blank"><span>',"</span>","</a>"])),e.key,e.url,e.count,e.label):$t(Io||(Io=g(['<a id="','"><span>',"</span>","</a>"])),e.key,e.count,e.label)})),this.ovType>-1?this.ovTemplate():"",this.signText,this.isFollowing?"active":"",this.handleFollow,this.isFollowing?"已关注":"关注",this.handleJumpMsg)}},{key:"spinnerTemplate",value:function(){return $t(Mo||(Mo=g(['<div id="spinner">正在加载中...请稍候</div>'])))}},{key:"fallbackTemplate",value:function(){return $t(Lo||(Lo=g(['<div id="fallback">加载出错，请稍后再试</div>'])))}},{key:"render",value:function(){return $t(jo||(jo=g(['<div id="wrap">\n      ',"\n    </div>"])),this.showSpinner?this.spinnerTemplate():this.data?this.viewTemplate():this.fallbackTemplate())}}],[{key:"getLevelImgSrc",value:function(e,t){return"//i0.hdslb.com/bfs/seed/jinkela/short/webui/user-profile/img/level_".concat(t?"h":e,".svg")}}]);var n,a}(dn);Jo.styles=vt(Ro||(Ro=g(["\n    :host {\n      width: ","px;\n      display: none;\n      position: fixed;\n    }\n\n    #wrap {\n      background-color: var(--bg1_float);\n      border-radius: 8px;\n      box-shadow: 0 0 30px 2px rgba(0, 0, 0, 0.1);\n      color: var(--text3);\n      font-size: 12px;\n      width: 100%;\n      font-family: var(--bili-font-family);\n      -webkit-font-smoothing: antialiased;\n    }\n    #spinner {\n      padding: 12px;\n    }\n\n    #bg {\n      background-position: 50%;\n      background-repeat: no-repeat;\n      background-size: cover;\n      border-radius: 8px 8px 0 0;\n      height: ","px;\n      left: 0;\n      overflow: hidden;\n      position: absolute;\n      top: 0;\n      width: 366px;\n    }\n\n    #avatar {\n      border-radius: 50%;\n      height: 48px;\n      left: 10px;\n      position: absolute;\n      top: 95px;\n      width: 48px;\n    }\n\n    #avatar #face {\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n    }\n    #avatar #ov-icon {\n      background-color: var(--text_white);\n      background-position: 50%;\n      background-repeat: no-repeat;\n      background-size: cover;\n      border-radius: 50%;\n      height: 14px;\n      position: absolute;\n      right: 0;\n      top: 34px;\n      width: 14px;\n    }\n    #ov-icon.ov-0 {\n      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASZSURBVHgBxVptThNBGJ5Wo4FAgjGBSCSuMZHon5Z4AMoN4ATACVpOwHIC6gkoJ6A3KJygNDH+8Icu0YhUCU0wEAxmfZ/d2XZnZ/ZzpvVJhk1nttPn/ZyZdygxA3Bdd44e69Sq1F7w5xxvARzeetS61E5KpZLD/hdAmtoutY5bHF1qm9QsNimEiF+5ZnEwdkHGRDyK3TycSlle4po5Yr5vq3F9zNhtjz9PGbsfMPZ34I89oFB4TFM8ojZFU8yuUquxBDjU1rLESKoARH6THk0mBqQPkPz5nrGL5ohsVkAYCPFs1xdOBibcJiHaSdMkCsDNaUsDIP5jzyduAk+3kgSxSYi9uK/GChBLvk8a/27n13gaYJFFm4TZVI3GCqEUgMgjpx9JA992zGk9DvMNxpb2VSNbJMRhtFMSgAcsFpqRz8NlPm/4AToJTFOgv+74wT8CTL4SDWyVAF/oYQmdH1f8zDJJIMAhhIhTEmAl3FEOf+B+bwlfgdtMmjwAa3/difZWiaMd7hgKwF1HGGSXLTM+jwzzzo0L0Hj0m37SEFF3/b2Xh7AFbOG1O4eyTWz2yg6QR3YpCjnjgXwj+OAJwLUvquecvvjHYVqIkr/psdwAeVmRQysEFqgJw9D+5SHTQpQ8iBSNpX4z1gqBAHXhC9C+DubrsttcnzAtXEixsIo/Ze4+VWM/hkBdUgS+7hrSl+aswY1ggZr0Q0V9H+StlnpMNxXDhWQlrEMAM9pPIg/cGFhL5CRQhQAVoeu2y3IjC3kTm7/fx9EeCwJYQtfdGcuFNPKAqZVctmKlhDOc0HX6JLu2cLp6m8FimO9+kDx+tp3uZtjcVa/CPYOHysmyAOSXO9nexQ+LO8tikLnNlVkR4PCx3DFDCsii/RhAAFGsLKRw9Ls3EJQAyP9qZXtXwQ0uBCZzwktpboR8/OFl8jsI7LTdZx7yACwvwoEFRNtNV5gRpM2TlzwgH/o9AcS8ObPGtAErTlXjx3FIyksekOfsjccCSeTPNcoxs6vRni4EaIsv1fSzy3SMACCPA0oRBIUwESdlOiQjYo+F7vkG04KsKT3y3py1aA8O+E6wDog7uIU600LUArrkgUWp5uv5YTn0YZQ74UJFrQBTh9OdCfIoPcop1FO6JwB3I/HIA4mLxEJY+ybIeyVHSfutoMAV3krIVljMVar3ESyCJsgDOJrK2h+e8oXKHC8aiaxRXOoXTHu6wNlaPp7ukfbt4IOqtIj9sRiFn9YmVxcNoN6qO0Re2MOodqNUxY1s8F4dxef2cWCmptqqg5O0TZAE4MEhFiURD2+6+utDFsBt1Fv1bdWVk/I8QC+2WChQhkDd3jpQBZU+QPj5vrok4/t9WzWQdsVks2hQAyi7IMPoVu8CBIUwddoWgjaKLJd86/QgtSsu+QJBUIrJW0vyFksivtCIIw6f3+HeEIs816yIKiv2JWQpCIIKBGqrECh8zYqGRIA9zVQl7ZoVO+QN4/+KAJdyx4ur6AWGccAa1FquWXjE3dDFxdjBBdly/X/YKIqOLvFMMZBFGOYXibHa4UhnMTFeBrzBt8/4s803kVr4B9ZWrx2gQRFMAAAAAElFTkSuQmCC);\n    }\n    #ov-icon.ov-1 {\n      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAT3SURBVHgBxVq9bxxFFH/3kVzwWY5FAUYK4iK7oEDyhhIh4VSkTEQaqnMKKpCCK2hQLqJKBUhQUeTcx0rKUBn/A/gsUSBxUS6iiJUmTnSX2Mbn5f3mZk+zs7MfNzN3/KTx6t7e7f7e18ybNy6RB4RhuMiXqzwCHu/J66IcEXpy7PHY5bFTKpV69H8BpHnc4rEd2mOXR5NHg2YFhfjz0C/uTl2RKRHXcWsSTqUiX5KWuU+j2Dai82JI3VdD2ntxQt3BkPpDov5JKO7NV0u0dJbHuTIt1ysULFQpOF/JeKPIlctFciRXASbf5MuPFE9IARDcenpM93hEZItiqVYWSjQv1IRiBhzwuMFKPMh6TqYC0p0tXQ6ym/8cCeI+cOWtM1mKtFiJ22m/TVUgjTws3mbyk1o8D/BI892aUMaAVCWMCjB5zOn3dfkvjw+9WT0N1985S19ePGe6tc5KbOrChAIyYbHQjGMe1v7ur1fUeTmkWWBlrkw/fFAXya8AOXFJT2yTAo/50lBlX3T6PMOc0iwRLFSEEho6rMAlVRDLGhn3DVWGsJk1eQDexrs1BMyxpQrGCsjQid18+OzYS8wjObc/WqBPzQmaintPje+/GY5qLwHVAy31W/tHp2KqdAXIr/MACq2aGjaTMx7Ifx19EApI6zf1H+4fuU2VKnmg2588FKM1R8PYC5EH1tS7sP7DZ/+SC3TyIIJSwwaGlX7shUiBm+pd19D5jOdylTyAWskFhlz4BH/KMnyC+MtOyBZI1K8MC1Hnpf0zga2kAmsII3hgLfYitpRt7IP8tytvGO89Grh5ACFkMOxVKBC3vqWlssgDPtYSwzMCKLCqSmwslUse+wMPxZ/BAw0o0FAl+4eTvSiPPNAd+KmhHg0SHlitkq7AcXFXo+jKIw98/OYZCj6spt7vD0O68/fr3DDD9zQsJp5a1NVRxVgEqCq1ytIKBm6LZbIANh+Gctcad7qvrZMcChyogiKklmolbzsykC+66pu4IYSgwLi6m6/AVZnPEaXu53/0M7/zDefGlZzqcxLyAAynoQcPdFTJSr1CPrBSz47OSckDb9cSzxQKPFElq+er5Aq4OssQ2KjYFIuGZ+4lPTBnlddU9Bku7RhsMzXs4k2xxlHAHnCdXZZTrA/ybctKd9QIS0THTpk3yUji31UpymEXGF7kRB5YTbYiscHvRb7eUe9cd1RADyFX8sD6hZouQrtzvKHBh/F6gBCy9QJcrbYIfZBHvWVoOwqjC6kMo5/Uu9hR2eTCct0veRjEYP121OBS1Up4oZn8YS4GcoX2QR7A3tpg/XGfNGZi2TSKHTD8zHP21pT7oWlAGBu2p7fZ+q3og6m1iL5obJe28edgZn3RCJgIfg3mdXGPyV9UBaYV5xppBd737895WeCKIqUvCk6XdWGClUyODVWGfIA1XNeHIsA7Ukr1G6Yjp6wDjhZp+QCgX+qja6dDTBqcsClrUCzuVeQdMbXIoAQ6d5hhfnPs3kWIGmEp03YqeaDIIR9Oa+6S4ZAvUgQnk5N6JFosYfEU4oj5DSbfznrOJMes26Q1AFSg5YGZCm2Z/cNTbg6EsWNWbJRQDqNcx4QQZJftqJCvef9XBIRUOF081w8wvAPe4NEO/UIQD5WDi6lDKrIejv5hwxbbrsS99EXCUY6s0WgFR6uyQfF8OZADsf1EXh/IItIJ/wGIiiU8ye7cIAAAAABJRU5ErkJggg==);\n    }\n\n    #body {\n      box-sizing: border-box;\n      padding: 97px 20px 16px 70px;\n    }\n\n    #title {\n      align-items: center;\n      display: flex;\n      height: 21px;\n      padding-bottom: 10px;\n    }\n    #title #name {\n      color: var(--text1);\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 700;\n    }\n    #title #name.render-style {\n      background-clip: text;\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n      background-image: var(--name-render-bg-light);\n    }\n    #title #name.render-style.dark {\n      background-image: var(--name-render-bg-dark);\n    }\n    #title #gender {\n      display: block;\n      height: 16px;\n      margin-left: 6px;\n      width: 16px;\n    }\n    #title #level {\n      margin-left: 6px;\n      margin-right: -2px;\n      display: flex;\n    }\n    #level img {\n      width: 30px;\n    }\n    #vip {\n      margin-left: 6px;\n    }\n    #vip img {\n      display: flex;\n      height: 20px;\n    }\n    #vip label {\n      background-color: var(--brand_pink);\n      border-radius: 2px;\n      box-sizing: border-box;\n      color: var(--text_white);\n      font-size: 12px;\n      font-weight: 400;\n      height: 16px;\n      line-height: 16px;\n      margin-left: 0;\n      max-width: 58px;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n    #vip label span {\n      align-items: center;\n      display: inline-flex;\n      justify-content: center;\n      transform: scale(0.83);\n      transform-origin: center;\n    }\n\n    #content {\n    }\n    #content #stats {\n      align-items: center;\n      display: flex;\n      font-size: 12px;\n      padding-bottom: 10px;\n    }\n    #content #stats a {\n      color: var(--text3);\n      padding-right: 18px;\n      text-decoration: none;\n    }\n    #content #stats a span {\n      color: var(--text1);\n      display: inline-block;\n      margin-right: 3px;\n    }\n    #content #ov {\n      color: var(--text3);\n      font-size: 12px;\n      line-height: 17px;\n      margin-bottom: 10px;\n    }\n    #content #ov i {\n      background-position: 50%;\n      background-repeat: no-repeat;\n      background-size: cover;\n      display: inline-block;\n      height: 14px;\n      margin-right: 2px;\n      vertical-align: sub;\n      width: 14px;\n    }\n    #content sign {\n      -webkit-line-clamp: 2;\n      color: var(--text3);\n      display: -webkit-box;\n      line-height: 16px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      word-break: break-all;\n    }\n    #action {\n      align-items: center;\n      display: flex;\n      margin-top: 16px;\n    }\n    #action button {\n      align-items: center;\n      border-radius: 3px;\n      border-style: solid;\n      border-width: 1px;\n      cursor: pointer;\n      display: flex;\n      font-size: 14px;\n      height: 30px;\n      justify-content: center;\n      transition: all 0.3s;\n      width: 100px;\n    }\n    #action button#follow {\n      color: var(--text_white);\n      border-color: var(--brand_blue);\n      background-color: var(--brand_blue);\n    }\n    #action button#follow bili-icon {\n      margin-right: 3px;\n    }\n    #action button#follow.active {\n      background-color: var(--graph_bg_thick);\n      border-color: var(--graph_bg_thick);\n      color: var(--text3);\n    }\n    #action button#follow.active bili-icon {\n      display: none;\n    }\n    #action button#follow.active:hover {\n      background-color: var(--graph_bg_regular);\n      border-color: var(--graph_bg_regular);\n    }\n    #action button#follow:hover {\n      background-color: #00b8f6;\n      border-color: #00b8f6;\n    }\n    #action button#chat {\n      background-color: transparent;\n      border-color: var(--text3);\n      color: var(--text2);\n      margin-left: 8px;\n    }\n  "])),366,85),Qo([bn()],Jo.prototype,"uid",2),Qo([bn()],Jo.prototype,"data",2),Qo([bn()],Jo.prototype,"showSpinner",2),Qo([bn()],Jo.prototype,"isFollowing",2),Qo([bn()],Jo.prototype,"backgroundImage",1),Qo([bn()],Jo.prototype,"faceSrc",1),Qo([bn()],Jo.prototype,"ovType",1),Qo([bn()],Jo.prototype,"ovText",1),Qo([bn()],Jo.prototype,"name",1),Qo([bn()],Jo.prototype,"nameRenderStyle",1),Qo([bn()],Jo.prototype,"nameStyle",1),Qo([bn()],Jo.prototype,"gender",1),Qo([bn()],Jo.prototype,"genderImg",1),Qo([bn()],Jo.prototype,"level",1),Qo([bn()],Jo.prototype,"vipLabel",1),Qo([bn()],Jo.prototype,"stats",1),Qo([bn()],Jo.prototype,"signText",1),Jo=Qo([hn("bili-user-profile")],Jo),customElements.get("bili-user-profile")||customElements.define("bili-user-profile",Jo),window.__WEB_UI_VERSION__="1.0.1";
/**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var ea=En(function(e){function n(e){var i,a;if(o(this,n),i=r(this,n,[e]),e.type!==An||"class"!==e.name||(null===(a=e.strings)||void 0===a?void 0:a.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");return t(i)}return p(n,e),s(n,[{key:"render",value:function(e){return" "+Object.keys(e).filter((function(t){return e[t]})).join(" ")+" "}},{key:"update",value:function(e,t){var n,i,r=this,o=y(t,1)[0];if(void 0===this.it){for(var a in this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((function(e){return""!==e})))),o)o[a]&&!(null===(n=this.nt)||void 0===n?void 0:n.has(a))&&this.it.add(a);return this.render(o)}var s=e.element.classList;for(var l in this.it.forEach((function(e){e in o||(s.remove(e),r.it.delete(e))})),o){var c=!!o[l];c===this.it.has(l)||(null===(i=this.nt)||void 0===i?void 0:i.has(l))||(c?(s.add(l),this.it.add(l)):(s.remove(l),this.it.delete(l)))}return qt}}])}(Cn)),ta=Symbol.for(""),na=function(e){if((null==e?void 0:e.r)===ta)return null==e?void 0:e._$litStatic$},ia=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return{_$litStatic$:n.reduce((function(t,n,i){return t+function(e){if(void 0!==e._$litStatic$)return e._$litStatic$;throw Error("Value passed to 'literal' function must be a 'literal' result: ".concat(e,". Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security."))}(n)+e[i+1]}),e[0]),r:ta}},ra=new Map,oa=function(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o,a,s,l=i.length,c=[],u=[],d=0,p=!1;d<l;){for(s=t[d];d<l&&void 0!==(a=i[d],o=na(a));)s+=o+t[++d],p=!0;d!==l&&u.push(a),c.push(s),d++}if(d===l&&c.push(t[l]),p){var h=c.join("$$lit$$");void 0===(t=ra.get(h))&&(c.raw=c,ra.set(h,t=c)),i=u}return e.apply(void 0,[t].concat(w(i)))}}($t),aa=function(e){function n(e){var i;if(o(this,n),(i=r(this,n,[e])).et=Gt,e.type!==_n)throw Error(i.constructor.directiveName+"() can only be used in child bindings");return t(i)}return p(n,e),s(n,[{key:"render",value:function(e){if(e===Gt||null==e)return this.ft=void 0,this.et=e;if(e===qt)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.et)return this.ft;this.et=e;var t=[e];return t.raw=t,this.ft={_$litType$:this.constructor.resultType,strings:t,values:[]}}}])}(Cn);
/**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */aa.directiveName="unsafeHTML",aa.resultType=1;var sa,la,ca,ua,da,pa,ha,fa,va,ma,ba,ya,ga,wa,xa,ka,Aa,_a,Ea,Ca,Sa,Ta,Oa,Pa,Ia,Ma,La,ja,Ra,Da,Na,Ba,za,Ua,Fa,Va,Ha,Wa,$a,qa,Ga,Xa,Za,Ya,Qa,Ka,Ja,es,ts,ns,is,rs,os,as,ss,ls,cs,us,ds,ps,hs,fs,vs,ms,bs,ys,gs,ws,xs,ks,As,_s,Es,Cs,Ss,Ts,Os,Ps,Is,Ms,Ls,js,Rs,Ds,Ns,Bs,zs,Us,Fs,Vs,Hs,Ws,$s,qs,Gs,Xs,Zs,Ys,Qs,Ks,Js,el,tl,nl,il,rl,ol,al,sl,ll,cl,ul,dl,pl,hl,fl,vl,ml,bl,yl,gl,wl,xl,kl,Al,_l,El,Cl,Sl,Tl,Ol,Pl,Il,Ml,Ll,jl,Rl,Dl,Nl,Bl,zl,Ul,Fl,Vl,Hl=En(aa),Wl=Object.defineProperty,$l=Object.getOwnPropertyDescriptor,ql=function(e,t,n,i){for(var r,o=i>1?void 0:i?$l(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Wl(t,n,o),o},Gl=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disabled=!1,e.trailingIcon=!1,e.hasIcon=!1,e.href="",e.target="",e}return p(t,e),s(t,[{key:"name",get:function(){var e;return null!==(e=this.getAttribute("name"))&&void 0!==e?e:""},set:function(e){this.setAttribute("name",e)}},{key:"focus",value:function(){var e;null==(e=this.buttonElement)||e.focus()}},{key:"blur",value:function(){var e;null==(e=this.buttonElement)||e.blur()}},{key:"getRenderClasses",value:function(){return{"button--icon-leading":!this.trailingIcon&&this.hasIcon,"button--icon-trailing":this.trailingIcon&&this.hasIcon}}},{key:"render",value:function(){var e=this.disabled&&!this.href,t=this.href?ia(sa||(sa=g(["a"]))):ia(la||(la=g(["button"]))),n=this.ariaLabel,i=this.ariaHasPopup,r=this.ariaExpanded;return oa(ca||(ca=g(["\n      <",'\n        class="button ','"\n        ?disabled=','\n        aria-label="','"\n        aria-haspopup="','"\n        aria-expanded="','"\n        href=',"\n        target=","\n      >","</",">"])),t,ea(this.getRenderClasses()),e,n||Gt,i||Gt,r||Gt,this.href||Gt,this.target||Gt,this.renderContent(),t)}},{key:"handleSlotChange",value:function(){this.hasIcon=this.assignedIcons.length>0}},{key:"renderContent",value:function(){var e,t=$t(ua||(ua=g(['<slot name="icon" @slotchange="','"></slot>'])),this.handleSlotChange);return $t(da||(da=g(["\n      "," ",'\n      <span class="button__label"><slot></slot></span>\n      ',"\n    "])),null==(e=this.renderOutline)?void 0:e.call(this),this.trailingIcon?Gt:t,this.trailingIcon?t:Gt)}}])}(dn);Gl.styles=vt(pa||(pa=g([""]))),ql([mn()],Gl.prototype,"disabled",2),ql([mn()],Gl.prototype,"trailingIcon",2),ql([mn()],Gl.prototype,"hasIcon",2),ql([mn()],Gl.prototype,"href",2),ql([mn()],Gl.prototype,"target",2),ql([wn(".button")],Gl.prototype,"buttonElement",2),ql([function(e){var t=null!=e?e:{},n=t.slot,i=t.selector;return gn({descriptor:function(t){return{get:function(){var t,r="slot"+(n?"[name=".concat(n,"]"):":not([name])"),o=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(r),a=null!=o?xn(o,e):[];return i?a.filter((function(e){return e.matches(i)})):a},enumerable:!0,configurable:!0}}})}({slot:"icon",flatten:!0})],Gl.prototype,"assignedIcons",2),Gl=ql([hn("bili-button")],Gl);var Xl=Object.defineProperty,Zl=Object.getOwnPropertyDescriptor,Yl=function(e){function t(){return o(this,t),r(this,t,arguments)}return p(t,e),s(t)}(Gl);Yl.styles=vt(ha||(ha=g(['\n    :host {\n      display: inline-flex;\n      height: var(--_container-height);\n      outline: none;\n      font-family: var(--_label-text-font);\n      font-size: var(--_label-text-size);\n      line-height: var(--_label-text-line-height);\n      font-weight: var(--_label-text-weight);\n      -webkit-tap-highlight-color: transparent;\n      vertical-align: middle;\n    }\n    .button {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      box-sizing: border-box;\n      border: none;\n      outline: none;\n      user-select: none;\n      appearance: none;\n      background: rgba(0, 0, 0, 0);\n      text-decoration: none;\n      inline-size: 100%;\n      position: relative;\n      z-index: 0;\n      height: 100%;\n      font: inherit;\n      color: var(--_label-text-color);\n      padding-inline-start: var(--_leading-space);\n      padding-inline-end: var(--_trailing-space);\n      cursor: pointer;\n    }\n    .button:not([disabled]):hover {\n      color: var(--_label-text-color-hover, var(--brand_blue));\n    }\n    .button::before {\n      background-color: var(--_container-color);\n      border-radius: inherit;\n      content: "";\n      inset: 0px;\n      position: absolute;\n    }\n  ']))),Yl=function(e,t,n,i){for(var r,o=i>1?void 0:i?Zl(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Xl(t,n,o),o}([hn("bili-text-button")],Yl);var Ql="bili-comments-toast-container",Kl=function(){function e(){o(this,e);var t=document.querySelector(".".concat(Ql));t||(t=document.createElement("div")).classList.add(Ql),this.container=t,document.body.appendChild(this.container);var n=document.createElement("style");n.innerHTML="\n        .".concat(Ql," {\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            pointer-events: none;\n            background-color: transparent;\n        }\n        .").concat("bili-comments-toast"," {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            background-color: rgba(0, 0, 0, 0.8);\n            font-size: 14px;\n            color: #fff;\n            padding: 2px 6px;\n            border-radius: 2px;\n        }\n    "),document.head.appendChild(n)}return s(e,[{key:"show",value:function(e,t){var n=this;t=t||2e3;var i=document.createElement("div");i.classList.add("bili-comments-toast"),i.textContent=e,this.container.style.zIndex=$i().toString(),this.container.appendChild(i),setTimeout((function(){n.container.removeChild(i)}),t)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}])}(),Jl=Kl.getInstance(),ec=function(){return s((function e(){o(this,e)}),[{key:"request",value:(e=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]);var e}(),tc=new ec,nc=function(e){return tc.request({method:"POST",url:"/x/v2/reply/action",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},ic=function(e){return tc.request({method:"POST",url:"/x/v2/reply/hate",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},rc=function(e){return tc.request({method:"POST",url:"/x/v2/reply/del",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},oc=function(e){return tc.request({method:"POST",url:"/x/v2/reply/top",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},ac=function(e){return e[e.SELECT=1]="SELECT",e[e.UNSELECT=2]="UNSELECT",e[e.CLOSE=3]="CLOSE",e[e.OPEN=4]="OPEN",e}(ac||{}),sc=function(e){return tc.request({method:"POST",url:"/x/v2/reply/subject/modify",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},lc=function(e){return tc.request({method:"POST",url:"/x/v2/dm/subject/state/update",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},cc=function(e){return tc.request({method:"POST",url:"/x/v2/reply/vote/do",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},uc=function(e){return tc.request({url:"/x/v2/reply/report",method:"POST",data:v(v({},e),{},{gaia_source:"main_web"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},dc=function(e){return tc.request({url:"/x/relation/modify",method:"POST",data:v(v({},e),{},{gaia_source:"main_web"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},pc=function(e){return tc.request({method:"POST",baseURL:"//cm.bilibili.com",url:"/commercialorder/api/web_api/v1/main_site/upper/comment/apply_remove",data:v({},e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};var hc=function(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map((function(e){e(n)})),(i=e.get("*"))&&i.slice().map((function(e){e(t,n)}))}}}(),fc="main",vc="reply",mc=function(e,t){var n,i,r=window;if(null!=(n=window.reportConfig)&&n.msgObjects&&r[window.reportConfig.msgObjects]){var o=t||e;r[null==(i=r.reportConfig)?void 0:i.msgObjects][e]=o}else;},bc=function(e,t,n){var i=v(v({},n),{},{spm_id:"".concat(Wn(),".").concat(t,".").concat(e)});window.reportObserver&&window.reportObserver.reportCustomData&&window.reportObserver.reportCustomData("show"===e?"appear":e,i)},yc=function(e,t,n){switch(t="".concat(Wn(),".").concat(t),e){case"show":Zn("exposure",t,n);break;case"click":Zn("click",t,n);break;case"tech":Zn("tech",t,n)}},gc=function(){var e=i(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.biliMirror&&!window.__biliMirrorPbInstance__){e.next=2;break}return e.abrupt("return");case 2:return t=(null==window?void 0:window.__MIRROR_CONFIG__)||{},n={feature:{tech:!0},autoPv:!1,batch:!1},null!=t&&t.pbOptions&&(n=v(v(v({},n),t.pbOptions),{},{feature:v(v({},n.feature),t.pbOptions.feature)})),e.next=7,$n(n);case 7:window.__biliMirrorPbInstance__=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wc=Object.defineProperty,xc=Object.getOwnPropertyDescriptor,kc=function(e,t,n,i){for(var r,o=i>1?void 0:i?xc(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&wc(t,n,o),o},Ac=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).type="",e.oid="",e.rpid="",e.mid="",e.uname="",e.ordering="heat",e.maxInputLength=200,e.optionValue=-1,e.inputValue="",e.blockValue=!1,e}return p(t,e),s(t,[{key:"groups",get:function(){return[{name:"违反法律法规",options:[{label:"违法违规",value:9},{label:"色情",value:2},{label:"低俗",value:10},{label:"赌博诈骗",value:12}]},{name:"谣言类不实信息",options:[{label:"涉政谣言",value:19},{label:"虚假不实信息",value:22},{label:"涉社会事件谣言",value:20}]},{name:"侵犯个人权益",options:[{label:"人身攻击",value:7},{label:"侵犯隐私",value:15}]},{name:"有害社区环境",options:[{label:"垃圾广告",value:1},{label:"引战",value:4},{label:"剧透",value:5},{label:"刷屏",value:3},{label:"视频不相关",value:8},{label:"违规抽奖",value:18},{label:"青少年不良信息",value:17}]},{name:"",options:[{label:"其他",value:0}]}]}},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this);var e={oid:this.oid,type:this.type,rpid:this.rpid,mid:this.mid};bc("show","comment-report-reason",e),yc("show","comments.report",e)}},{key:"handleOptionChange",value:function(e){this.optionValue=parseInt(e.detail.value)}},{key:"handleInputChange",value:function(e){this.inputValue=e.target.value}},{key:"onBlockChange",value:function(e){this.blockValue=e.detail.checked}},{key:"handleHide",value:function(){this.dispatchEvent(new CustomEvent("hide"))}},{key:"handleCancel",value:function(){this.handleHide()}},{key:"handleConfirm",value:(n=i(m().mark((function e(){var t,n,i,r,o=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==this.optionValue){e.next=3;break}return Jl.show("请选择举报理由"),e.abrupt("return");case 3:if(0!==this.optionValue){e.next=10;break}if(this.inputValue){e.next=7;break}return Jl.show("请完善举报理由"),e.abrupt("return");case 7:if(!this.inputValue||!(this.inputValue.length<2||this.inputValue.length>this.maxInputLength)){e.next=10;break}return Jl.show("自定义举报内容长度为2-200字符"),e.abrupt("return");case 10:return e.prev=10,e.next=13,uc({type:Number(this.type),oid:this.oid,rpid:this.rpid,reason:this.optionValue,content:0===this.optionValue?this.inputValue:"",add_blacklist:this.blockValue,ordering:this.ordering});case 13:if(0!==(n=e.sent).code){e.next=24;break}if(Jl.show((null==(t=n.data)?void 0:t.toast)||"举报成功"),this.handleHide(),i={oid:this.oid,type:this.type,rpid:this.rpid,mid:this.mid,reasonid:this.optionValue,blacklist:this.blockValue,ctime:Date.now()},bc("show","comment-report-reason-submit-button",i),yc("show","comments.report_submit",i),r={type:Number(this.type),oid:Number(this.oid),oid_str:this.oid,rpid:Number(this.rpid),rpid_str:this.rpid},!this.blockValue){e.next=22;break}return hc.emit("remove",{namespaces:[fc,vc],method:"filter",predicate:function(e){var t;return(null==(t=e.member)?void 0:t.mid)===o.mid},value:r}),e.abrupt("return");case 22:return hc.emit("remove",{namespaces:[fc,vc],method:"findIndex",predicate:function(e){return e.rpid_str===o.rpid},value:r}),e.abrupt("return");case 24:Jl.show(n.message||"举报失败"),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),Jl.show("举报失败");case 30:case"end":return e.stop()}}),e,this,[[10,27]])}))),function(){return n.apply(this,arguments)})},{key:"handleJumpJudgement",value:function(){bc("click","judgement",{}),window.open("//www.bilibili.com/judgement/apply")}},{key:"textareaTemplate",value:function(){return $t(fa||(fa=g([" <textarea\n      .value=",'\n      placeholder="请填写举报理由"\n      maxlength="','"\n      @input=',"\n    ></textarea>"])),this.inputValue,this.maxInputLength,this.handleInputChange)}},{key:"render",value:function(){var e=this;return $t(va||(va=g(['\n      <div id="tips" @click=','>\n        <span>申请加入风纪委员会，共治更好的社区氛围</span>\n        <bili-icon size="16" icon="BDC/arrow_forward_right_line/3"></bili-icon>\n      </div>\n      <div id="form">\n        ',"\n        ",'\n        <div id="footer">\n          <div id="action">\n            <button id="cancel" @click=','>取消</button>\n            <button id="confirm" @click=',">确定</button>\n          </div>\n          ","\n        </div>\n      </div>\n    "])),this.handleJumpJudgement,this.groups.map((function(t){return $t(ma||(ma=g(['<div id="group">\n              ','\n              <div id="group-options">\n                ',"\n              </div>\n            </div>"])),t.name?$t(ba||(ba=g(['<div id="group-name">',"</div"])),t.name):"",t.options.map((function(t){return $t(ya||(ya=g(['<bili-radio\n                      label="','"\n                      value="','"\n                      checked="','"\n                      @change=',"\n                    ></bili-radio>"])),t.label,t.value,t.value===e.optionValue,e.handleOptionChange)})))})),0===this.optionValue?this.textareaTemplate():"",this.handleCancel,this.handleConfirm,this.mid&&this.uname?$t(ga||(ga=g(['<div id="optional">\n                <bili-checkbox value="block" label="拉黑 @','" @change=',"></bili-checkbox>\n              </div>"])),this.uname,this.onBlockChange):"")}}]);var n}(dn);Ac.styles=vt(wa||(wa=g(["\n    :host {\n      padding: 16px;\n      display: flex;\n      flex-direction: column;\n    }\n    #tips {\n      display: flex;\n      align-items: center;\n      position: relative;\n      padding: 12px;\n      font-size: 14px;\n      border-radius: 4px;\n      color: var(--text1);\n      background-color: var(--bg2);\n      transition: 0.2s;\n      cursor: pointer;\n      margin-bottom: 12px;\n    }\n    #tips bili-icon {\n      margin-left: auto;\n    }\n    #tips:hover {\n      background-color: var(--bg3);\n    }\n    #group {\n    }\n    #group + #group {\n      margin-top: 12px;\n    }\n    #group-name {\n      font-size: 12px;\n      color: var(--text3);\n      margin-bottom: 15px;\n    }\n    #group-options {\n      display: flex;\n      flex-wrap: wrap;\n    }\n    bili-radio {\n      --bili-radio-margin-inline-end: 0;\n      width: 25%;\n      margin-bottom: 16px;\n    }\n    textarea {\n      margin-top: -8px;\n      box-sizing: border-box;\n      width: 100%;\n      height: 70px;\n      padding: 8px;\n      border: 1px solid var(--graph_weak);\n      border-radius: 4px;\n      outline: none;\n      resize: none;\n    }\n\n    #footer {\n      margin-top: 16px;\n    }\n    #footer #action {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    #action button {\n      -webkit-font-smoothing: antialiased;\n      border: 1px solid var(--brand_blue);\n      border-radius: 6px;\n      box-sizing: border-box;\n      cursor: pointer;\n      font-family: PingFang SC, HarmonyOS_Regular, Helvetica Neue, Microsoft YaHei, sans-serif !important;\n      font-weight: 400;\n      height: 32px;\n      outline: none;\n      transition: all 0.2s;\n      width: 130px;\n      margin-left: 12px;\n    }\n    #action button#cancel {\n      background-color: var(--bg1);\n      border-color: var(--line_regular);\n      color: var(--text1);\n    }\n    #action button#confirm {\n      background-color: var(--brand_blue);\n      border-color: var(--brand_blue);\n      color: var(--text_white);\n    }\n    #optional {\n      margin-top: 20px;\n      color: var(--text3);\n      display: flex;\n      justify-content: center;\n    }\n  "]))),kc([mn({type:String,attribute:"data-type"})],Ac.prototype,"type",2),kc([mn({type:String,attribute:"data-oid"})],Ac.prototype,"oid",2),kc([mn({type:String,attribute:"data-rpid"})],Ac.prototype,"rpid",2),kc([mn({type:String,attribute:"data-mid"})],Ac.prototype,"mid",2),kc([mn({type:String,attribute:"data-uname"})],Ac.prototype,"uname",2),kc([mn({type:String,attribute:"data-ordering"})],Ac.prototype,"ordering",2),kc([bn()],Ac.prototype,"maxInputLength",2),kc([bn()],Ac.prototype,"optionValue",2),kc([bn()],Ac.prototype,"inputValue",2),kc([bn()],Ac.prototype,"blockValue",2),kc([bn()],Ac.prototype,"groups",1),Ac=kc([hn("bili-comment-report-form")],Ac);var _c=function(e){return tc.request({url:"/x/member/web/uname/update",method:"POST",data:{uname:e,source:"reply"},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},Ec=Object.defineProperty,Cc=Object.getOwnPropertyDescriptor,Sc=function(e,t,n,i){for(var r,o=i>1?void 0:i?Cc(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Ec(t,n,o),o},Tc=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).inputValue="",e}return p(t,e),s(t,[{key:"handleInputChange",value:function(e){this.inputValue=e.target.value}},{key:"handleHide",value:function(){this.dispatchEvent(new CustomEvent("hide"))}},{key:"handleCancel",value:function(){this.handleHide()}},{key:"handleConfirm",value:(n=i(m().mark((function e(){var t,n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.inputValue){e.next=4;break}return Jl.show("请输入昵称"),e.abrupt("return");case 4:return e.next=6,_c(this.inputValue);case 6:if(t=e.sent,n=t.code,i=t.message,0!==n){e.next=12;break}return Jl.show("成功设置昵称"),this.handleHide(),e.abrupt("return");case 12:Jl.show(i||"设置昵称失败"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Jl.show("设置昵称失败");case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){return $t(xa||(xa=g(['\n      <div id="form">\n        <div id="tips">拥有昵称后才能评论哦！快来取个适合你的昵称吧！</div>\n        <div id="input">\n          <input .value=',' placeholder="请输入新的昵称" maxlength="16" @input=',' />\n        </div>\n        <div id="footer">\n          <div id="action">\n            <button id="cancel" @click=','>取消</button>\n            <button id="confirm" @click=',">确定</button>\n          </div>\n        </div>\n      </div>\n    "])),this.inputValue,this.handleInputChange,this.handleCancel,this.handleConfirm)}}]);var n}(dn);Tc.styles=vt(ka||(ka=g(["\n    :host {\n      padding: 24px;\n      display: flex;\n      flex-direction: column;\n    }\n\n    #tips {\n      width: 100%;\n      text-align: center;\n      font-size: 14px;\n      color: var(--text2);\n      margin-bottom: 16px;\n    }\n\n    #input {\n      width: 100%;\n      margin-bottom: 40px;\n    }\n\n    #input input {\n      box-sizing: border-box;\n      width: 100%;\n      height: 40px;\n      padding: 0 10px;\n      border: 1px solid var(--graph_weak);\n      border-radius: 4px;\n      outline: none;\n    }\n\n    #footer {\n      margin-top: 16px;\n    }\n    #footer #action {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    }\n    #action button {\n      -webkit-font-smoothing: antialiased;\n      border: 1px solid var(--brand_blue);\n      border-radius: 6px;\n      box-sizing: border-box;\n      cursor: pointer;\n      font-family: PingFang SC, HarmonyOS_Regular, Helvetica Neue, Microsoft YaHei, sans-serif !important;\n      font-weight: 400;\n      height: 32px;\n      outline: none;\n      transition: all 0.2s;\n      width: 160px;\n    }\n    #action button#cancel {\n      background-color: var(--bg1);\n      border-color: var(--line_regular);\n      color: var(--text1);\n    }\n    #action button#confirm {\n      background-color: var(--brand_blue);\n      border-color: var(--brand_blue);\n      color: var(--text_white);\n    }\n  "]))),Sc([bn()],Tc.prototype,"inputValue",2),Tc=Sc([hn("bili-comment-update-uname-form")],Tc);var Oc=Object.defineProperty,Pc=Object.getOwnPropertyDescriptor,Ic=function(e,t,n,i){for(var r,o=i>1?void 0:i?Pc(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Oc(t,n,o),o},Mc=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).type="",e.oid="",e.rpid="",e.maxInputLength=100,e.optionValue=-1,e.inputValue="",e.options=[],e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.initData()}},{key:"initData",value:(a=i(m().mark((function e(){var t,n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tc.request({baseURL:"//cm.bilibili.com",url:"/commercialorder/api/web_api/v1/main_site/upper/comment/reason_list"});case 3:0===(n=e.sent).code&&null!=(t=n.result)&&t.length&&(i=n.result.map((function(e){return{label:e.reason_content,value:e.reason_index}})),this.options=i.concat({label:"其他原因",value:0})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Jl.show("获取举报理由失败");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return a.apply(this,arguments)})},{key:"handleOptionChange",value:function(e){this.optionValue=parseInt(e.detail.value)}},{key:"handleInputChange",value:function(e){this.inputValue=e.target.value}},{key:"handleHide",value:function(){this.dispatchEvent(new CustomEvent("hide"))}},{key:"handleCancel",value:function(){this.handleHide()}},{key:"handleConfirm",value:(n=i(m().mark((function e(){var t,n,i,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==this.optionValue){e.next=3;break}return Jl.show("请选择申诉原因"),e.abrupt("return");case 3:if(0!==this.optionValue){e.next=10;break}if(this.inputValue){e.next=7;break}return Jl.show("请选择或填写申诉原因"),e.abrupt("return");case 7:if(!this.inputValue||!(this.inputValue.length<2||this.inputValue.length>this.maxInputLength)){e.next=10;break}return Jl.show("自定义举报内容长度为2-100字符"),e.abrupt("return");case 10:return e.prev=10,t="",n=this.options.find((function(e){return e.value===r.optionValue})),0===this.optionValue?t=this.inputValue:n&&(t=n.label),e.next=16,pc({av_id:this.oid,comment_id:this.rpid,reason:t});case 16:0===(i=e.sent).code?Jl.show(i.result||"申诉成功"):Jl.show(i.message||"申诉失败"),this.handleHide(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),Jl.show("申诉失败");case 23:case"end":return e.stop()}}),e,this,[[10,20]])}))),function(){return n.apply(this,arguments)})},{key:"textareaTemplate",value:function(){return $t(Aa||(Aa=g(['<div id="input">\n      <textarea\n        .value=','\n        placeholder="请填写具体原因"\n        maxlength="','"\n        @input=',"\n      ></textarea>\n    </div>"])),this.inputValue,this.maxInputLength,this.handleInputChange)}},{key:"render",value:function(){var e=this;return $t(_a||(_a=g(['\n      <div id="tips">\n        <span>因以下理由申请撤销商业推广置顶：</span>\n      </div>\n      <div id="form">\n        ',"\n        ",'\n      </div>\n      <div id="footer">\n        <div id="action">\n          <button id="cancel" @click=','>取消</button>\n          <button id="confirm" @click=',">确定</button>\n        </div>\n      </div>\n    "])),this.options.map((function(t){return $t(Ea||(Ea=g(['<div class="option">\n              <bili-radio\n                label="','"\n                value="','"\n                checked="','"\n                @change=',"\n              ></bili-radio>\n            </div>"])),t.label,t.value,t.value===e.optionValue,e.handleOptionChange)})),0===this.optionValue?this.textareaTemplate():"",this.handleCancel,this.handleConfirm)}}]);var n,a}(dn);Mc.styles=vt(Ca||(Ca=g(["\n    :host {\n      padding: 16px;\n      display: flex;\n      flex-direction: column;\n    }\n    #tips {\n      display: flex;\n      align-items: center;\n      position: relative;\n      padding: 12px 0;\n      font-size: 14px;\n      border-radius: 4px;\n      color: var(--text1);\n      transition: 0.2s;\n      cursor: pointer;\n      margin-bottom: 12px;\n    }\n    #form {\n      min-height: 220px;\n    }\n    bili-radio {\n      --bili-radio-margin-inline-end: 0;\n      margin-bottom: 16px;\n    }\n    #input {\n    }\n    textarea {\n      box-sizing: border-box;\n      width: 100%;\n      height: 70px;\n      padding: 8px;\n      border: 1px solid var(--graph_weak);\n      border-radius: 4px;\n      outline: none;\n      resize: none;\n    }\n\n    #footer {\n      margin-top: 16px;\n    }\n    #footer #action {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    #action button {\n      -webkit-font-smoothing: antialiased;\n      border: 1px solid var(--brand_blue);\n      border-radius: 6px;\n      box-sizing: border-box;\n      cursor: pointer;\n      font-family: PingFang SC, HarmonyOS_Regular, Helvetica Neue, Microsoft YaHei, sans-serif !important;\n      font-weight: 400;\n      height: 32px;\n      outline: none;\n      transition: all 0.2s;\n      width: 130px;\n      margin-left: 12px;\n    }\n    #action button#cancel {\n      background-color: var(--bg1);\n      border-color: var(--line_regular);\n      color: var(--text1);\n    }\n    #action button#confirm {\n      background-color: var(--brand_blue);\n      border-color: var(--brand_blue);\n      color: var(--text_white);\n    }\n  "]))),Ic([mn({type:String,attribute:"data-type"})],Mc.prototype,"type",2),Ic([mn({type:String,attribute:"data-oid"})],Mc.prototype,"oid",2),Ic([mn({type:String,attribute:"data-rpid"})],Mc.prototype,"rpid",2),Ic([bn()],Mc.prototype,"maxInputLength",2),Ic([bn()],Mc.prototype,"optionValue",2),Ic([bn()],Mc.prototype,"inputValue",2),Ic([bn()],Mc.prototype,"options",2),Mc=Ic([hn("bili-comment-commercial-order-appeal-form")],Mc);function Lc(e){var t=[];if(!0!==e.can_modify)return t;var n=e.up_reply_selection,i=e.up_reply,r=e.up_dm;if(null!=n&&n.can_modify){var o=1===n.status;t.push({key:"select",text:o?"停止评论精选":"开启评论精选",data:{active:!o}})}if(null!=i&&i.can_modify){var a=1===i.status;t.push({key:"close",text:a?"关闭评论":"恢复评论",data:{active:!a}})}if(null!=r&&r.can_modify){var s=1===r.status;t.push({key:"close-danmaku",text:s?"关闭弹幕":"恢复弹幕",data:{active:!s}})}return t}function jc(e){var t=function(){var e;return(null==(e=document.getElementsByTagName("meta").spm_prefix)?void 0:e.content)||""}(),n={customTitle:"登录参与社区互动",hideClose:!1,origin:(null==e?void 0:e.origin)||"comments",spm_id_from:"".concat(t,".").concat((null==e?void 0:e.event)||"replyUnknowAction")};return jn(n)}var Rc=Object.defineProperty,Dc=Object.getOwnPropertyDescriptor,Nc=function(e,t,n,i){for(var r,o=i>1?void 0:i?Dc(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Rc(t,n,o),o},Bc=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.oid="",e.type=0,e.root="",e.user=null,e.upMid=0,e.likeCount=0,e.isLike=!1,e.isDislike=!1,e.showMoreMenu=!1,e.options=[],e}return p(t,e),s(t,[{key:"pubDate",get:function(){return function(e){var t=Math.floor((new Date).getTime()/1e3)-e,n=new Date;if(n.setHours(0),n.setMinutes(0),n.setSeconds(0),!(Math.floor(n.getTime()/1e3)<e&&t>=0)){var i=new Date;i.setTime(1e3*e);var r=i.getFullYear(),o=i.getMonth()+1>=10?i.getMonth()+1:"0".concat(i.getMonth()+1),a=i.getDate()>=10?i.getDate():"0".concat(i.getDate()),s=i.getHours()>=10?i.getHours():"0".concat(i.getHours()),l=i.getMinutes()>=10?i.getMinutes():"0".concat(i.getMinutes());return"".concat(r,"-").concat(o,"-").concat(a," ").concat(s,":").concat(l)}if(t<60){var c=10*Math.floor(t%60/10);return c>=10?"".concat(c,"秒前"):"刚刚"}return 60<=t&&t<3600?"".concat(Math.floor(t/60),"分钟前"):t>=3600?"".concat(Math.floor(t/3600),"小时前"):void 0}(this.data.ctime)}},{key:"likeIcon",get:function(){return this.isLike?"BDC/hand_thumbsup_fill/1":"BDC/hand_thumbsup_line/1"}},{key:"dislikeIcon",get:function(){return this.isDislike?"BDC/hand_thumbsdown_fill/2":"BDC/hand_thumbsdown_line/1"}},{key:"handleLikeState",value:(l=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mc("like"===t?"replyCardLikeClick":"replyCardHateClick",{rpid:this.data.rpid_str}),yc("click","comment.action.click",{rpid:this.data.rpid_str,action:t}),"like"!==t){e.next=3;break}return!this.isLike&&this.isDislike&&(this.isDislike=!1),this.isLike=!this.isLike,this.likeCount=this.isLike?this.likeCount+1:this.likeCount-1,e.abrupt("return");case 3:!this.isDislike&&this.isLike&&(this.isLike=!1,this.likeCount=this.likeCount-1),this.isDislike=!this.isDislike;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.initData()}},{key:"initData",value:function(){var e=this;this.likeCount=this.data.like,this.isLike=1===this.data.action,this.isDislike=2===this.data.action,this.options=function(e){var t=e.upMid,n=e.reply,i=e.user,r=e.top;if(!t)return console.warn("get comments actions warning: no up mid"),[];var o=[],a=(null==i?void 0:i.mid)===t;a&&"main"===e.ns&&o.push({key:"top",text:r?"取消置顶":"设为置顶",data:{active:!r}});var s=!i||String(i.mid)!==n.member.mid;if(s)if(o.push({key:"block",text:"加入黑名单"}),i){var l=i.is_jury,c=i.is_senior_member;l?o.push({key:"report",text:"风纪委举报",data:{hiddenJuryTips:!0}}):o.push({key:"report",text:c?"硬核会员举报":"举报"})}else o.push({key:"report",text:"举报"});return(a||!s||n.assist)&&o.push({key:"delete",text:"删除"}),o}({upMid:this.upMid,reply:this.data,user:this.user,top:this.data.reply_control.is_up_top||!1,ns:this.root?"reply":"main"}),setTimeout((function(){e.disposables.addEventListener(e.menu,"mouseleave",(function(){e.showMoreMenu=!1}))}))}},{key:"updated",value:function(e){e.get("data")&&this.initData()}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"handleLike",value:(a=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=3;break}return jc({event:"selfDef.replyCardLikeClick"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,nc({oid:this.oid,type:this.type,rpid:this.data.rpid,action:this.isLike?0:1});case 6:if(0===e.sent.code){e.next=10;break}return e.abrupt("return");case 10:this.handleLikeState("like"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(){return a.apply(this,arguments)})},{key:"handleHate",value:(n=i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=3;break}return jc({event:"selfDef.replyCardDisikeClick"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,ic({oid:this.oid,type:this.type,rpid:this.data.rpid,action:this.isDislike?0:1});case 6:if(0===e.sent.code){e.next=10;break}return e.abrupt("return");case 10:this.handleLikeState("dislike"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(){return n.apply(this,arguments)})},{key:"handleReply",value:function(){mc("replyCardReplyClick",{rpid:this.data.rpid_str}),yc("click","comment.action.click",{rpid:this.data.rpid_str,action:"reply"}),this.dispatchEvent(new CustomEvent("reply"))}},{key:"handleMore",value:function(){mc("replyCardMoreClick",{rpid:this.data.rpid_str}),yc("click","comment.action.click",{rpid:this.data.rpid_str,action:"more"}),this.showMoreMenu=!0}},{key:"handleSelectOption",value:function(e){yc("click","comment.action.click",{rpid:this.data.rpid_str,action:e.detail.key}),this.showMoreMenu=!1,this.user?this.dispatchEvent(new CustomEvent("action",{detail:e.detail})):jc({event:"selfDef.replyCardOptionClick"})}},{key:"render",value:function(){return $t(Sa||(Sa=g(['\n      <div id="pubdate">','</div>\n      <div id="like">\n        <button @click=','>\n          <bili-icon\n            size="16"\n            icon="','"\n            style="','"\n          ></bili-icon>\n          <span id="count">','</span>\n        </button>\n      </div>\n      <div id="dislike">\n        <button @click=','>\n          <bili-icon\n            size="16"\n            icon="','"\n            style="','"\n          ></bili-icon>\n        </button>\n      </div>\n      <div id="reply">\n        <button @click=','>回复</button>\n      </div>\n      <div id="more">\n        <button @click=','>\n          <bili-icon size="16" icon="BDC/more_vertical_fill/1"></bili-icon>\n        </button>\n        <bili-comment-menu\n          style="','"\n          .options=',"\n          @select=","\n        ></bili-comment-menu>\n      </div>\n    "])),this.pubDate,this.handleLike,this.likeIcon,this.isLike?On({color:"var(--brand_blue)"}):"",this.likeCount>0?this.likeCount:"",this.handleHate,this.dislikeIcon,this.isDislike?On({color:"var(--brand_blue)"}):"",this.handleReply,this.handleMore,this.showMoreMenu?On({"--bili-comment-menu-display":"block"}):"",this.options,this.handleSelectOption)}}]);var n,a,l}(dn);Bc.styles=vt(Ta||(Ta=g(["\n    :host {\n      width: 100%;\n      display: flex;\n      align-items: center;\n      position: relative;\n      margin-top: 3px;\n      font-size: 13px;\n      color: var(--text3);\n    }\n    :host > *:not(:first-child) {\n      margin-left: 20px;\n    }\n\n    button {\n      padding: 0;\n      outline: none;\n      border: none;\n      background: transparent;\n      height: 24px;\n      font-size: 13px;\n      color: var(--text3);\n      display: inline-flex;\n      align-items: center;\n      cursor: pointer;\n    }\n    button:hover {\n      color: var(--brand_blue);\n    }\n    button span {\n      margin-left: 5px;\n      display: inline-block;\n    }\n    button bili-icon {\n      vertical-align: middle;\n    }\n\n    #more {\n      margin-left: auto;\n      margin-right: 20px;\n      width: 24px;\n      height: 24px;\n      position: relative;\n    }\n    #more button {\n      width: 24px;\n      height: 24px;\n      text-align: center;\n      display: var(--bili-comment-action-buttons-more-display, none);\n    }\n  "]))),Nc([mn()],Bc.prototype,"data",2),Nc([mn()],Bc.prototype,"oid",2),Nc([mn()],Bc.prototype,"type",2),Nc([mn()],Bc.prototype,"root",2),Nc([mn()],Bc.prototype,"user",2),Nc([mn()],Bc.prototype,"upMid",2),Nc([bn()],Bc.prototype,"pubDate",1),Nc([bn()],Bc.prototype,"likeCount",2),Nc([bn()],Bc.prototype,"isLike",2),Nc([bn()],Bc.prototype,"isDislike",2),Nc([bn()],Bc.prototype,"showMoreMenu",2),Nc([bn()],Bc.prototype,"likeIcon",1),Nc([bn()],Bc.prototype,"options",2),Nc([wn("bili-comment-menu")],Bc.prototype,"menu",2),Bc=Nc([hn("bili-comment-action-buttons-renderer")],Bc);var zc=function(e){var t,n=v({},e);return null!=(t=e.pictures)&&t.length&&(n.pictures=JSON.stringify(e.pictures)),e.has_vote_option&&(n.has_vote_option="true"),tc.request({method:"POST",url:"/x/v2/reply/add",data:v(v({},n),{},{gaia_source:"main_web"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};function Uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fc(e,t){return Fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fc(e,t)}function Vc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fc(e,t)}function Hc(e){return Hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hc(e)}function Wc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wc=function(){return!!e})()}function $c(e){return $c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(e)}function qc(e){var t=Wc();return function(){var n,i=Hc(e);if(t){var r=Hc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uc(e)}(this,n)}}function Gc(e){var t=function(e,t){if("object"!=$c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=$c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$c(t)?t:String(t)}function Xc(e,t,n){return(t=Gc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Gc(i.key),i)}}function Yc(e,t,n){return t&&Zc(e.prototype,t),n&&Zc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Kc=Yc((function e(){Qc(this,e)})),Jc="widget-layer-avatar",eu=function(e){Vc(n,e);var t=qc(n);function n(){var e;Qc(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xc(Uc(e=t.call.apply(t,[this].concat(r))),"pos",{axis_x:1,axis_y:1,coordinate_pos:0}),Xc(Uc(e),"size",{height:1,width:1}),Xc(Uc(e),"render",{opacity:1}),e}return Yc(n,[{key:"setPos",value:function(e,t,n){return this.pos={axis_x:e,axis_y:t,coordinate_pos:n},this}},{key:"setSize",value:function(e,t){return this.size={height:t,width:e},this}},{key:"getValue",value:function(){return{pos_spec:this.pos,size_spec:this.size,render_spec:this.render}}}]),n}(Kc),tu=function(e){Vc(n,e);var t=qc(n);function n(){var e;Qc(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xc(Uc(e=t.call.apply(t,[this].concat(r))),"tags",{}),Xc(Uc(e),"isCritical",!1),Xc(Uc(e),"allowOverPaint",!1),Xc(Uc(e),"mask",null),e}return Yc(n,[{key:"setIsCritical",value:function(){return this.isCritical=!0,this}},{key:"setTag",value:function(e,t){return this.tags[e]=t,this}},{key:"getTag",value:function(e){return this.tags[e]}},{key:"setMask",value:function(e){return this.mask=e,this}},{key:"getValue",value:function(){return{tags:this.tags,is_critical:this.isCritical,allow_over_paint:this.allowOverPaint,layer_mask:this.mask}}}]),n}(Kc),nu=function(e){Vc(n,e);var t=qc(n);function n(){var e;Qc(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xc(Uc(e=t.call.apply(t,[this].concat(r))),"type",3),Xc(Uc(e),"image",void 0),Xc(Uc(e),"animation",void 0),Xc(Uc(e),"nativeDraw",void 0),e}return Yc(n,[{key:"setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.type=3,this.image=t?{image_src:{src_type:1,remote:{url:t,bfs_style:Jc},placeholder:e}}:{image_src:{src_type:2,local:e,placeholder:e}},this}},{key:"setAnimation",value:function(e,t){return this.type=4,this.animation={webp_src:{src_type:1,remote:{url:e,bfs_style:Jc},placeholder:t}},this}},{key:"setNativeDraw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff";return this.type=5,this.nativeDraw={draw_src:{src_type:3,placeholder:0,draw:{draw_type:e,fill_mode:null!=t?t:0,color_config:{day:{argb:n},is_dark_mode_aware:!1,night:{argb:n}},edge_weight:0}}},this}},{key:"getValue",value:function(){switch(this.type){case 3:return{res_type:this.type,res_image:this.image};case 4:return{res_type:this.type,res_animation:this.animation};case 5:return{res_type:this.type,res_native_draw:this.nativeDraw};default:return{res_type:this.type}}}}]),n}(Kc),iu=function(e){Vc(n,e);var t=qc(n);function n(){var e;Qc(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xc(Uc(e=t.call.apply(t,[this].concat(r))),"spec",new eu),Xc(Uc(e),"config",new tu),Xc(Uc(e),"resource",new nu),e}return Yc(n,[{key:"getConfigTag",value:function(e){return this.config.getTag(e)}},{key:"getValue",value:function(){return{layer_id:"",visible:!0,general_spec:this.spec.getValue(),layer_config:this.config.getValue(),resource:this.resource.getValue()}}}]),n}(Kc),ru=function(e){Vc(n,e);var t=qc(n);function n(){var e;Qc(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xc(Uc(e=t.call.apply(t,[this].concat(r))),"layers",[]),Xc(Uc(e),"mask",null),Xc(Uc(e),"isCritical",!1),e}return Yc(n,[{key:"setMask",value:function(e){return this.mask=e,this}},{key:"addLayer",value:function(e){return this.layers.push(e),this}},{key:"setIsCritical",value:function(){return this.isCritical=!0,this}},{key:"getValue",value:function(){return{group_id:"",layers:this.layers.map((function(e){return e.getValue()})),group_mask:this.mask,is_critical_group:this.isCritical}}}]),n}(Kc),ou=function(e){return"string"==typeof e?e:e.image||""},au=function(){var e=new iu;return e.config.setIsCritical().setTag("PENDENT_LAYER",{config_type:0}).setTag("GENERAL_CFG",{config_type:1,general_config:{web_css_style:{borderRadius:"50%"}}}),e},su=function(){var e=new iu;return e.config.setTag("ICON_LAYER",{config_type:0}).setTag("GENERAL_CFG",{config_type:1,general_config:{web_css_style:{"background-color":"rgb(255,255,255)",border:"2px solid rgba(255,255,255,1)",borderRadius:"50%",boxSizing:"border-box"}}}),e},lu=function(e,t){var n,i=new ru,r=e.face,o=e.pendant,a=e.official,s=e.vip,l=e.nft,c=null!==(n=e.a)&&void 0!==n?n:48,u=function(e){var t=new iu;return t.config.setIsCritical().setTag("AVATAR_LAYER",{config_type:0}).setTag("GENERAL_CFG",{config_type:1,general_config:{web_css_style:{borderRadius:"50%"}}}),t.resource.setImage(6,e),t}(r),d=1,p=null,h=o?ou(o):"";h&&(p=au()).resource.setImage(0,h);var f=[];l&&[1,2].includes(l)?(f.push(function(e){var t=su();return t.resource.setAnimation(1===e?"https://i0.hdslb.com/bfs/activity-plat/static/20220506/334553dd7c506a92b88eaf4d59ac8b4d/j8AeXAkEul.gif":"https://i0.hdslb.com/bfs/activity-plat/static/20220506/334553dd7c506a92b88eaf4d59ac8b4d/IOHoVs1ebP.gif",5),t}(l)),p?(p.spec.setSize(t,t).setPos(t/2,t/2,2),d=.94,u.spec.setSize(d,d).setPos(t/2,t/2,2)):(d=c>48?1.2:1.3,u.spec.setSize(d,d).setPos(t/2,t/2,2))):p?(p.spec.setPos(.6875,.6875,2).setSize(1.375,1.375),d=.787,u.spec.setSize(d,d).setPos(.6875,.6875,2)):u.spec.setSize(1,1).setPos(.675,.675,2);var v=function(e){var t=-1;return e&&(t="number"==typeof e?e:e.type),t}(a),m=function(e){if(!e)return!1;if(!0===e)return!0;if("string"==typeof e)return e;var t=e.type,n=e.status,i=e.avatar_subscript_url;return t>0&&1===n&&(i||!0)}(s);if(-1!==v?f.push(function(e){var t=su();return t.resource.setImage(0===e?3:4),t}(v)):m&&f.push(function(e){var t=su();return t.resource.setImage(1,e),t}("string"==typeof m?m:"")),i.addLayer(u),p&&i.addLayer(p),f.length){var b=function(e,t,n){switch(e){case 64:case 80:return(16+2*t)/e;default:return((1===n?16:14)+2*t)/e}}(c,2,f.length),y=(b*c-2)/c,g=t/2+d/2-y,w=g;p&&(g+=1/15,w+=.05),f.slice(0,2).reverse().forEach((function(e,t){e.spec.setSize(b,b).setPos(w-t*y,g,1),i.addLayer(e)}))}return i},cu=function(e){var t=function(e){var t,n=null!==(t=e.a)&&void 0!==t?t:48,i=e.pendant?ou(e.pendant):"";return 80===n?e.nft?i?1.8:1.65:1.5:e.nft?i?1.65:1.5:i?1.375:1.35}(e),n=lu(e,t),i={container_size:{width:t,height:t},fallback_layers:n.getValue(),mid:e.mid},r=function(e,t){var n=e.pendant;if(!n||"string"==typeof n||!n.image_enhance)return[];au().resource.setAnimation(n.image_enhance,0);var i=[];return t.layers.forEach((function(e){var t=new ru;e.getConfigTag("PENDENT_LAYER")&&e.resource.setAnimation(n.image_enhance,0),t.addLayer(e),i.push(t)})),i.map((function(e){return e.getValue()}))}(e,n);return r.length&&(i.layers=r),i},uu=!1,du=null;("undefined"==typeof window?"undefined":k(window))<"u"&&(uu="IntersectionObserver"in window);var pu=function(e){e.forEach((function(e){var t=function(e){return e.__i18r_callback__}(e.target);"function"==typeof t&&t(e)}))},hu=function(){return s((function e(t){o(this,e),this.showSupport=uu,this.type=t.type,this.el=t.el,this.handler=t.handler,this.value=t.value,this.modifiers=t.modifiers||{},this.init()}),[{key:"observeShow",value:function(e,t){du||(du=new IntersectionObserver(pu)),function(e,t){e.__i18r_callback__=t}(e,t),du.observe(e)}},{key:"unobserveShow",value:function(e){du&&(du.unobserve(e),function(e){delete e.__i18r_callback__}(e))}},{key:"observeClick",value:function(e,t){e.addEventListener("click",t)}},{key:"unobserveClick",value:function(e,t){e.removeEventListener("click",t)}},{key:"report",value:function(e){var t=this.value,n=t.event,i=t.data,r=this.modifiers.raw;"both"===this.type&&r&&console.warn("show and click event use raw will be same"),this.handler(e,r?n:"".concat(n,".").concat(e),i)}},{key:"init",value:function(){var e=this;if(this.el){var t=this.el,n=[];if("click"===this.type||"both"===this.type){var i=function(){e.report(e.modifiers.tech?"tech":"click")};n.push((function(){e.unobserveClick(t,i)})),this.observeClick(t,i)}if("show"===this.type||"both"===this.type)if(this.showSupport){var r=!1;n.push((function(){r||(e.unobserveShow(t),r=!0)})),this.observeShow(t,(function(n){n.isIntersecting&&(e.report(e.modifiers.tech?"tech":"show"),e.unobserveShow(t),r=!0)}))}else console.warn("IntersectionObserver not supported");this.removeListener=function(){n.forEach((function(e){e()}))}}}},{key:"update",value:function(e){this.value=e}},{key:"dispose",value:function(){var e;null==(e=this.removeListener)||e.call(this),this.el=null}}])}();function fu(e){var t=document.createElement("bili-modal");document.body.appendChild(t),t.show(v(v({},e),{},{final:function(){var n;null==(n=e.final)||n.call(e),document.body.removeChild(t)}}))}function vu(e){return new Promise((function(t,n){var r=v({},e),o=!1===e.confirm,a=!1===e.cancel;if(o&&a)return n("Not allow confirm and cancel both false");function s(n){var o,a,s,l="confirm"===n,c=null!==(o=e[n])&&void 0!==o?o:l?"确定":"取消";if("function"==typeof c)r[n]=function(){var e=i(m().mark((function e(n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="function"==typeof c,!e.t0){e.next=4;break}return e.next=4,c(n);case 4:t(l);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();else if("string"==typeof c)r[n]={text:c,click:(s=i(m().mark((function e(n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:t(l);case 3:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})};else{var u=c;r[n]={text:u.text||("confirm"===n?"确定":"取消"),click:(a=i(m().mark((function e(n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.click(n);case 2:t(l);case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}}}o||a?e.final=function(){return t(o)}:(s("confirm"),s("cancel")),fu(r)}))}var mu="//www.bilibili.com",bu="//space.bilibili.com",yu="//search.bilibili.com",gu="//bangumi.bilibili.com",wu="//t.bilibili.com",xu="//live.bilibili.com",ku=function(e){return/https?:/.test(e)?e:(e.startsWith("//")||(e="//".concat(e)),"".concat(location.protocol).concat(e))},Au=function(e,t){var n=new URL(ku(e));return Object.keys(t).forEach((function(e){n.searchParams.has(e)&&n.searchParams.delete(e),n.searchParams.append(e,encodeURIComponent(t[e]))})),n.toJSON()},_u={DYN:function(e){return"".concat(wu,"/").concat(e)},SPACE:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(bu,"/").concat(e).concat(t)},VIDEO:function(e){var t=e.bvid,n=e.avid,i=e.ssid,r=e.epid;return t?"".concat(mu,"/video/").concat(t,"/"):n?"".concat(mu,"/video/av").concat(n,"/"):i?"".concat(mu,"/bangumi/play/ss").concat(i):r?"".concat(mu,"/bangumi/play/ep").concat(i):""},ARTICLE:function(e){return"".concat(mu,"/read/cv").concat(e,"/")},PGC:function(e){return"".concat(gu,"/anime/").concat(e)},LIVE:function(e){return"".concat(xu,"/").concat(e)},SEARCH:function(e){return Au("".concat(yu,"/all"),{keyword:e})},LOTTERY:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i="".concat(wu,"/lottery/h5/index/#/result");return n&&(i="".concat(mu,"/h5/lottery/result")),Au(i,{business_type:String(e),business_id:String(t),isWeb:"1"})},VOTE:function(e,t){return t||(t="comment"),"//t.bilibili.com/h5/dynamic/vote/#/result?vote_id=".concat(e,"&from=").concat(t,"&isWeb=1")}};function Eu(e){return Object.keys(e).map((function(t){return"".concat(t,":").concat(e[t])})).join(";")}function Cu(e,t){return function(e,t,n){var i=[];return t&&Object.keys(t).forEach((function(e){void 0!==t[e]&&i.push("".concat(e,'="').concat(t[e],'"'))})),"<".concat(e).concat(i.length?" ".concat(i.join(" ")):"",">").concat(n?Array.isArray(n)?n.join(""):n:"","</").concat(e,">")}("iframe",{src:e,style:t||""})}function Su(e){var t=document.createElement("bili-comments-popup");e.mask&&(t.setAttribute("mask",""),!1!==e.maskClosable&&t.setAttribute("maskClosable","")),t.style.zIndex=$i().toString(),t.setAttribute("title",e.title),e.width&&t.setAttribute("width",e.width.toString());var n=e.render();return"string"==typeof n?t.innerHTML=n:t.appendChild(n),document.body.appendChild(t),t}function Tu(e){return Su({title:"投票详情",width:550,render:function(){return Cu(_u.VOTE(e),Eu({"min-height":"550px"}))},mask:!0})}function Ou(e){var t,n,i,r,o=document.createElement("bili-comment-report-form");o.dataset.type=String(e.type),o.dataset.oid=e.oid,o.dataset.rpid=e.rpid,o.dataset.mid=null!==(t=null==(i=e.member)?void 0:i.mid)&&void 0!==t?t:"",o.dataset.uname=null!==(n=null==(r=e.member)?void 0:r.uname)&&void 0!==n?n:"",o.dataset.ordering=e.ordering;var a=Su({title:"请选择举报理由",width:520,mask:!0,maskClosable:!0,render:function(){return o}});o.addEventListener("hide",(function(){a.parentElement&&a.parentElement.removeChild(a)}))}function Pu(){var e=document.createElement("bili-comment-update-uname-form"),t=Su({title:"设置昵称",width:380,mask:!0,maskClosable:!0,render:function(){return e}});e.addEventListener("hide",(function(){t.parentElement&&t.parentElement.removeChild(t)}))}function Iu(e){var t=document.createElement("bili-comment-commercial-order-appeal-form");t.dataset.type=String(e.type),t.dataset.oid=String(e.oid),t.dataset.rpid=e.rpid;var n=Su({title:"申请撤销推广置顶",width:520,mask:!0,maskClosable:!0,render:function(){return t}});t.addEventListener("hide",(function(){n.parentElement&&n.parentElement.removeChild(n)}))}var Mu=Object.defineProperty,Lu=Object.getOwnPropertyDescriptor,ju=function(e,t,n,i){for(var r,o=i>1?void 0:i?Lu(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Mu(t,n,o),o},Ru=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.oid="",e.type=0,e.mode=3,e.reply=null,e.user=null,e.avatarSize=48,e.keepActive=!1,e.active=!1,e.activeToggleTimer=0,e.inputValue="",e.placeholder="",e.voteOption=null,e.scrollContainer=null,e.pubBtnText="发布",e.uploadPicState=1,e.voteOptionHidden=!1,e.syncToDynamic=!1,e.showEmojiPicker=!1,e.mountEmojiPicker=!1,e.pics=[],e.mentionMap={},e.mentionText="",e.trackObserver=null,e}return p(t,e),s(t,[{key:"hasContent",get:function(){return!!this.inputValue||this.pics.length>0||this.syncToDynamic}},{key:"uploadImgExts",get:function(){return["jpg","jpeg","png"]}},{key:"addNamespace",get:function(){return this.reply?vc:fc}},{key:"showPicBtn",get:function(){return this.addNamespace===fc&&3!==this.uploadPicState}},{key:"showSyncToDynamic",get:function(){return this.addNamespace===fc}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),setTimeout((function(){var t,n,i,r,o,a,s;e.biliAvatar.load(cu({face:(null==(n=e.user)?void 0:n.face)||"",mid:(null==(i=e.user)?void 0:i.mid)||0,pendant:(null==(r=e.user)?void 0:r.pendant)||"",vip:null==(o=e.user)?void 0:o.vip,official:null==(a=e.user)?void 0:a.official,nft:null!==(t=null==(s=e.user)?void 0:s.face_nft_type)&&void 0!==t?t:0}),{baseSize:e.avatarSize,isFloat:!0})})),this.disposables.addEventListener(document.documentElement,"click",(function(t){"none"!==e.style.getPropertyValue("--bili-comment-box-display")&&t.composedPath&&(t.composedPath().includes(e.shadowRoot)||e.handleDeactive())}),!0),this.trackObserver=new hu({el:this,type:"show",value:{event:"comment_box.all",data:{type:this.type,oid:this.oid,version:"v2"}},handler:function(e,t,n){"show"===e&&yc(e,t,n)}}),this.disposables.add((function(){e.trackObserver&&(e.trackObserver.dispose(),e.trackObserver=null)}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"handleActive",value:function(){var e={type:this.type,oid:this.oid,position:this.addNamespace===fc?1:3};mc("replyInputClick",e),yc("click","comment_box.textarea",e),this.active||this.voteOption&&this.voteOptionHidden&&(this.voteOptionHidden=!1),this.toggleActive(!0,20),this.handleMentionStart(this.textarea.getSelection())}},{key:"handleDeactive",value:function(){this.keepActive||(this.mentionPopover.refresh(null),this.showEmojiPicker=!1,!this.hasContent&&this.toggleActive(!1,0))}},{key:"toggleActive",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;this.activeToggleTimer&&(window.clearTimeout(this.activeToggleTimer),this.activeToggleTimer=0),this.activeToggleTimer=window.setTimeout((function(){t.active=e}),n)}},{key:"handleFocusInput",value:function(){var e=this;window.setTimeout((function(){e.focus()}),20)}},{key:"handleInputChange",value:function(e){this.inputValue=e.detail}},{key:"handleMentionStart",value:function(e){if(!this.showEmojiPicker){var t=e.start;if(t===e.end){var n=function(e){var t=e.lastIndexOf("@");if(-1===t)return null;var n=e.substring(t+1);return n.length<=16&&!/\s/.test(n)?n:null}(this.inputValue.slice(0,t));if(null!==n){this.mentionText=n;var i=this.getBoundingClientRect(),r=window.innerHeight;this.scrollContainer&&this.scrollContainer!==document.body&&(r=this.scrollContainer.getBoundingClientRect().height),r<i.y+325?(this.mentionPopover.style.top="",this.mentionPopover.style.bottom="".concat(i.height,"px"),this.mentionPopover.style.setProperty("--max-content-height","160px")):(this.mentionPopover.style.removeProperty("--max-content-height"),this.mentionPopover.style.bottom="",this.mentionPopover.style.top="32px"),this.mentionPopover.style.zIndex="".concat($i())}if(this.mentionPopover.refresh(n),null!==n){var o={oid:this.oid,type:this.type};bc("show","comment.at_recomlist",o),yc("show","comment_box.mention_popover",o)}}}}},{key:"handleMentionEnd",value:function(e){var t=e.detail,n=t.name,i=t.mid,r=this.mentionText,o=this.textarea.getSelection();this.textarea.insertText("@".concat(n," "),{start:o.start-r.length-1,end:o.end}),this.mentionText="",this.mentionMap[n]=i;var a={oid:this.oid,type:this.type,mid:i};bc("click","comment.at_recomlist",a),yc("click","comment_box.mention_popover",a)}},{key:"handleSelectionChange",value:function(e){this.handleMentionStart(e.detail)}},{key:"handleHideVoteOption",value:function(e){e.stopPropagation(),this.voteOptionHidden=!0}},{key:"handleReset",value:function(){this.inputValue="",this.mentionMap={},this.picturesUpload.reset(),this.syncToDynamic&&(this.syncToDynamic=!1),this.toggleActive(!1),this.addNamespace===vc&&hc.emit("hideReply")}},{key:"handleTool",value:function(e,t){var n=this;t.stopPropagation();var i={tool_type:e,type:this.type,oid:this.oid,position:this.addNamespace===fc?1:3};if(yc("click","comment_box.tool",i),"emoji"!==e){if(this.showEmojiPicker=!1,"mention"===e)return bc("click","comment.at_button",i),void setTimeout((function(){n.textarea.insertText("@")}));"pic"!==e||this.handleUploadPic()}else{if(mc("replyEmojiClick",i),!this.mountEmojiPicker&&!this.showEmojiPicker&&(this.mountEmojiPicker=!0),this.showEmojiPicker=!this.showEmojiPicker,this.showEmojiPicker){this.emojiPopover.style.zIndex="".concat($i());var r=this.getBoundingClientRect().bottom;window.innerHeight-r<300?(this.emojiPopover.style.removeProperty("bottom"),this.emojiPopover.style.setProperty("top","0"),this.emojiPopover.style.setProperty("transform","translateY(-100%)")):(this.emojiPopover.style.removeProperty("top"),this.emojiPopover.style.setProperty("bottom","0"),this.emojiPopover.style.setProperty("transform","translateY(100%)"))}this.textarea.focus()}}},{key:"handleUploadPic",value:function(){this.picturesUpload.trigger()}},{key:"handlePicsChange",value:(a=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.pics=w(t.detail)}catch(e){Jl.show(e.message)}case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleSelectEmoji",value:function(e){var t=this;setTimeout((function(){t.textarea.insertText(e.detail.text)}))}},{key:"handleSyncToDynamicChange",value:function(e){this.syncToDynamic=e.detail.checked}},{key:"handlePublish",value:(n=i(m().mark((function e(t){var n,i,r,o,a,s,l,c,u,d,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),this.showEmojiPicker=!1,this.inputValue){e.next=3;break}return Jl.show("你还没有评论！"),e.abrupt("return");case 3:return n=0,e.prev=4,i={plat:1,oid:this.oid,type:this.type,message:""},r=this.inputValue,this.reply&&(i.root=this.reply.rpid_str,this.reply.parent?(i.parent=this.reply.parent_str,this.placeholder&&(r="".concat(this.placeholder).concat(r))):i.parent=this.reply.rpid_str),i.message=r,this.voteOption&&!this.voteOptionHidden&&(i.has_vote_option=!0),Object.keys(this.mentionMap)&&(i.at_name_to_mid=this.mentionMap),this.pics.length&&(i.pictures=this.pics),this.syncToDynamic&&(i.sync_to_dynamic=1),e.next=10,zc(i);case 10:if(o=e.sent,a=o.code,s=o.data,l=o.message,0===a&&s){e.next=24;break}e.t0=a,e.next=12074===e.t0?18:61001===e.t0?20:22;break;case 18:return n=1,e.abrupt("break",23);case 20:return n=2,e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:throw new Error(l||"发布失败");case 24:Jl.show(s.success_toast||"发布成功"),hc.emit("add",{namespaces:[this.addNamespace],method:this.addNamespace===fc?"unshift":"push",value:s.reply}),this.handleReset(),s.easter_egg&&(c=s.easter_egg,u=c.resource,d=c.jump_url,hc.emit("displayAlphaVideo",{src:u,jumpUrl:d})),p={type:this.type,oid:this.oid,root:i.root,parent:i.parent,ordering:3===this.mode?"heat":"time",position:this.addNamespace===fc?1:3},mc("reply-send-click",p),mc("replySendClick",p),yc("click","comment_box.pub_btn",p),e.next=38;break;case 29:if(e.prev=29,e.t1=e.catch(4),1!==n){e.next=34;break}return Pu(),e.abrupt("return");case 34:if(2!==n){e.next=37;break}return vu({title:"请绑定手机号",message:"根据国家实名制认证的相关要求，您需要绑定手机号，才能继续进行操作。",cancel:!1,confirm:function(){window.open("//passport.bilibili.com/account/security#/bindphone/unverify/set")}}),e.abrupt("return");case 37:Jl.show(e.t1.message);case 38:case"end":return e.stop()}}),e,this,[[4,29]])}))),function(e){return n.apply(this,arguments)})},{key:"focus",value:function(){this.textarea.focus()}},{key:"blur",value:function(){this.textarea.blur()}},{key:"voteOptionTemplate",value:function(){return $t(Oa||(Oa=g(['<div\n      id="vote-option"\n      class="','"\n    >\n      <bili-comment-vote-option .data=',"></bili-comment-vote-option>\n      <bili-icon @click=",' size="12" icon="BDC/xmark_close_circle_fill/1"></bili-icon>\n    </div>'])),this.voteOptionHidden?ea({hidden:!0}):"",this.voteOption,this.handleHideVoteOption)}},{key:"render",value:function(){var e=this;return $t(Pa||(Pa=g(['\n      <div id="user-avatar">\n        <bili-avatar></bili-avatar>\n      </div>\n      <div id="comment-area">\n        <div\n          id="emoji-popover"\n          style=',"\n        >\n          ",'\n        </div>\n        <div id="body">\n          <div\n            id="editor"\n            class=',"\n            @click=","\n          >\n            ","\n            <bili-comment-textarea\n              .value=","\n              .placeholder=","\n              @focus=","\n              @change=","\n              @selection-change=","\n            ></bili-comment-textarea>\n            <bili-comment-pictures-upload .accept="," @change=",'></bili-comment-pictures-upload>\n          </div>\n        </div>\n        <div\n          id="footer"\n          class=','\n        >\n          <button class="tool-btn emoji" @click=','>\n            <bili-icon icon="BDC/emoji_circle_line/1" size="16"></bili-icon>\n          </button>\n          <button\n            class="tool-btn mention"\n            @click=','\n          >\n            <bili-icon icon="BDC/at_line/1" size="16"></bili-icon>\n          </button>\n          <bili-comment-mention-popover @select=',"></bili-comment-mention-popover>\n          ","\n          ",'\n          <div id="pub">\n            <button\n              class=',"\n              @click=","\n            >\n              ","\n            </button>\n          </div>\n        </div>\n      </div>\n    "])),On({display:this.showEmojiPicker?"block":"none"}),this.mountEmojiPicker?$t(Ia||(Ia=g(["<bili-emoji-picker @select=","></bili-emoji-picker>"])),this.handleSelectEmoji):"",this.keepActive||this.active?ea({active:!0}):"",this.handleFocusInput,this.voteOption?this.voteOptionTemplate():"",this.inputValue,this.placeholder,this.handleActive,this.handleInputChange,this.handleSelectionChange,this.uploadImgExts,this.handlePicsChange,ea({hidden:!this.keepActive&&!this.active}),(function(t){return e.handleTool("emoji",t)}),(function(t){e.handleTool("mention",t)}),this.handleMentionEnd,this.showPicBtn?$t(Ma||(Ma=g(['<button\n                class="','"\n                @click=','\n              >\n                <bili-icon icon="BDC/image_line/3" size="16"></bili-icon>\n              </button>'])),ea({"tool-btn":!0,disabled:2===this.uploadPicState}),(function(t){2!==e.uploadPicState&&e.handleTool("pic",t)})):"",this.showSyncToDynamic?$t(La||(La=g(['<div id="optional">\n                <bili-checkbox\n                  checked=','\n                  value="sync"\n                  label="同时转发到我的动态"\n                  @change=',"\n                ></bili-checkbox>\n              </div>"])),this.syncToDynamic,this.handleSyncToDynamicChange):"",ea({active:!!this.inputValue}),this.handlePublish,this.pubBtnText)}}]);var n,a}(dn);Ru.styles=vt(ja||(ja=g(["\n    :host {\n      --bili-comment-box-display: flex;\n      display: var(--bili-comment-box-display);\n    }\n\n    #user-avatar {\n      flex-shrink: 0;\n      width: 80px;\n      height: 50px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    #user-avatar img {\n      border-radius: 50%;\n    }\n    #comment-area {\n      position: relative;\n      width: calc(100% - 80px);\n    }\n    #emoji-popover {\n      position: absolute;\n      left: 0;\n    }\n\n    #body {\n      width: 100%;\n      transition: height 0.2s;\n    }\n    #editor {\n      width: 100%;\n      padding: 8px 0;\n      border: 1px solid var(--Ga1);\n      box-sizing: border-box;\n      border-radius: 6px;\n      background-color: var(--bg3);\n      transition: 0.2s;\n      cursor: text;\n    }\n    #editor:hover,\n    #editor.active {\n      background-color: var(--bg1);\n      border-color: var(--graph_weak);\n    }\n    #editor.active #vote-option {\n      display: flex;\n    }\n    #editor #vote-option {\n      display: none;\n      padding: 0 8px;\n      align-items: center;\n      margin-bottom: 4px;\n    }\n    #editor #vote-option.hidden {\n      display: none;\n    }\n    #editor #vote-option bili-comment-vote-option {\n      margin-right: 4px;\n    }\n    #editor #vote-option bili-icon {\n      color: var(--text4);\n      cursor: pointer;\n    }\n    #editor bili-comment-pictures-upload {\n      margin-top: 8px;\n    }\n    bili-comment-mention-popover {\n      left: 38px;\n      z-index: 2;\n    }\n    #pub {\n      height: 32px;\n      width: 70px;\n      margin-left: auto;\n    }\n    #pub button {\n      cursor: pointer;\n      border-radius: 4px;\n      outline: none;\n      border: none;\n      width: 100%;\n      height: 100%;\n      font-size: 16px;\n      color: var(--text_white);\n      background-color: rgba(var(--brand_blue_rgb), 0.5);\n    }\n    #pub button:hover,\n    #pub button.active {\n      background-color: var(--brand_blue);\n    }\n\n    #footer {\n      position: relative;\n      margin-top: 10px;\n      display: flex;\n      align-items: center;\n    }\n\n    #footer.hidden {\n      display: none;\n    }\n\n    #footer #optional bili-checkbox {\n      transform: scale(0.8);\n    }\n    #footer #optional bili-checkbox label {\n      margin-left: 6px;\n    }\n\n    /* 设置slot 隐藏 */\n    #footer bili-popover > * {\n      display: none;\n    }\n\n    .tool-btn {\n      outline: none;\n      border: none;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: relative;\n      width: 32px;\n      height: 26px;\n      border: 1px solid var(--Ga1);\n      background-color: var(--bg1);\n      border-radius: 4px;\n      color: var(--text2);\n      cursor: pointer;\n      margin-right: 6px;\n    }\n    .tool-btn.disabled {\n      color: var(--text4);\n      cursor: not-allowed;\n    }\n  "]))),ju([mn()],Ru.prototype,"oid",2),ju([mn()],Ru.prototype,"type",2),ju([mn()],Ru.prototype,"mode",2),ju([mn()],Ru.prototype,"reply",2),ju([mn()],Ru.prototype,"user",2),ju([mn({type:Boolean})],Ru.prototype,"keepActive",2),ju([bn()],Ru.prototype,"active",2),ju([mn({type:String})],Ru.prototype,"inputValue",2),ju([mn({type:String})],Ru.prototype,"placeholder",2),ju([mn({type:Object})],Ru.prototype,"voteOption",2),ju([mn()],Ru.prototype,"scrollContainer",2),ju([mn({type:String})],Ru.prototype,"pubBtnText",2),ju([mn()],Ru.prototype,"uploadPicState",2),ju([bn()],Ru.prototype,"voteOptionHidden",2),ju([bn()],Ru.prototype,"syncToDynamic",2),ju([bn()],Ru.prototype,"showEmojiPicker",2),ju([bn()],Ru.prototype,"mountEmojiPicker",2),ju([bn()],Ru.prototype,"pics",2),ju([bn()],Ru.prototype,"hasContent",1),ju([bn()],Ru.prototype,"uploadImgExts",1),ju([bn()],Ru.prototype,"addNamespace",1),ju([bn()],Ru.prototype,"showPicBtn",1),ju([bn()],Ru.prototype,"showSyncToDynamic",1),ju([wn("bili-avatar")],Ru.prototype,"biliAvatar",2),ju([wn("#editor bili-comment-textarea")],Ru.prototype,"textarea",2),ju([wn("#emoji-popover")],Ru.prototype,"emojiPopover",2),ju([wn("bili-comment-mention-popover")],Ru.prototype,"mentionPopover",2),ju([wn("#editor bili-comment-pictures-upload")],Ru.prototype,"picturesUpload",2),Ru=ju([hn("bili-comment-box")],Ru);var Du=function(e){return tc.request({url:"/x/v2/reply/at",params:v({},e)})};var Nu=Object.defineProperty,Bu=Object.getOwnPropertyDescriptor,zu=function(e,t,n,i){for(var r,o=i>1?void 0:i?Bu(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Nu(t,n,o),o},Uu=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).keyword="",e.groups=[],e}return p(t,e),s(t,[{key:"handleVisible",value:function(e){this.style[e?"setProperty":"removeProperty"]("display","flex")}},{key:"refresh",value:(n=i(m().mark((function e(t){var n,i,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.groups=[],null!==t){e.next=3;break}return this.keyword="",this.handleVisible(!1),e.abrupt("return");case 3:return this.keyword=t,e.prev=4,e.next=7,Du({keyword:t});case 7:n=e.sent,i=n.code,r=n.data,0===i&&null!=r&&r.groups&&(this.groups=r.groups),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:this.handleVisible(!0);case 17:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(e){return n.apply(this,arguments)})},{key:"handleSelect",value:function(e){var t=e.target.dataset,n=Number(t.group),i=Number(t.item);if(!isNaN(n)&&!isNaN(i)){var r=this.groups[n].items[i];r&&this.dispatchEvent(new CustomEvent("select",{detail:{mid:r.mid,name:r.name}}))}}},{key:"renderKeywordName",value:function(e){if(this.keyword){var t=e.indexOf(this.keyword);if(t>-1)return $t(Ra||(Ra=g(["","<em>","</em>",""])),e.slice(0,t),this.keyword,e.slice(t+this.keyword.length))}return $t(Da||(Da=g(["",""])),e)}},{key:"renderCountDesc",value:function(e){return"".concat(function(e,t){var n=parseInt(e,10);return Number.isNaN(n)||n<0?"":n>=1e4&&n<1e8?(n/1e4).toFixed(1)+(t?"萬":"万"):n>=1e8?(n/1e8).toFixed(1)+(t?"億":"亿"):/\./.test(e)?e:n}(e),"粉丝")}},{key:"itemTemplate",value:function(e,t,n){return $t(Na||(Na=g(['<li class="item" data-group="','" data-item="','" @click=','>\n      <div class="item-avatar">\n        <img\n          src="','"\n        />\n      </div>\n      <div class="item-info">\n        <div class="item-name">','</div>\n        <div class="item-desc">',"</div>\n      </div>\n    </li>"])),n,t,this.handleSelect,Kn.getBmgSrcNext(e.face,{w:36,h:36,dpr:2}),this.renderKeywordName(e.name),this.renderCountDesc(e.fan))}},{key:"render",value:function(){var e=this;return $t(Ba||(Ba=g(['<div id="title">选择或输入你想@的人</div>\n      ',""])),this.groups.length?$t(za||(za=g(['<div id="content">\n            ',"\n          </div>"])),this.groups.map((function(t,n){return $t(Ua||(Ua=g(['<div class="group">\n                <div class="group-name">','</div>\n                <ul class="group-items">\n                  ',"\n                </ul>\n              </div>"])),t.group_name,t.items.map((function(t,i){return e.itemTemplate(t,i,n)})))}))):"")}}]);var n}(dn);Uu.styles=vt(Fa||(Fa=g(["\n    :host {\n      --max-content-height: 282px;\n      position: absolute;\n      display: none;\n      flex-direction: column;\n      width: 219px;\n      border: 1px solid var(--graph_bg_thick);\n      border-radius: 6px;\n      font-size: 12px;\n      background-color: var(--bg1);\n      box-shadow: 0 2px 10px #00000014;\n    }\n    #title {\n      width: 100%;\n      height: 41px;\n      padding: 12px;\n      color: var(--text2);\n      font-size: 12px;\n      box-sizing: border-box;\n    }\n    #content {\n      max-height: var(--max-content-height);\n      overflow-x: hidden;\n      overflow-y: scroll;\n    }\n    #content::-webkit-scrollbar {\n      width: 4px;\n      border-radius: 4px;\n      background-color: transparent;\n    }\n    #content::-webkit-scrollbar-thumb {\n      border-radius: 4px;\n      border-radius: 4px;\n      background-color: var(--graph_bg_thick);\n      transition: 0.3s ease-in-out;\n    }\n    #content::-webkit-scrollbar-track {\n      border-radius: 4px;\n      background-color: transparent;\n    }\n\n    .group {\n    }\n    .group-name {\n      padding: 0 12px;\n      color: var(--text2);\n    }\n    .group-items {\n      padding: 0;\n      margin: 0;\n    }\n    .item {\n      display: flex;\n      align-items: center;\n      height: 52px;\n      padding: 0 12px;\n      margin: 4px 0;\n      cursor: pointer;\n      box-sizing: border-box;\n    }\n    .item:hover {\n      background-color: var(--bg2_float);\n    }\n    .item-avatar {\n      width: 36px;\n      height: 36px;\n      margin-right: 8px;\n      pointer-events: none;\n    }\n    .item-avatar img {\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n    }\n    .item-info {\n      font-size: 12px;\n      color: var(--text1);\n      pointer-events: none;\n    }\n    .item-name em {\n      color: var(--brand_blue);\n      font-style: normal;\n    }\n    .item-desc {\n      color: var(--text3);\n    }\n  "]))),zu([bn()],Uu.prototype,"keyword",2),zu([bn()],Uu.prototype,"groups",2),Uu=zu([hn("bili-comment-mention-popover")],Uu);var Fu=Object.defineProperty,Vu=Object.getOwnPropertyDescriptor,Hu=function(e,t,n,i){for(var r,o=i>1?void 0:i?Vu(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Fu(t,n,o),o},Wu=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).options=[],e}return p(t,e),s(t,[{key:"handleClick",value:function(e){this.dispatchEvent(new CustomEvent("select",{detail:e}))}},{key:"render",value:function(){var e=this;return $t(Va||(Va=g(['\n      <ul id="options">\n        ',"\n      </ul>\n    "])),this.options.map((function(t){return $t(Ha||(Ha=g([" <li @click=",">","</li> "])),(function(){return e.handleClick(t)}),t.text)})))}}])}(dn);Wu.styles=vt(Wa||(Wa=g(["\n    :host {\n      --bili-comment-menu-display: none;\n      --bili-comment-menu-position: absolute;\n      --bili-comment-menu-top: 20px;\n      --bili-comment-menu-right: 0;\n    }\n    #options {\n      display: var(--bili-comment-menu-display);\n      position: var(--bili-comment-menu-position);\n      top: var(--bili-comment-menu-top);\n      right: var(--bili-comment-menu-right);\n      margin: 0;\n      padding: 0;\n      z-index: 10;\n      width: 120px;\n      list-style: none;\n      border-radius: 4px;\n      font-size: 14px;\n      color: var(--text1);\n      background-color: var(--bg1);\n      box-shadow: 0 0 5px #0003;\n    }\n\n    #options li {\n      box-sizing: border-box;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      height: 36px;\n      padding: 0 15px;\n      cursor: pointer;\n      user-select: none;\n    }\n    #options li:hover {\n      background-color: var(--bg3);\n      color: var(--brand_blue);\n    }\n  "]))),Hu([mn()],Wu.prototype,"options",2),Wu=Hu([hn("bili-comment-menu")],Wu);var $u=function(e,t){document.createElement("bili-photoswipe").open({dataSource:e,index:t||0})},qu=Object.defineProperty,Gu=Object.getOwnPropertyDescriptor,Xu=function(e,t,n,i){for(var r,o=i>1?void 0:i?Gu(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&qu(t,n,o),o},Zu=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).list=[],e}return p(t,e),s(t,[{key:"items",get:function(){return function(e,t){var n,i=[],r=1===e.length,o=l(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.img_src,c=a.img_width,u=a.img_height,d=t.multiple,p=d.width,h=d.height,f=c>u,m=Math.floor(f?c/u:u/c)>=3,b={x:0,y:0,w:p,h:h};if(r){var y=t.single[f?"horizontal":"vertical"],g=y.width/y.height,w=c/u;m||!f&&c>y.width&&u>y.height?(p=y.width,h=y.height,b.w=p,b.h=h):w>g?(p=y.width,h=Math.floor(p/w)):(h=y.height,p=Math.floor(h*w))}i.push({width:p,height:h,src:Kn.getBmgSrcNext(s,v(v({w:m&&f?0:p,h:m&&!f?0:h,s:!0},m?{a:b}:{c:!r}),{},{dpr:2})),original:a})}}catch(e){o.e(e)}finally{o.f()}return i}(this.list,{single:{horizontal:{width:240,height:135},vertical:{width:135,height:180}},multiple:{width:88,height:88}}).slice(0,8)}},{key:"handleView",value:function(e){$u(this.list.map((function(e){return{src:e.img_src,width:e.img_width,height:e.img_height}})),e||0)}},{key:"render",value:function(){var e=this;return $t($a||($a=g(['\n      <div id="content">\n        ',"\n        ","\n      </div>\n    "])),this.items.map((function(t,n){return $t(qa||(qa=g([' <img\n            src="','"\n            width="','"\n            height="','"\n            loading="lazy"\n            @click=',"\n          />"])),t.src,t.width,t.height,(function(){return e.handleView(n)}))})),this.list.length>this.items.length?$t(Ga||(Ga=g(['<div id="more-tag">+',"</div>"])),this.list.length-this.items.length):"")}}])}(dn);function Yu(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(){n(new Error("blobToBase64 error"))},i.readAsDataURL(e)}))}function Qu(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}Zu.styles=vt(Xa||(Xa=g(["\n    :host {\n    }\n    #content {\n      position: relative;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n      max-width: 364px;\n    }\n    #content img {\n      display: block;\n      border-radius: var(--bili-comment-picutres-border-radius, 6px);\n      cursor: zoom-in;\n    }\n    #more-tag {\n      position: absolute;\n      right: 4px;\n      bottom: 4px;\n      height: 20px;\n      padding: 0 6px;\n      border-radius: 4px;\n      font-size: 13px;\n      color: var(--text_white);\n      font-weight: 500;\n      line-height: 18px;\n      background: rgba(0, 0, 0, 0.7);\n      pointer-events: none;\n    }\n  "]))),Xu([mn({type:Array})],Zu.prototype,"list",2),Xu([bn()],Zu.prototype,"items",1),Zu=Xu([hn("bili-comment-pictures-renderer")],Zu);var Ku,Ju,ed,td,nd,id,rd,od,ad,sd,ld,cd,ud,dd,pd,hd,fd,vd,md=function(e,t,n){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bd=function(e,t,n){return function(e,t,n){if(!t.has(e))throw TypeError("Cannot "+n)}(e,t,"access private method"),n},yd=1048576,gd=function(e){return e[e.PICTURE_UPLOAD_STATUS_INITIAL=0]="PICTURE_UPLOAD_STATUS_INITIAL",e[e.PICTURE_UPLOAD_STATUS_SUCCESS=1]="PICTURE_UPLOAD_STATUS_SUCCESS",e[e.PICTURE_UPLOAD_STATUS_FAILURE=2]="PICTURE_UPLOAD_STATUS_FAILURE",e}(gd||{}),wd=function(){return s((function e(t){o(this,e),md(this,Ku),md(this,ed),md(this,nd),md(this,rd),md(this,ad),md(this,ld),md(this,ud),md(this,pd),md(this,fd),this.defer=null,this.config=Object.assign({},{remoteOptions:{url:"",body:function(){return{}}},accept:["png","jpeg","jpg","gif"],multiple:!1,maxSize:20,minWidth:10,minHeight:10,onComplete:function(){},onError:function(){}},t||{}),bd(this,Ku,Ju).call(this)}),[{key:"trigger",value:function(){return this.defer=Qu(),this.el.click(),this.defer.promise}}])}();Ku=new WeakSet,Ju=function(){var e=document.createElement("input");e.type="file",this.config.multiple&&e.setAttribute("multiple","multiple");var t=this.config.accept.filter(Boolean).map((function(e){return"image/".concat(e)})).join(", ");e.accept=t||"image/png, image/jpeg, image/jpg, image/gif",e.name="upload",e.addEventListener("change",bd(this,pd,hd).bind(this)),this.el=e,this.defer=null},ed=new WeakSet,td=function(e){for(var t=e.type||"",n=0;n<this.config.accept.length;n++)if(t.indexOf(this.config.accept[n])>-1)return"";return"仅支持".concat(this.config.accept.map((function(e){return e.toLocaleUpperCase()})).join(" "))},nd=new WeakSet,id=function(e){return((null==e?void 0:e.type)||"").indexOf("gif")>-1?Math.floor(e.size/yd)>=8?"请上传小于".concat(8,"MB的Gif图片"):"":Math.floor(e.size/yd)>=this.config.maxSize?"请上传小于".concat(this.config.maxSize,"MB的图片"):""},rd=new WeakSet,od=function(e){return e<this.config.minWidth?"图片宽度不得小于".concat(this.config.minWidth,"像素"):""},ad=new WeakSet,sd=function(e){return e<this.config.minHeight?"图片高度不得小于".concat(this.config.minHeight,"像素"):""},ld=new WeakSet,cd=function(e,t){var n=this;return new Promise((function(r,o){var a=function(t){e.status=2,e.msg=t},s=bd(n,ed,td).call(n,t);if(s)return a(s),o(e);var l=bd(n,nd,id).call(n,t);if(l)return a(l),o(e);var c=new Image;c.src=URL.createObjectURL(t),c.onload=i(m().mark((function i(){var s,l,u;return m().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(s=bd(n,rd,od).call(n,c.width))){i.next=3;break}return i.abrupt("return",(a(s),o(e)));case 3:if(!(l=bd(n,ad,sd).call(n,c.height))){i.next=6;break}return i.abrupt("return",(a(l),o(e)));case 6:return i.prev=6,i.next=9,Yu(t);case 9:e.src=i.sent,i.next=15;break;case 12:i.prev=12,i.t0=i.catch(6),console.log(i.t0);case 15:return i.prev=15,i.next=18,tc.request({url:n.config.remoteOptions.url,method:"POST",data:n.config.remoteOptions.body(t)});case 18:if(0===(u=i.sent).code){i.next=21;break}throw new Error(u.message);case 21:e.data=n.config.remoteOptions.response(u),e.status=1,r(e),i.next=27;break;case 24:i.prev=24,i.t1=i.catch(15),a("上传失败"),o(e);case 27:case"end":return i.stop()}}),i,null,[[6,12],[15,24]])})))}))},ud=new WeakSet,dd=function(){return{status:0,msg:"",src:"",data:null}},pd=new WeakSet,hd=function(e){var t,n,r=this,o=[],a=e.target,s=Array.from(a.files);if(a.value="",0===s.length)return null==(t=this.defer)?void 0:t.reject("empty");this.config.onBeforeUpload&&this.config.onBeforeUpload(s);var l=[];s.forEach((function(e){var t=bd(r,ud,dd).call(r);o.push(t),l.push(bd(r,ld,cd).call(r,t,e))})),setTimeout(i(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.length!==o.length){e.next=10;break}return e.prev=1,e.next=4,Promise.all(l);case 4:bd(r,fd,vd).call(r,r.config.onComplete,o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),bd(r,fd,vd).call(r,r.config.onError,e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))),null==(n=this.defer)||n.resolve(o)},fd=new WeakSet,vd=function(){var e=i(m().mark((function e(t){var n,i,r,o=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t){e.next=2;break}throw new Error("cb is not a function");case 2:for(n=o.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=o[r];return e.next=5,t.apply(void 0,i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wd.status=gd;var xd=Object.defineProperty,kd=Object.getOwnPropertyDescriptor,Ad=function(e,t,n,i){for(var r,o=i>1?void 0:i?kd(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&xd(t,n,o),o},_d=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.items=[],e.showSlideLeft=!1,e.showSlideRight=!1,e.slideOffsetX=0,e.slideToRight=!1,e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),this.uploader=new wd({remoteOptions:{url:"/x/dynamic/feed/draw/upload_bfs",body:function(e){var t=new FormData;return t.append("file_up",e),t.append("biz","new_dyn"),t.append("category","daily"),t},response:function(e){return{img_src:e.data.image_url,img_width:e.data.image_width,img_height:e.data.image_height,img_size:e.data.img_size}}},accept:this.accept||["png","jpeg","jpg"],multiple:!0,onComplete:function(){e.requestUpdate(),e.updateState()},onBeforeUpload:function(t){var n=t.length+e.items.length-9;n>0&&(t.splice(t.length-n),Jl.show("上传图片不得超过9张（￣∞￣）"))}}),this.disposables.addEventListener(window,"resize",this.handleSlideBtnVisible.bind(this))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"reset",value:function(){this.items=[],this.updateState()}},{key:"trigger",value:(n=i(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.uploader.trigger();case 3:t=e.sent,this.items=[].concat(w(this.items),w(t)),this.items.length&&this.updateVisible(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Jl.show(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"updateState",value:function(){this.handleSlideBtnVisible(),this.dispatchEvent(new CustomEvent("change",{detail:this.items.filter((function(e){return e.data&&e.status===wd.status.PICTURE_UPLOAD_STATUS_SUCCESS})).map((function(e){return e.data}))}))}},{key:"handleComputeOffset",value:function(){var e=this.contentEl.parentElement.offsetWidth,t=this.contentEl.offsetWidth;this.slideOffsetX=Math.max(0,t+16-e)}},{key:"handleSlideBtnVisible",value:function(){if(this.handleComputeOffset(),this.slideOffsetX<=0)return this.showSlideLeft=!1,void(this.showSlideRight=!1);this.showSlideLeft=this.slideToRight,this.showSlideRight=!this.showSlideLeft}},{key:"handleSlide",value:function(e){0!==this.slideOffsetX&&(this.slideToRight=e,this.showSlideLeft=e,this.showSlideRight=!this.showSlideLeft)}},{key:"updateVisible",value:function(e){this.style.display=e?"flex":"none"}},{key:"removeItem",value:function(e){var t=w(this.items);t.splice(e,1),this.items=t,0===this.items.length&&this.updateVisible(!1),this.updateState()}},{key:"itemTemplate",value:function(e,t){var n=this;return $t(Qa||(Qa=g(['<div class="item">\n      <div class="close" @click=','>\n        <bili-icon icon="BDC/xmark_close_line/1" size="12"> </bili-icon>\n      </div>\n      '," ","\n    </div>"])),(function(){return n.removeItem(t)}),e.src?$t(Ka||(Ka=g(["<img src=",' alt="图片" />'])),e.src):"",function(){switch(e.status){case wd.status.PICTURE_UPLOAD_STATUS_INITIAL:return $t(Za||(Za=g(['<div class="mask">\n            <img class="loading" width="24" height="24" src="//i0.hdslb.com/bfs/static/jinkela/long/gif/loading-blue.gif" />\n          </div>'])));case wd.status.PICTURE_UPLOAD_STATUS_FAILURE:return $t(Ya||(Ya=g(['<div class="mask error"><div class="msg">',"</div></div>"])),e.msg||"上传失败");case wd.status.PICTURE_UPLOAD_STATUS_SUCCESS:default:return""}}())}},{key:"render",value:function(){var e=this;return $t(Ja||(Ja=g(['\n      <div\n        id="wrapper"\n        class="','"\n      >\n        <div id="shadow" class="left"></div>\n        <div id="slide-btn" class="left" @click=','>\n          <bili-icon icon="BDC/arrow_back_left_line/3" size="12"></bili-icon>\n        </div>\n        <div\n          id="content"\n          style="','"\n        >\n          ','\n        </div>\n        <div id="slide-btn" class="right" @click=','>\n          <bili-icon icon="BDC/arrow_back_left_line/3" size="12"></bili-icon>\n        </div>\n        <div id="shadow" class="right"></div>\n      </div>\n    '])),ea({"slide-left":this.showSlideLeft,"slide-right":this.showSlideRight}),(function(){return e.handleSlide(!1)}),On({transform:"translateX(".concat(this.slideToRight?-this.slideOffsetX:0,"px)")}),this.items.map((function(t,n){return e.itemTemplate(t,n)})),(function(){return e.handleSlide(!0)}))}}]);var n}(dn);_d.styles=vt(es||(es=g(["\n    :host {\n      display: none;\n    }\n    #wrapper {\n      position: relative;\n      padding: 0 8px;\n      width: 100%;\n      overflow: hidden;\n    }\n    #wrapper.slide-left #slide-btn.left,\n    #wrapper.slide-left #shadow.left {\n      display: flex;\n    }\n    #wrapper.slide-right #slide-btn.right,\n    #wrapper.slide-right #shadow.right {\n      display: flex;\n    }\n    #slide-btn {\n      position: absolute;\n      top: 50%;\n      display: none;\n      justify-content: center;\n      align-items: center;\n      width: 24px;\n      height: 24px;\n      border-radius: 50%;\n      border: 1px solid var(--line_regular);\n      background-color: #fff;\n      color: var(--text3);\n      cursor: pointer;\n      z-index: 2;\n    }\n    #slide-btn.left {\n      left: 8px;\n      transform: translateY(-50%);\n    }\n    #slide-btn.right {\n      right: 8px;\n      transform: translateY(-50%) rotate(180deg);\n    }\n    #shadow {\n      display: none;\n      position: absolute;\n      top: 0;\n      width: 20px;\n      height: 100%;\n      pointer-events: none;\n      z-index: 1;\n    }\n    #shadow.left {\n      left: 0;\n      background: linear-gradient(to right, #fff, #fff 28.5%, rgba(255, 255, 255, 0) 100%);\n    }\n    #shadow.right {\n      right: 0;\n      background: linear-gradient(to left, #fff 28.5%, rgba(255, 255, 255, 0) 100%);\n    }\n    #content {\n      width: fit-content;\n      display: flex;\n      flex-wrap: nowrap;\n      transition: 0.2s ease-in-out;\n    }\n    .item {\n      position: relative;\n      width: 72px;\n      height: 72px;\n      border-radius: 4px;\n      background-color: #f1f2f3;\n      overflow: hidden;\n      flex-shrink: 0;\n    }\n    .item .close {\n      position: absolute;\n      top: 0;\n      right: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 20px;\n      height: 20px;\n      border-radius: 0 4px;\n      background-color: #0003;\n      color: #fff;\n      cursor: pointer;\n      z-index: 2;\n    }\n    .item > img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n    .item .mask {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #0005;\n      flex-direction: column;\n      color: #fff;\n      font-size: 20px;\n      z-index: 1;\n    }\n    .item .mask.error {\n      color: #f85a54;\n    }\n    .item .mask .msg {\n      height: 14px;\n      font-size: 20px;\n      transform: scale(0.5);\n      transform-origin: center center;\n      font-weight: 500;\n      white-space: nowrap;\n    }\n\n    #content .item:not(:last-child) {\n      margin-right: 8px;\n    }\n  "]))),Ad([mn()],_d.prototype,"accept",2),Ad([bn()],_d.prototype,"items",2),Ad([bn()],_d.prototype,"showSlideLeft",2),Ad([bn()],_d.prototype,"showSlideRight",2),Ad([bn()],_d.prototype,"slideOffsetX",2),Ad([bn()],_d.prototype,"slideToRight",2),Ad([wn("#content")],_d.prototype,"contentEl",2),_d=Ad([hn("bili-comment-pictures-upload")],_d);var Ed=function(e,t){if(!e)return[];var n=e.match(t);if(!n)return[{type:0,text:e}];var i=0,r=n.reduce((function(t,n){var r=[],o=e.slice(i).indexOf(n),a=e.slice(i,i+o);return a&&r.push({type:0,text:a}),r.push({type:1,text:n}),i=i+o+n.length,t.concat(r)}),[]);return i<e.length&&r.push({type:0,text:e.slice(i)}),r};function Cd(e,t){return function(n,i){for(var r=0;r<i.length;r++){var o=i[r];o.type?n.push(e(o.text)):t(n,o.text)}}}var Sd=Object.defineProperty,Td=Object.defineProperties,Od=Object.getOwnPropertyDescriptors,Pd=Object.getOwnPropertySymbols,Id=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,Ld=function(e,t,n){return t in e?Sd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jd=function(e,t){for(var n in t||(t={}))Id.call(t,n)&&Ld(e,n,t[n]);if(Pd){var i,r=l(Pd(t));try{for(r.s();!(i=r.n()).done;){n=i.value;Md.call(t,n)&&Ld(e,n,t[n])}}catch(e){r.e(e)}finally{r.f()}}return e},Rd=function(e,t,n){return Ld(e,"symbol"!=k(t)?t+"":t,n),n},Dd=/(https?:\/\/)?((?:[a-zA-Z0-9]|[_-](?=[a-zA-Z0-9]))+(?:\.(?:[a-zA-Z0-9]|[_-](?=[a-zA-Z0-9]))*)+)((?:\/(?!\/)(?:[a-zA-Z0-9]|[.~!@$%^&*=+_-](?=[a-zA-Z0-9]))*)*)([?#][a-zA-Z0-9\[{\]}\\\|;:'",<.>/?`~!@#$%^&*()=+_-]{0,256})?/,Nd=/(https?:\/\/)?((?:[a-zA-Z0-9]|[_-](?=[a-zA-Z0-9]))+(?:\.(?:[a-zA-Z0-9]|[_-](?=[a-zA-Z0-9]))*)+)((?:\/(?!\/)(?:[a-zA-Z0-9]|[.~!@$%^&*=+_-](?=[a-zA-Z0-9]))*)*)/,Bd="default",zd={blacklist:{domain:[],rex:[]},whitelist:{domain:[],rex:[]}},Ud=function(e){return function(e,t){return Td(e,Od(t))}(jd({},null!=e?e:{}),{appKey:"333.1339",nscode:7})},Fd=function(e){for(var t=[],n=0;n<e.length;n++)/[^a-zA-Z0-9]/.test(e[n])?t.push("\\".concat(e[n])):t.push(e[n]);return t.join("")},Vd=function(e,t){var n,i,r,o,a,s,l,c,u=null!=t?t:Bd,d=jd({},zd);try{var p=e,h=jd({},zd),f=jd({},zd);h={blacklist:JSON.parse(null!=(i=null==(n=null==p?void 0:p[Bd])?void 0:n.blacklist)?i:"{}"),whitelist:JSON.parse(null!=(o=null==(r=null==p?void 0:p[Bd])?void 0:r.whitelist)?o:"{}")},u!==Bd&&(f={blacklist:JSON.parse(null!=(s=null==(a=null==p?void 0:p[u])?void 0:a.blacklist)?s:"{}"),whitelist:JSON.parse(null!=(c=null==(l=null==p?void 0:p[u])?void 0:l.whitelist)?c:"{}")}),d=function(e){var t={domain:[],rex:[]},n={domain:[],rex:[]};return null==e||e.forEach((function(e){var i,r,o,a,s,l,c,u,d,p,h,f,v,m,b,y;null==(c=t.domain)||(i=c).push.apply(i,w(null!=(l=null==(s=null==e?void 0:e.whitelist)?void 0:s.domain)?l:[])),null==(p=t.rex)||(r=p).push.apply(r,w(null!=(d=null==(u=null==e?void 0:e.whitelist)?void 0:u.rex)?d:[])),null==(v=n.domain)||(o=v).push.apply(o,w(null!=(f=null==(h=null==e?void 0:e.blacklist)?void 0:h.domain)?f:[])),null==(y=n.rex)||(a=y).push.apply(a,w(null!=(b=null==(m=null==e?void 0:e.blacklist)?void 0:m.rex)?b:[]))})),{whitelist:t,blacklist:n}}([h,f])}catch(p){console.warn(p)}return d},Hd=function(e,t){var n,i,r,o,a,s,c,u,d,p;if("string"!=typeof e)return!1;var h=null!=(i=null==(n=Nd.exec(e))?void 0:n[0])?i:"";if(!h)return!1;var f,v=l(null!=(o=null==(r=null==t?void 0:t.blacklist)?void 0:r.rex)?o:[]);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(new RegExp(m).test(h))return!1}}catch(e){v.e(e)}finally{v.f()}var b,y=l(null!=(s=null==(a=null==t?void 0:t.blacklist)?void 0:a.domain)?s:[]);try{for(y.s();!(b=y.n()).done;){var g=b.value;if(new RegExp("(?:^(?:https?://)?(?:[a-zA-Z0-9_-]+.)?)(".concat(Fd(g),")(?=[\\/?#]|$)")).test(h))return!1}}catch(e){y.e(e)}finally{y.f()}var w,x=l(null!=(u=null==(c=null==t?void 0:t.whitelist)?void 0:c.rex)?u:[]);try{for(x.s();!(w=x.n()).done;){var k=w.value;if(new RegExp(k).test(h))return!0}}catch(e){x.e(e)}finally{x.f()}var A,_=l(null!=(p=null==(d=null==t?void 0:t.whitelist)?void 0:d.domain)?p:[]);try{for(_.s();!(A=_.n()).done;){var E=A.value;if(new RegExp("(?:^(?:https?://)?(?:[a-zA-Z0-9_-]+.)?)(".concat(Fd(E),")(?=[\\/?#]|$)")).test(h))return!0}}catch(e){_.e(e)}finally{_.f()}return!1},Wd=function(){return s((function e(t){var n,i;o(this,e),Rd(this,"rawKvConfig",{}),Rd(this,"scene",Bd),Rd(this,"urlRuleSceneConfig",jd({},zd)),this.rawKvConfig=null!=(n=null==t?void 0:t.rawKvConfig)?n:{},this.scene=null!=(i=null==t?void 0:t.scene)?i:Bd,this.urlRuleSceneConfig=Vd(this.rawKvConfig,this.scene)}),[{key:"isWhitelistUrl",value:function(e){return Hd(e,this.urlRuleSceneConfig)}},{key:"getProcessedText",value:function(e){return function(e,t){if("string"!=typeof e)return[];for(var n=[],i=e.matchAll(new RegExp(Dd,"g")),r=0,o=0,a=Array.from(i);o<a.length;o++){var s=a[o],l=s[0];if(Hd(l,t)){var c=s.index,u=c+l.length;r<c&&n.push({value:e.slice(r,c),type:"text"}),n.push({value:l,type:"link"}),r=u}}return r<e.length&&n.push({value:e.slice(r,e.length),type:"text"}),n}(e,this.urlRuleSceneConfig)}}],[{key:"getKvInitConfig",value:function(e){return Ud(e)}}])}(),$d=null,qd=function(){var e=i(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($d){e.next=13;break}return e.prev=1,e.next=4,Mn(Wd.getKvInitConfig());case 4:return e.next=6,e.sent.getAll();case 6:t=e.sent,$d=new Wd({rawKvConfig:t,scene:"comments"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),yc("tech","comments.urlkv.failed",{});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Gd=function(e){return e.replace(/[^\d]/g,"")},Xd=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Zd="BDC/video_circle_line/1",Yd="BDC/column_line/1",Qd=function(e,t,n,i,r){return{tag:"a",style:i,dataset:r,a:{text:t||"网页链接",href:e,icon:n,target:"_blank"}}},Kd=function(e){return{tag:"span",span:{text:e}}},Jd="(https?://)",ep="([/.$*?~=#!%@&A-Za-z0-9_-]*)";function tp(e,t){var n,i=[];if(null==(n=e.content)||!n.message)return i.push(Kd("暂不支持展示的内容")),i;var r=e.content,o=r.message,a=r.emote,s=r.members,l=r.jump_url,c=r.vote,u=$d,d=new RegExp("(AV|av|Av|aV)[0-9]+","ug"),p=new RegExp("(BV|bv|Bv|bV)1[1-9A-NP-Za-km-z]{9}","ug"),h=new RegExp("((CV|cv)[0-9]+|(mobile/[0-9]+))","ug"),f=new RegExp("(EP|ep|Ep|eP)[0-9]+","ug"),v=new RegExp("(SS|ss|Ss|sS)[0-9]+","ug"),m=/\[(?:[\0-'\+-Z\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+\]/g,b=new RegExp("".concat(Jd,"?([a-z0-9A-Z-]{1,15}.)?(bilibili\\.(com|tv|cn)|esheep\\.(com|cn|net)|biligame\\.(com|cn|net)|(bilibiliyoo|im9)\\.com|biliapi\\.net|b23\\.tv|bili22\\.cn|bili33\\.cn|bili23\\.cn|bili2233\\.cn|(sugs\\.suning\\.com)|jueze2021\\.peopleapp\\.com|kaola\\.com|bigfun\\.cn|mcbbs\\.net|mp\\.weixin\\.qq\\.com|static\\.cdsb\\.com|bjnews\\.com\\.cn|720yun\\.com|\\.cctv\\.com)($|/|)").concat(ep),"ug"),g=new RegExp("".concat(Jd,"?(((uat-)?www\\.bilibili\\.com)|(b23\\.tv|bili22\\.cn|bili33\\.cn|bili23\\.cn|bili2233\\.cn))(/video)?/((av[0-9]+)|((BV)1[1-9A-NP-Za-km-z]{9}))($|/|)").concat(ep),"ug"),w=new RegExp("".concat(Jd,"?(((uat-)?www\\.bilibili\\.com/bangumi/(play/|media/)|(b23\\.tv|bili22\\.cn|bili33\\.cn|bili23\\.cn|bili2233.cn)/)(ss|ep)[0-9]+)($|/|)").concat(ep),"ug"),x=new RegExp("".concat(Jd,"?(uat-)?www\\.bilibili\\.com/read/((cv[0-9]+)|(native?id=[0-9]+)|(app/[0-9]+)|(native/[0-9]+)|(mobile/[0-9]+))($|/|)").concat(ep),"ug"),k=/(\d+#)?(\d+(:|：)){1,2}\d\d/g,A=Cd((function(e){if(null!=a&&a[e]){var t=a[e],n=t.url,i=t.meta,r=t.webp_url,o=t.gif_url,s=r||o||n,l=20,c={width:"1.4em",height:"1.4em","vertical-align":"text-bottom"};return 2===i.size&&(l=50,c={width:"50px",height:"50px"}),function(e,t,n){return{tag:"img",style:n,img:{src:e,alt:t,loading:"lazy"}}}(Kn.getBmgSrcNext(s,{w:l,h:l,dpr:2}),e,c)}return Kd(e)}),(function(e,t){e.push(Kd(t))})),_=Cd((function(e){if(!1===(null==t?void 0:t.videoTime))return Kd(e);var n="1";if(e.indexOf("#")>-1){var i=y(e.split("#"),2);n=i[0],e=i[1]}var r=(e=e.replace(/[:：]/g,":")).split(":").map((function(e){return parseInt(e)})).reverse().reduce((function(e,t,n){return e+t*Math.pow(60,n)}),0);return{tag:"a",dataset:{type:"seek","video-time":String(r),"video-part":n},a:{text:e,href:""}}}),(function(e,t){A(e,Ed(t,m))})),E=Cd((function(e){return Qd(_u.ARTICLE(Gd(e)),e,Yd)}),(function(e,t){_(e,Ed(t,k))})),C=Cd((function(e){return Qd(_u.VIDEO({bvid:e}),e,Zd)}),(function(e,t){E(e,Ed(t,h))})),S=Cd((function(e){return Qd(_u.VIDEO({avid:Gd(e)}),e,Zd)}),(function(e,t){C(e,Ed(t,p))})),T={};s.length&&s.forEach((function(e){T["@"+e.uname]=e}));var O=Cd((function(e){var t=T[e],n=null==t?void 0:t.mid;return Qd(_u.SPACE(n),e,void 0,void 0,{"user-profile-id":n})}),(function(e,t){j(e,t,2)})),P=Object.keys(l||{}),I={},M=function(e,t){var n=t.pc_url,i=t.title,r=t.prefix_icon,o=t.match_once,a=t.icon_position,s=t.extra;if(o&&I[e])return Kd(e);I[e]=!0;var l=1===a,c=n;if(c||(c=b.test(e)?e:p.test(e)?_u.VIDEO({bvid:e}):d.test(e)?_u.VIDEO({avid:Gd(e)}):function(e){if(e.startsWith("http")){var t=e.match(/www.bilibili.com\/h5\/note-app\/view\?cvid=(\d+)/);return null!=t&&t[1]?_u.ARTICLE(t[1]):e}return""}(e)),!c)return Kd(e);var u=i||e,h="";return null!=s&&s.goods_pc_click_urls&&Array.isArray(s.goods_pc_click_urls)&&(h=s.goods_pc_click_urls.join(",")),Qd(c,u,r,l?{display:"inline-flex","flex-direction":"row-reverse","--icon-width":"0.65em","--icon-height":"1.2em"}:{"--icon-width":"1.2em","--icon-height":"1.2em"},h?{type:"goods","goods-url":h}:{type:"search",keyword:u})},L=Cd((function(e){return null!=l&&l[e]?M(e,l[e]):Qd(_u.SEARCH(e),e)}),(function(e,t){j(e,t,1)})),j=function(e,t,n){n<=0&&P.length?L(e,Ed(t,new RegExp("(".concat(P.join("|"),")"),"gu"))):n<=1&&s.length?O(e,Ed(t,new RegExp("@(".concat(s.map((function(e){return e.uname})).join("|"),")"),"gu"))):R(i,u?u.getProcessedText(t).map((function(e){return{type:"link"===e.type?1:0,text:e.value}})):Ed(t,b))},R=Cd((function(e){if(null!=l&&l[e])return M(e,l[e]);var t=null,n=e;if(null!=(t=n.match(g))&&t[0]){var i=t[0].match(p);if(null!=i&&i[0])return Qd(n,i[0],Zd);var r=t[0].match(d);if(null!=r&&r[0])return Qd(n,r[0],Zd)}if(null!=(t=n.match(w))&&t[0]){var o=t[0].match(v);if(null!=o&&o[0])return Qd(n,o[0],Zd);var a=t[0].match(f);if(null!=a&&a[0])return Qd(n,a[0],Zd)}if(null!=(t=n.match(x))&&t[0]){var s=t[0].match(h);if(null!=s&&s[0])return Qd(n,s[0],Yd)}return Qd(ku(e),e,"BDC/chain_link_line/1")}),(function(e,t){S(e,Ed(t,d))})),D=[];if(c){var N="{vote:".concat(c.id,"}");o.indexOf(N)>-1?function(e,t){if(!e)return[];for(var n=[],i=e.indexOf(t);-1!==i;){var r=e.slice(0,i);r&&n.push({type:0,text:r}),n.push({type:1,text:t}),i=(e=e.slice(i+t.length)).indexOf(t)}return e&&n.push({type:0,text:e}),n}(o,N).forEach((function(e){var t=e.type,n=e.text;t?D.push(Qd(c.url,c.title,"BDC/vote_line/2")):D.push(Kd(n))})):D.push(Kd(o))}else D.push(Kd(o));return D.forEach((function(e){if("span"!==e.tag)i.push(e);else{var t=e.span.text;j(i,t,0)}})),i}function np(e){return!!e.reply_control&&!!e.reply_control.is_note_v2}function ip(e){return e.reply_control?e.reply_control.is_note?{type:"note",oid:e.note_cvid_str}:e.reply_control.is_note_v2&&e.reply_control.fold_pictures?{type:"opus",oid:e.dynamic_id_str}:null:null}var rp=Object.defineProperty,op=Object.getOwnPropertyDescriptor,ap=function(e,t,n,i){for(var r,o=i>1?void 0:i?op(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&rp(t,n,o),o},sp=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).data=null,e.userNameColor="",e}return p(t,e),s(t,[{key:"note",get:function(){return!!this.data&&np(this.data)}},{key:"expand",get:function(){return!!this.data&&!!ip(this.data)}},{key:"pictures",get:function(){var e,t,n;return null!=(n=null==(t=null==(e=this.data)?void 0:e.content)?void 0:t.pictures)&&n.length?this.data.content.pictures:null}},{key:"load",value:function(e){this.data=e}},{key:"loadNoteData",value:function(e){var t="",n=[];e.noteContent.forEach((function(e){var i,r,o,a=e.insert;if("video"===(null==(i=a.imageUpload)?void 0:i.source)&&n.length<3&&n.push({img_src:a.imageUpload.url,img_width:a.imageUpload.width}),null!=(o=null==(r=a.tag)?void 0:r.seconds)&&o.toString()){var s=a.tag.seconds,l=a.tag.desc;t=t.concat("".concat(function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=e-(3600*t+60*n),r=t.toString().padStart(2,"0"),o=n.toString().padStart(2,"0"),a=i.toString().padStart(2,"0");return t?"".concat(r,":").concat(o,":").concat(a):"".concat(o,":").concat(a)}(s)," ").concat(l))}"string"==typeof a&&(t=t.concat(a))})),t=this.limitContent(t);var i={member:{mid:"1",uname:e.upName,level_info:{current_level:e.upLevel||0},avatar:e.upAvatar,face_nft_new:0,is_contractor:!1,official_verify:{type:-1,desc:""},avatar_item:null,is_senior_member:e.isHardcoreMember?1:0},content:{message:t,members:[],max_line:6,jump_url:{},pictures:n},ctime:"刚刚"===e.noteTime?Date.now()/1e3-1:new Date(e.noteTime).getTime()/1e3,reply_control:{is_note:!0,max_line:6,time_desc:"",location:""}};e.upNameColor&&(this.userNameColor=e.upNameColor),this.data=i}},{key:"limitContent",value:function(e){var t=(e=e.replace(/^\s*/,"").replace(/\s*$/,"")).match(/\n/g);return t&&t.length>6?e.split("\n").slice(0,6).join("\n").slice(0,77).concat("..."):e.length>77?e.slice(0,77).concat("..."):e}},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.initData()}},{key:"initData",value:function(){var e=this;setTimeout((function(){var t;if(e.data){if(null!=(t=e.data.member)&&t.avatar){var n=e.data.member,i=n.avatar,r=n.mid,o=n.pendant,a=n.vip,s=n.official_verify,l=n.face_nft_new;e.biliAvatar.load(cu({face:i,mid:r,pendant:o||"",vip:a,official:s,nft:null!=l?l:0}),{baseSize:48,isFloat:!0})}e.biliRichText.setContents(tp(e.data))}}))}},{key:"noteTemplate",value:function(){return $t(ts||(ts=g(['<i id="note">\n      <bili-icon icon="BDC/note_line/1" size="16"></bili-icon>\n      <span>笔记</span>\n    </i>'])))}},{key:"expandTemplate",value:function(){return $t(ns||(ns=g(['<span id="expand">展开</span>'])))}},{key:"picturesTemplate",value:function(){return $t(is||(is=g(['<div id="pictures">\n      <div id="pic">\n        <bili-comment-pictures-renderer .list=',"></bili-comment-pictures-renderer>\n      </div>\n    </div>"])),this.pictures)}},{key:"render",value:function(){return $t(rs||(rs=g(['<div id="body">\n      <div id="user-avatar"><bili-avatar></bili-avatar></div>\n      <div id="main">\n        <div id="header">\n          <bili-comment-user-info\n            .data=','\n            style="','"\n          ></bili-comment-user-info>\n        </div>\n        <div id="content">\n          ','\n\n          <bili-rich-text\n            style="','"\n          ></bili-rich-text>\n          '," ",'\n        </div>\n        <div id="footer">\n          <bili-comment-action-buttons-renderer\n            style="','"\n            .data=',"\n          ></bili-comment-action-buttons-renderer>\n        </div>\n      </div>\n    </div>"])),this.data,this.userNameColor?On({"--bili-comment-user-info-name-color":this.userNameColor}):"",this.note?this.noteTemplate():"",On({"--bili-rich-text-font-size":"var(--bili-comments-font-size-content)","--bili-rich-text-line-height":"var(--bili-comments-line-height-content)","--bili-rich-text-link-color":"var(--Lb6)","--bili-rich-text-display":"inline"}),this.expand?this.expandTemplate():"",this.pictures?this.picturesTemplate():"",On({"--bili-comment-action-buttons-more-display":"var(--bili-comment-hover-more-display)"}),this.data)}}])}(dn);function lp(e){return 1===e.type}function cp(e){var t,n,i=e.reply_control;if(null!=(t=null==i?void 0:i.easter_egg_label)&&t.image){var r=i.easter_egg_label.image;return{type:"easter-egg",width:82,height:36,render:function(){return Hl('<img src="'.concat(Kn.getBmgSrcNext(r,{w:82,h:36}),'" width="').concat(82,'" height="').concat(36,'" style="transform: translateY(6px)" >'))}}}var o=function(e){var t;if(null!=(t=e.card_label)&&t.length){var n=e.card_label.find((function(e){return lp(e)}));if(n)return n}return null}(e);if(null!=o&&o.background){var a=o.background_width,s=o.background_height;return{type:"awesome-comment",width:a,height:s,render:function(){return Hl('<img src="'.concat(Kn.getBmgSrcNext(o.background,{w:a,h:s,dpr:2}),'" width="').concat(a,'" height="').concat(s,'">'))}}}return null!=(n=e.member)&&n.user_sailing_v2?{type:"user-sailing",width:288,height:48,render:function(){return $t(as||(as=g(["<bili-comment-user-sailing-card .data=","></bili-comment-user-sailing-card>"])),e.member.user_sailing_v2)}}:null}sp.styles=vt(os||(os=g(["\n    #body {\n      pointer-events: none;\n      position: relative;\n      padding-left: 80px;\n      --bili-comment-hover-more-display: block;\n    }\n    #user-avatar {\n      position: absolute;\n      left: 20px;\n      top: 0;\n      width: 48px;\n      height: 48px;\n      transform-origin: left top;\n      transform: var(--bili-comments-avatar-size);\n    }\n    #ornament {\n      position: absolute;\n      right: 0;\n      top: 7px;\n      user-select: none;\n    }\n    bili-comment-vote-option {\n      margin-top: 2px;\n      margin-bottom: 6px;\n    }\n    #main {\n      width: 100%;\n    }\n    #header {\n      margin-bottom: 4px;\n    }\n    i {\n      font-size: 12px;\n      font-style: normal;\n    }\n    i#note {\n      width: 48px;\n      height: 22px;\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      border-radius: 4px;\n      color: var(--text3);\n      background-color: var(--bg2);\n      vertical-align: text-bottom;\n    }\n    #content {\n      font-size: var(--bili-comments-font-size-content);\n      line-height: var(--bili-comments-line-height-content);\n      color: var(--text1);\n    }\n    #content #expand {\n      color: var(--brand_blue);\n      cursor: pointer;\n    }\n    #pictures {\n      display: block;\n      width: 100%;\n      margin-top: 8px;\n    }\n  "]))),ap([bn()],sp.prototype,"data",2),ap([bn()],sp.prototype,"userNameColor",2),ap([wn("bili-avatar")],sp.prototype,"biliAvatar",2),ap([wn("bili-rich-text")],sp.prototype,"biliRichText",2),ap([bn()],sp.prototype,"note",1),ap([bn()],sp.prototype,"expand",1),ap([bn()],sp.prototype,"pictures",1),sp=ap([hn("bili-comment-preview-renderer")],sp);var up=null;function dp(e){return up||(up=document.querySelector("bili-user-profile")||document.createElement("bili-user-profile")),up.setup(e)}function pp(){if(up)up.parentElement&&up.parentElement.removeChild(up);else{var e=document.querySelector("bili-user-profile");e&&e.parentElement&&e.parentElement.removeChild(e)}}var hp=function(e,t,n){var i;i=n?null==n?void 0:n.scrollTop:document.documentElement.scrollTop;var r=e.getBoundingClientRect().top+i+(t||0);(n||window).scrollTo({top:r,left:0,behavior:"smooth"})},fp=Object.defineProperty,vp=Object.getOwnPropertyDescriptor,mp=function(e,t,n,i){for(var r,o=i>1?void 0:i?vp(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&fp(t,n,o),o},bp=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.richTextDisposables=null,e.upMid=0,e.user=null,e.oid="",e.type=0,e.trackObserver=null,e}return p(t,e),s(t,[{key:"ornament",get:function(){return cp(this.data)}},{key:"top",get:function(){return function(e){return!(!e.reply_control||!e.reply_control.is_up_top&&!e.reply_control.is_admin_top)}(this.data)}},{key:"note",get:function(){return np(this.data)}},{key:"expandAction",get:function(){return ip(this.data)}},{key:"expand",get:function(){return!!this.expandAction}},{key:"voteOption",get:function(){var e;return(null==(e=this.data.reply_control)?void 0:e.vote_option)||null}},{key:"vote",get:function(){return this.data.content.vote||null}},{key:"richTextContent",get:function(){return tp(this.data,this.contentFeatures)}},{key:"pictures",get:function(){var e,t;return null==(e=this.data.content.pictures)||!e.length||null!=(t=this.data.reply_control)&&t.fold_pictures?null:this.data.content.pictures}},{key:"tags",get:function(){return function(e){var t;if(null!=(t=e.card_label)&&t.length){var n=e.card_label.filter((function(e){return!lp(e)}));if(n.length)return n}return null}(this.data)}},{key:"uid",get:function(){return this.data.member.mid}},{key:"spaceLink",get:function(){return _u.SPACE(this.uid)}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),this.initData(),setTimeout((function(){var t=e.biliAvatar.parentNode;e.disposables.add(dp(t)),e.trackObserver=new hu({el:e,type:"show",value:{event:"comment.content.show",data:{type:e.type,oid:e.oid,rpid:e.data.rpid_str}},handler:function(t,n,i){if("show"===t){var r=[];e.richTextContent.forEach((function(e){var n,o;e.dataset&&"search"===(null==(n=e.dataset)?void 0:n.type)&&null!=(o=e.dataset)&&o.keyword&&(r.push(e.dataset.keyword),bc(t,"community.public-community.reply-card.underline",v(v({},i),{},{message:e.dataset.keyword})))})),yc(t,n,v(v({},i),{},{keywords:r.join(",")}))}}})}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose(),this.clearRichTextDisposables()}},{key:"clearRichTextDisposables",value:function(){this.richTextDisposables&&(this.richTextDisposables.dispose(),this.richTextDisposables=null)}},{key:"initData",value:function(){var e=this;this.clearRichTextDisposables(),setTimeout((function(){var t,n;e.biliAvatar.load(e.data.member.avatar_item,{baseSize:48,isFloat:!0,lazyload:!0}),e.biliRichText.setContents(e.richTextContent),Array.from((null==(t=e.biliRichText.contentsElement)?void 0:t.children)||[]).forEach((function(t){t.dataset.userProfileId&&(e.richTextDisposables||(e.richTextDisposables=Fi()),e.richTextDisposables.add(dp(t)))})),null!=(n=e.data.$extra)&&n.spotlight&&window.setTimeout((function(){hp(e,-300),setTimeout((function(){e.startSpotlight()}),100)}),100)}))}},{key:"startSpotlight",value:(n=i(m().mark((function e(){var t,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="spotlight",this.disposables.addEventListener(this.bodyElement,"transitionend",(function(){n.bodyElement.classList.remove(t),n.bodyElement.style.removeProperty("background-color"),n.bodyElement.style.removeProperty("transition")})),this.bodyElement.classList.add(t),e.next=5,Xd(10);case 5:return this.bodyElement.style.setProperty("transition","background-color 2s 3s"),e.next=8,Xd(10);case 8:this.bodyElement.style.setProperty("background-color","transparent");case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updated",value:function(e){e.get("data")&&this.initData()}},{key:"handleAction",value:function(e){var t=e.detail,n=t.key,i=t.data;switch(n){case"top":this.dispatchEvent(new CustomEvent("top",{detail:i.active}));break;case"block":this.dispatchEvent(new CustomEvent("block"));break;case"report":this.dispatchEvent(new CustomEvent("report"));break;case"delete":this.dispatchEvent(new CustomEvent("delete"))}}},{key:"handleReply",value:function(){this.dispatchEvent(new CustomEvent("reply"))}},{key:"handleAvatarClick",value:function(){var e={rpid:this.data.rpid_str};mc("replyCardProfileClick",e),yc("click","comment.user_avatar.click",e)}},{key:"handleTextClick",value:function(e){var t,n,i=e.detail;if(i){if("seek"===i.type){var r=Number(i.videoTime),o=Number(i.videoPart);!isNaN(r)&&!isNaN(o)&&this.dispatchEvent(new CustomEvent("seek",{detail:{time:r,part:o},composed:!0}))}if("search"===i.type){var a={position:32,keyword:i.keyword};bc("click","community.public-community.reply-card.all",a),yc("click","comment.content.click",a)}if("goods"===i.type){var s=i.goodsUrl;s&&null!=(n=null==(t=window.BiliCm)?void 0:t.Base)&&n.sendThirdClickUrls&&window.BiliCm.Base.sendThirdClickUrls(s)}}}},{key:"handleExpand",value:function(e){if("opus"!==this.expandAction.type){var t=e.target,n=v(v({},this.expandAction),{},{ref:t});this.dispatchEvent(new CustomEvent("expand",{detail:n}))}else!function(e){var t="//www.bilibili.com/blackboard/comment-detail.html?id=".concat(e);Su({title:"评论详情",render:function(){return Cu(t,Eu({"min-height":"550px"}))}})}(this.expandAction.oid)}},{key:"mainTags",value:function(){var e;return $t(ss||(ss=g(['\n      <div id="tags">\n        ','\n        <div class="tag"></div>\n      </div>\n    '])),null==(e=this.tags)?void 0:e.map((function(e){return $t(ls||(ls=g(['<div\n              class="tag"\n              style=',"\n            >\n              ","\n            </div>"])),On({"--bili-comment-tag-color-light":e.text_color_day,"--bili-comment-tag-color-dark":e.text_color_night,"--bili-comment-tag-bg-light":e.label_color_day,"--bili-comment-tag-bg-dark":e.label_color_night}),e.text_content)})))}},{key:"ornamentTemplate",value:function(){if(!this.ornament)return"";var e=this.ornament,t=e.render,n=e.width,i=e.height;return $t(cs||(cs=g(['<div\n      id="ornament"\n      style="','"\n    >\n      ',"\n    </div>"])),On({width:"".concat(n,"px"),height:"".concat(i,"px")}),t())}},{key:"topTemplate",value:function(){return $t(us||(us=g(['<i id="top">置顶</i>'])))}},{key:"noteTemplate",value:function(){return $t(ds||(ds=g(['<i id="note">\n      <bili-icon icon="BDC/note_line/1" size="16"></bili-icon>\n      <span>笔记</span>\n    </i>'])))}},{key:"expandTemplate",value:function(){return $t(ps||(ps=g(['<span id="expand" @click=',">展开</span>"])),this.handleExpand)}},{key:"voteTemplate",value:function(){return $t(hs||(hs=g(['<div id="vote">\n      <bili-comment-vote-renderer .data=',"></bili-comment-vote-renderer>\n    </div>"])),this.vote)}},{key:"picturesTemplate",value:function(){return $t(fs||(fs=g(['<div id="pictures">\n      <div id="pic">\n        <bili-comment-pictures-renderer .list=',"></bili-comment-pictures-renderer>\n      </div>\n    </div>"])),this.pictures)}},{key:"render",value:function(){var e,t;return $t(vs||(vs=g(['\n      <div\n        id="body"\n        class="','"\n      >\n        <a href="','" @click=',' id="user-avatar" data-user-profile-id="','" target="_blank">\n          <bili-avatar></bili-avatar>\n        </a>\n        <div id="main">\n          <div id="header">\n            <bili-comment-user-info .data='," .upMid="," .medalVisible=","></bili-comment-user-info>\n            ","\n          </div>\n          ",'\n          <div id="content">\n            '," ","\n            <bili-rich-text\n              @text-click=",'\n              style="','"\n            ></bili-rich-text>\n            '," ","\n            ",'\n          </div>\n          <div id="footer">\n            <bili-comment-action-buttons-renderer\n              .user=',"\n              .upMid=","\n              .oid=","\n              .type=",'\n              style="','"\n              .data=',"\n              @reply=","\n              @action=","\n            ></bili-comment-action-buttons-renderer>\n          </div>\n          ","\n        </div>\n      </div>\n    "])),ea({spotlight:null!==(e=null==(t=this.data.$extra)?void 0:t.spotlight)&&void 0!==e&&e}),this.spaceLink,this.handleAvatarClick,this.uid,this.data,this.upMid,!0,this.ornamentTemplate(),this.voteOption?$t(ms||(ms=g(["<bili-comment-vote-option .data=","></bili-comment-vote-option>"])),this.voteOption):"",this.top?this.topTemplate():"",this.note?this.noteTemplate():"",this.handleTextClick,On({"--bili-rich-text-font-size":"var(--bili-comments-font-size-content)","--bili-rich-text-line-height":"var(--bili-comments-line-height-content)","--bili-rich-text-link-color":"var(--Lb6)","--bili-rich-text-display":"inline"}),this.expand?this.expandTemplate():"",this.vote?this.voteTemplate():"",this.pictures?this.picturesTemplate():"",this.user,this.upMid,this.oid,this.type,On({"--bili-comment-action-buttons-more-display":"var(--bili-comment-hover-more-display)"}),this.data,this.handleReply,this.handleAction,this.tags&&this.mainTags())}}]);var n}(dn);bp.styles=vt(bs||(bs=g(["\n    :host {\n      --bili-comment-spotlight-color: var(--brand_blue_thin);\n    }\n    #body {\n      position: relative;\n      padding-left: 80px;\n      padding-top: 22px;\n      --bili-comment-hover-more-display: none;\n    }\n    #body.spotlight {\n      background-color: var(--bili-comment-spotlight-color);\n      transition: background-color 2s 3s;\n    }\n    #body:hover {\n      --bili-comment-hover-more-display: block;\n    }\n    #user-avatar {\n      position: absolute;\n      left: 20px;\n      top: 22px;\n      width: 48px;\n      height: 48px;\n      transform-origin: left top;\n      transform: var(--bili-comments-avatar-size);\n    }\n    #ornament {\n      position: absolute;\n      right: 0;\n      top: 7px;\n      user-select: none;\n    }\n    bili-comment-vote-option {\n      margin-top: 2px;\n      margin-bottom: 6px;\n    }\n    #main {\n      width: 100%;\n    }\n    #header {\n      margin-bottom: 4px;\n    }\n    i {\n      font-size: 12px;\n      font-style: normal;\n    }\n    i#top {\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      position: relative;\n      width: 30px;\n      height: 18px;\n      border: 1px solid var(--brand_pink);\n      border-radius: 3px;\n      color: var(--brand_pink);\n      vertical-align: text-bottom;\n      margin-bottom: 0.0666em;\n    }\n    i#note {\n      width: 48px;\n      height: 22px;\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      border-radius: 4px;\n      color: var(--text3);\n      background-color: var(--bg2);\n      vertical-align: text-bottom;\n    }\n    #content {\n      font-size: var(--bili-comments-font-size-content);\n      line-height: var(--bili-comments-line-height-content);\n      color: var(--text1);\n    }\n    #content #expand {\n      color: var(--brand_blue);\n      cursor: pointer;\n    }\n    #vote {\n      margin: 10px 0;\n    }\n    #pictures {\n      display: block;\n      width: 100%;\n      margin-top: 8px;\n    }\n    #tags {\n      margin-top: 6px;\n      display: flex;\n      align-items: center;\n    }\n    .tag {\n      color: var(--bili-comment-tag-color-light, --brand_pink);\n      background-color: var(--bili-comment-tag-bg-light, ----brand_pink_thin);\n      padding: 6px;\n      border-radius: 2px;\n      box-sizing: border-box;\n      font-size: 12px;\n      line-height: 1;\n    }\n    .tag + .tag {\n      margin-left: 10px;\n    }\n  "]))),mp([mn()],bp.prototype,"data",2),mp([mn()],bp.prototype,"upMid",2),mp([mn()],bp.prototype,"user",2),mp([mn()],bp.prototype,"contentFeatures",2),mp([mn()],bp.prototype,"oid",2),mp([mn()],bp.prototype,"type",2),mp([bn()],bp.prototype,"ornament",1),mp([bn()],bp.prototype,"top",1),mp([bn()],bp.prototype,"note",1),mp([bn()],bp.prototype,"expandAction",1),mp([bn()],bp.prototype,"expand",1),mp([bn()],bp.prototype,"voteOption",1),mp([bn()],bp.prototype,"vote",1),mp([bn()],bp.prototype,"pictures",1),mp([bn()],bp.prototype,"tags",1),mp([bn()],bp.prototype,"uid",1),mp([bn()],bp.prototype,"spaceLink",1),mp([wn("bili-avatar")],bp.prototype,"biliAvatar",2),mp([wn("bili-rich-text")],bp.prototype,"biliRichText",2),mp([wn("#body")],bp.prototype,"bodyElement",2),bp=mp([hn("bili-comment-renderer")],bp);var yp=function(e){return tc.request({url:"/x/v2/reply/reply",params:v({},e)})};function gp(e,t,n){if(!n.namespaces.includes(e))return t;var i=w(t);if("findIndex"===n.method){var r=i.findIndex(n.predicate);return r>-1?i.splice(r,1):[]}return i.filter(n.predicate)}function wp(e,t,n){if(!n.namespaces.includes(e))return t;var i=w(t);return i[n.method](n.value),i}var xp=Object.defineProperty,kp=Object.getOwnPropertyDescriptor,Ap=function(e,t,n,i){for(var r,o=i>1?void 0:i?kp(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&xp(t,n,o),o},_p=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.upMid=0,e.oid="",e.type=0,e.root="",e.currentPage=1,e.pageSize=10,e.showSpinner=!1,e.showViewMore=!0,e.showPagination=!1,e.count=0,e.totalPage=0,e.cacheList=[],e.list=[],e.newItems=[],e.invisibleID={},e.user=null,e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this);var n=function(t){t.value.root_str===e.root&&(e.newItems=wp(vc,e.newItems,t))},i=function(t){if(e.isChildItem(t.value)){var n=gp(vc,[].concat(w(e.newItems),w(e.list)),t);e.updateInvisibleID(n.map((function(e){return e.rpid_str})))}};hc.on("add",n),hc.on("remove",i),this.disposables.add((function(){return hc.off("remove",i)})),this.disposables.add((function(){return hc.off("add",n)})),this.root=this.data.rpid_str,this.list=this.data.replies||[],this.count=this.data.rcount,this.totalPage=Math.ceil(this.count/this.pageSize)}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"isChildItem",value:function(e){return"".concat(e.type,",").concat(e.oid_str)=="".concat(this.type,",").concat(this.oid)}},{key:"viewMoreText",get:function(){var e,t,n=this.data,i=n.rcount,r=n.replies;if(!r||!this.data.rcount||i===(null==r?void 0:r.length))return"";var o="共".concat(this.data.rcount,"条回复");return null!=(e=this.data.reply_control)&&e.sub_reply_entry_text&&(o=null==(t=this.data.reply_control)?void 0:t.sub_reply_entry_text),o}},{key:"paginationItems",get:function(){var e=[],t=this.currentPage-1;if(this.totalPage>7){var n=t,i=t;t<=2?(n=0,i=Math.min(n+5,this.totalPage-1)):t>=this.totalPage-3?(i=this.totalPage-1,n=Math.max(i-5,0)):(i=Math.min(t+3,this.totalPage-1),n=Math.max(0,t-2)),new Array(i-n).fill(1).forEach((function(t,i){e.push({text:String(n+1+i),idx:n+i,clickable:!0})})),n>0&&(n>1&&e.unshift({text:"...",idx:-1,clickable:!1}),e.unshift({text:"1",idx:0,clickable:!0})),i<=this.totalPage-1&&(i<=this.totalPage-2&&e.push({text:"...",idx:-1,clickable:!1}),e.push({text:String(this.totalPage),idx:this.totalPage-1,clickable:!0}))}else new Array(this.totalPage).fill(1).forEach((function(t,n){e.push({text:String(1+n),idx:n,clickable:!0})}));return t>0&&e.unshift({text:"上一页",idx:t-1,clickable:!0}),this.currentPage<this.totalPage&&e.push({text:"下一页",idx:t+1,clickable:!0}),e}},{key:"getList",value:(a=i(m().mark((function e(){var t,n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.showSpinner=!0,e.next=4,yp({oid:this.oid,type:this.type,root:this.root,ps:this.pageSize,pn:this.currentPage});case 4:if(0===(n=e.sent).code&&null!=(t=n.data)&&t.replies){e.next=8;break}return this.showSpinner=!1,e.abrupt("return");case 8:i=n.data.replies,this.invisibleID={},this.list=w(i),this.showSpinner=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("getList error",e.t0),this.showSpinner=!1;case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return a.apply(this,arguments)})},{key:"handleRevert",value:function(){this.list=w(this.cacheList),this.showPagination=!1,this.showViewMore=!0}},{key:"handleViewMore",value:function(){mc("replyCardCheckClick",{parentId:this.root}),yc("click","comment.replies_check",{root:this.root}),this.user?(this.cacheList=w(this.list),this.count>this.pageSize?this.showPagination=!0:this.showViewMore=!1,this.getList()):jc({event:"selfDef.replyCardCheckClick"})}},{key:"handleChangePage",value:function(e){this.currentPage!==e.idx+1&&(this.currentPage=e.idx+1,this.getList())}},{key:"handleItemDelete",value:(n=i(m().mark((function e(t,n){var i,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w("feed"===n?this.list:this.newItems)[t],r="删除失败",e.prev=2,e.next=5,vu({title:"删除评论",message:"删除评论后，评论下所有回复都会被删除,是否继续?"});case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,rc({oid:this.oid,type:this.type,rpid:i.rpid_str});case 9:0===e.sent.code&&(this.updateInvisibleID([i.rpid_str]),r="删除成功"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("删除失败",e.t0);case 17:return e.prev=17,Jl.show(r),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(e,t){return n.apply(this,arguments)})},{key:"handleItemReport",value:function(e,t){var n={member:{mid:this.data.member.mid,uname:this.data.member.uname},oid:this.oid,type:this.type,rpid:e.rpid_str,hiddenJuryTips:t||!1};this.dispatchEvent(new CustomEvent("report",{detail:n}))}},{key:"updateInvisibleID",value:function(e){var t=v({},this.invisibleID);e.forEach((function(e){t[e]=!0})),this.invisibleID=t,this.requestUpdate()}},{key:"viewMoreTemplate",value:function(){return this.viewMoreText?$t(ys||(ys=g(['\n          <div id="view-more">\n            <span>','，</span><bili-text-button @click="','">点击查看</bili-text-button>\n          </div>\n        '])),this.viewMoreText,this.handleViewMore):""}},{key:"paginationTemplate",value:function(){var e=this;return $t(gs||(gs=g(['<div id="pagination">\n      <div id="pagination-head">共','页</div>\n      <div id="pagination-body">\n        ','\n      </div>\n      <div id="pagination-foot">\n        <bili-text-button @click="','">收起</bili-text-button>\n      </div>\n    </div>'])),this.totalPage,this.paginationItems.map((function(t){return $t(ws||(ws=g(["<bili-text-button\n              ",'\n              style="','"\n              data-idx="','"\n              @click="','"\n              >',"</bili-text-button\n            >"])),t.clickable?"":"disabled",t.idx===e.currentPage-1?On({"--_label-text-color":"var(--brand_blue)"}):"",t.idx,(function(){return e.handleChangePage(t)}),t.text)})),this.handleRevert)}},{key:"isVisibleItem",value:function(e){return!this.invisibleID[e]}},{key:"renderItem",value:function(e,t,n){var i=this;return $t(xs||(xs=g(["<bili-comment-reply-renderer\n      .oid=","\n      .type=","\n      .root=","\n      .data=","\n      .user=","\n      .upMid=","\n      .visible=","\n      .contentFeatures=","\n      @reply=","\n      @delete=","\n      @block=",'\n      @report="','"\n    ></bili-comment-reply-renderer>'])),this.oid,this.type,this.root,e,this.user,this.upMid,this.isVisibleItem(e.rpid_str),this.contentFeatures,(function(){return i.dispatchEvent(new CustomEvent("reply",{detail:e}))}),(function(){return i.handleItemDelete(t,n)}),(function(){return i.dispatchEvent(new CustomEvent("block",{detail:{mid:e.member.mid}}))}),(function(t){var n;return i.handleItemReport(e,null==(n=t.detail)?void 0:n.hiddenJuryTips)}))}},{key:"render",value:function(){var e=this;return $t(ks||(ks=g(['\n      <div id="expander">\n        <div id="expander-contents">\n          ',"\n          ","\n          ",'\n          <div id="expander-footer">\n            ',"\n          </div>\n        </div>\n      </div>\n    "])),this.list.map((function(t,n){return e.renderItem(t,n,"feed")})),this.newItems.map((function(t,n){return e.renderItem(t,n,"new")})),this.showSpinner?$t(As||(As=g(['<div id="spinner"><bili-comments-spinner></bili-comments-spinner></div>']))):"",this.showPagination?this.paginationTemplate():this.showViewMore?this.viewMoreTemplate():"")}}]);var n,a}(dn);_p.styles=vt(_s||(_s=g(["\n    #expander {\n      padding-left: 80px;\n      margin-top: 2px;\n    }\n    #expander-contents {\n      position: relative;\n    }\n    #spinner {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(var(--bg1_rgb), 0.85);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    #view-more {\n      font-size: 13px;\n      color: var(--text3);\n    }\n    #pagination {\n      display: flex;\n      align-items: center;\n      font-size: 13px;\n      color: var(--text1);\n    }\n    #expander-footer bili-text-button {\n      vertical-align: unset;\n    }\n    #pagination-head {\n      margin-right: 10px;\n    }\n    #pagination-body {\n      display: flex;\n      align-items: center;\n    }\n    #pagination-body bili-text-button,\n    #pagination-foot bili-text-button {\n      margin-left: 8px;\n    }\n    #pagination-body bili-text-button:first-child {\n      margin-left: 10px;\n    }\n  "]))),Ap([mn()],_p.prototype,"contentFeatures",2),Ap([mn()],_p.prototype,"data",2),Ap([mn()],_p.prototype,"upMid",2),Ap([mn()],_p.prototype,"oid",2),Ap([mn()],_p.prototype,"type",2),Ap([mn()],_p.prototype,"root",2),Ap([bn()],_p.prototype,"currentPage",2),Ap([bn()],_p.prototype,"showSpinner",2),Ap([bn()],_p.prototype,"showViewMore",2),Ap([bn()],_p.prototype,"showPagination",2),Ap([bn()],_p.prototype,"totalPage",2),Ap([mn({type:Array})],_p.prototype,"list",2),Ap([bn()],_p.prototype,"newItems",2),Ap([mn()],_p.prototype,"user",2),Ap([bn()],_p.prototype,"viewMoreText",1),Ap([bn()],_p.prototype,"paginationItems",1),_p=Ap([hn("bili-comment-replies-renderer")],_p);var Ep=Object.defineProperty,Cp=Object.getOwnPropertyDescriptor,Sp=function(e,t,n,i){for(var r,o=i>1?void 0:i?Cp(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Ep(t,n,o),o},Tp=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.richTextDisposables=null,e.visible=!0,e.upMid=0,e.oid="",e.type=0,e.root="",e.user=null,e.avatarSize=24,e}return p(t,e),s(t,[{key:"uid",get:function(){return this.data.member.mid}},{key:"spaceLink",get:function(){return _u.SPACE(this.uid)}},{key:"userAvatarSrc",get:function(){return Kn.getBmgSrcNext(this.data.member.avatar,{w:this.avatarSize,h:this.avatarSize,s:!0,dpr:2})}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),this.initData(),setTimeout((function(){e.disposables.add(dp(e.shadowRoot.querySelector("#user-avatar")))}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"clearRichTextDisposables",value:function(){this.richTextDisposables&&(this.richTextDisposables.dispose(),this.richTextDisposables=null)}},{key:"initData",value:function(){var e=this;this.clearRichTextDisposables(),setTimeout((function(){var t,n;e.biliRichText.setContents(tp(e.data,e.contentFeatures)),Array.from((null==(t=e.biliRichText.contentsElement)?void 0:t.children)||[]).forEach((function(t){t.dataset.userProfileId&&(e.richTextDisposables||(e.richTextDisposables=Fi()),e.richTextDisposables.add(dp(t)))})),null!=(n=e.data.$extra)&&n.spotlight&&window.setTimeout((function(){hp(e,-300),setTimeout((function(){e.startSpotlight()}),100)}),100)}))}},{key:"startSpotlight",value:(n=i(m().mark((function e(){var t,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="spotlight",this.disposables.addEventListener(this.bodyElement,"transitionend",(function(){n.bodyElement.classList.remove(t),n.bodyElement.style.removeProperty("background-color"),n.bodyElement.style.removeProperty("transition")})),this.bodyElement.classList.add(t),e.next=5,Xd(10);case 5:return this.bodyElement.style.setProperty("transition","background-color 2s 3s"),e.next=8,Xd(10);case 8:this.bodyElement.style.setProperty("background-color","transparent");case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updated",value:function(e){e.get("data")&&this.initData(),e.get("visible")&&(!1===this.visible?this.style.setProperty("display","none"):this.style.removeProperty("display"))}},{key:"handleReply",value:function(){this.dispatchEvent(new CustomEvent("reply"))}},{key:"handleAction",value:function(e){var t=e.detail,n=t.key,i=t.data;this.dispatchEvent(new CustomEvent(n,{detail:i}))}},{key:"handleTextClick",value:function(e){var t=e.detail;if(t&&"seek"===t.type){var n=Number(t.videoTime),i=Number(t.videoPart);!isNaN(n)&&!isNaN(i)&&this.dispatchEvent(new CustomEvent("seek",{detail:{time:n,part:i},composed:!0}))}}},{key:"render",value:function(){return $t(Es||(Es=g(['\n      <div id="body">\n        <div id="main">\n          <bili-comment-user-info .data='," .upMid=",'>\n            <a href="','" id="user-avatar" data-user-profile-id="','" target="_blank">\n              <img width="','" height="','" src='," />\n            </a>\n          </bili-comment-user-info>\n          <bili-rich-text\n            @text-click=",'\n            style="','"\n          ></bili-rich-text>\n        </div>\n        <div id="footer">\n          <bili-comment-action-buttons-renderer\n            .data=',"\n            .oid=","\n            .type=","\n            .root=","\n            .upMid=","\n            .user=",'\n            style="','"\n            @reply=',"\n            @action=","\n          ></bili-comment-action-buttons-renderer>\n        </div>\n      </div>\n    "])),this.data,this.upMid,this.spaceLink,this.uid,this.avatarSize,this.avatarSize,this.userAvatarSrc,this.handleTextClick,On({"--bili-rich-text-line-height":"24px","--bili-rich-text-link-color":"var(--Lb6)","--bili-rich-text-display":"inline"}),this.data,this.oid,this.type,this.root,this.upMid,this.user,On({"--bili-comment-action-buttons-more-display":"var(--bili-comment-hover-more-display)"}),this.handleReply,this.handleAction)}}]);var n}(dn);Tp.styles=vt(Cs||(Cs=g(["\n    :host {\n      --bili-comment-spotlight-color: var(--brand_blue_thin);\n    }\n    #body {\n      position: relative;\n      padding: 8px 0 8px 34px;\n      border-radius: 4px;\n      --bili-comment-hover-more-display: none;\n    }\n    #body.spotlight {\n      background-color: var(--bili-comment-spotlight-color);\n    }\n    #body:hover {\n      --bili-comment-hover-more-display: block;\n    }\n    #footer {\n      padding-right: 20px;\n    }\n    #user-avatar {\n      position: absolute;\n      left: 0;\n      width: 24px;\n      height: 24px;\n    }\n    #user-avatar img {\n      border-radius: 50%;\n    }\n  "]))),Sp([mn({type:Boolean})],Tp.prototype,"visible",2),Sp([mn({type:Object})],Tp.prototype,"data",2),Sp([mn()],Tp.prototype,"upMid",2),Sp([mn()],Tp.prototype,"oid",2),Sp([mn()],Tp.prototype,"type",2),Sp([mn()],Tp.prototype,"root",2),Sp([mn()],Tp.prototype,"user",2),Sp([mn()],Tp.prototype,"contentFeatures",2),Sp([bn()],Tp.prototype,"uid",1),Sp([bn()],Tp.prototype,"spaceLink",1),Sp([bn()],Tp.prototype,"userAvatarSrc",1),Sp([wn("bili-rich-text")],Tp.prototype,"biliRichText",2),Sp([wn("#body")],Tp.prototype,"bodyElement",2),Tp=Sp([hn("bili-comment-reply-renderer")],Tp);var Op=function(e){return tc.request({url:"/x/v2/reply/wbi/main",params:v(v({},e),{},{web_location:1315875}),chainProxy:function(e){return e.with("UNIOS_WBI_ENCODE",{active:!0,encWbiKeys:{wbiImgKey:"839c8b697b0d44dc80e9a604592bb432",wbiSubKey:"02cd020b04d64aacad6b3a08d06f8eb0"}})}})},Pp=function(e){return tc.request({url:"/x/v2/reply/subject/interaction-status",params:v({},e)})};var Ip="bili-comment-notice";function Mp(){var e={expires:Date.now()+864e5};!function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}(Ip,e)}function Lp(){var e=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return null}}(Ip);return(null==e?void 0:e.expires)||-1}function jp(e){if(("undefined"==typeof window?"undefined":k(window))<"u"&&!(Lp()<Date.now())||null==e||!e.ads)return null;for(var t in e.ads){var n=e.ads[t];if(Array.isArray(n)){var i=n[0];return i?{isEmpty:!(i.name&&i.creative_id&&i.is_ad),locId:Number(t),title:i.name,data:i}:null}}return null}function Rp(e){return e.disabled?{source:"disabled",message:e.message||"评论功能已关闭"}:e.user?e.closed?{source:"closed",message:e.message}:null:{source:"unlogin"}}function Dp(e){if(null==e||!e.options||null==e||!e.my_vote_option)return null;var t=e.options[e.my_vote_option-1];if(!t)return null;var n=t.desc;-1===n.indexOf("已投")&&(n="已投“".concat(n,"”"));var i=3;return 2===e.options.length&&(i=t.idx),v(v({},t),{},{label_kind:i,desc:n})}function Np(e,t){var n="",i="查看完整评论";return"unlogin"===e&&(n="登录后"),t>=1e4?i="查看 ".concat(Math.floor(t/1e3)/10,"万+ 条评论"):t>=1e3?i="查看 ".concat(1e3*Math.floor(t/1e3),"+ 条评论"):t>=3&&(i="查看 ".concat(t," 条评论")),"".concat(n).concat(i)}function Bp(e){if(!e.user){var t="unlogin";return{type:t,count:2,text:Np(t,e.count)}}return null}function zp(e){return 12061===e||12002===e}function Up(e){var t;return!0===(null==(t=e.control)?void 0:t.web_selection)}function Fp(e,t,n){var i,r=n||{},o=r.noTrailing,a=void 0!==o&&o,s=r.noLeading,l=void 0!==s&&s,c=r.debounceMode,u=void 0===c?void 0:c,d=!1,p=0;function h(){i&&clearTimeout(i)}function f(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=this,c=Date.now()-p;function f(){p=Date.now(),t.apply(s,r)}function v(){i=void 0}d||(!l&&u&&!i&&f(),h(),void 0===u&&c>e?l?(p=Date.now(),a||(i=setTimeout(u?v:f,e))):f():!0!==a&&(i=setTimeout(u?v:f,void 0===u?e-c:e)))}return f.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;h(),d=!n},f}var Vp='\n  @font-face {\n    font-family: "fans-num";\n    src: url("//activity.hdslb.com/blackboard/static/20240516/6fdde5f06d0b876f68573682fa59da66/v6u7v27Ucs.ttf");\n  }\n  @font-face {\n    font-family: "'.concat("medalnum",'";\n    src: url("').concat("//s1.hdslb.com/bfs/seed/jinkela/short/webui/comments",'/font/medal-num.ttf");\n  }\n  :root {\n    --bili-comments-font-size-title: 20px;\n    --bili-comments-font-size-count: 13px;\n    --bili-comments-font-size-sort: 13px;\n    --bili-comments-font-size-name: 13px;\n    --bili-comments-font-size-content: 15px;\n    --bili-comments-line-height-content: 24px;\n    --bili-comments-avatar-size: scale(0.83333333);\n  }\n  @media screen and (min-width: 1681px) {\n    :root {\n      --bili-comments-font-size-title: 24px;\n      --bili-comments-font-size-count: 14px;\n      --bili-comments-font-size-sort: 16px;\n      --bili-comments-font-size-name: 14px;\n      --bili-comments-font-size-content: 16px;\n      --bili-comments-line-height-content: 26px;\n      --bili-comments-avatar-size: scale(1);\n    }\n  }\n'),Hp=Object.defineProperty,Wp=Object.getOwnPropertyDescriptor,$p=function(e,t,n,i){for(var r,o=i>1?void 0:i?Wp(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Hp(t,n,o),o},qp=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.scrollContainer=null,e.user=null,e.params="0,0",e.oid="",e.type=0,e.mode=3,e.paginationStr=JSON.stringify({offset:""}),e.seekRpid="",e.maxViewLimit=0,e.showViewMore=!1,e.eventBubbles=!1,e.showSpinner=!0,e.showContinuations=!1,e.showContinueTrigger=!!window.IntersectionObserver,e.contentFeatures={videoTime:!0},e.showEnd=!1,e.upMid=0,e.globalOptions=[],e.notice=null,e.vote=null,e.count=0,e.rootInputPlaceholder="加载中…",e.inputDisabled=!1,e.rootInputUploadPicState=1,e.initUserDP=null,e.invisibleID={},e.loadedID={},e.isClosed=!1,e.isSelected=!1,e.limitMaskState=null,e.cmTopProtection=null,e.list=[],e.newItems=[],e.replyTarget=null,e.replyInputValue="",e.replyKeepActive=!1,e.commentBoxDisabledState=null,e.replyCommentBox=null,e.trackObserver=null,e}return p(t,e),s(t,[{key:"replyInputPlaceholder",get:function(){var e,t;return"回复 @".concat(null==(t=null==(e=this.replyTarget)?void 0:e.member)?void 0:t.uname," : ")}},{key:"voteOption",get:function(){return Dp(this.vote)}},{key:"isVisibleItem",value:function(e){return!this.invisibleID[e]}},{key:"isChildItem",value:function(e){return"".concat(e.type,",").concat(e.oid_str||e.oid)=="".concat(this.type,",").concat(this.oid)}},{key:"initReplyCommentBox",value:function(){if(!this.replyCommentBox){var e=this.shadowRoot.querySelector("#reply-commentbox bili-comment-box");e&&(this.replyCommentBox=e)}}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),this.initData();var n=function(t){if(e.isChildItem(t.value)){var n=gp(fc,[].concat(w(e.newItems),w(e.list)),t);e.updateInvisibleID(n.map((function(e){return e.rpid_str})))}},i=function(t){e.isChildItem(t.value)&&(e.newItems=wp(fc,e.newItems,t))},r=function(){e.replyCommentBox&&(e.replyKeepActive=!1,e.replyTarget=null,e.replyCommentBoxContainer.appendChild(e.replyCommentBox),e.replyCommentBox.style.setProperty("--bili-comment-box-display","none"))},o=function(t){var n=t.target,i=t.defaultInput,o=t.mount;if(n&&(e.initReplyCommentBox(),e.replyCommentBox)){if(e.commentBoxDisabledState)return"unlogin"===e.commentBoxDisabledState.source?void jc({event:"selfDef.replyCardReplyClick"}):void Jl.show(e.commentBoxDisabledState.message||"评论功能已关闭");if(e.replyTarget&&n===e.replyTarget)return void r();e.replyCommentBox.style.removeProperty("--bili-comment-box-display"),e.replyKeepActive=!0,i&&(e.replyInputValue=i),e.replyTarget=n,o(e.replyCommentBox),e.replyCommentBox.focus()}},a=function(t){var n=t.src,i=t.jumpUrl,r=!1;!function(e){var t=e.src;-1===t.indexOf("//")&&(t="//".concat(t));var n=e.root.getBoundingClientRect(),i=document.createElement("bili-alpha-video");i.setAttribute("src",t),i.setAttribute("width","600"),i.setAttribute("height","500"),i.setAttribute("autoplay",""),i.style.setProperty("position","fixed"),i.style.setProperty("top","50%"),i.style.setProperty("left","50%"),i.style.setProperty("transform","translate(-50%, -50%)"),i.style.setProperty("position","fixed"),i.style.setProperty("z-index","9999"),i.style.setProperty("top","50%"),i.style.setProperty("left","".concat(n.left+n.width/2,"px")),i.style.setProperty("transform","translate(-50%, -50%)");var r=function(){var t;null==(t=null==e?void 0:e.onClick)||t.call(e)};i.addEventListener("click",r),i.addEventListener("ended",(function t(){var n;null==(n=null==e?void 0:e.onEnded)||n.call(e),setTimeout((function(){i.removeEventListener("click",r),i.removeEventListener("ended",t),i.parentElement&&i.parentElement.removeChild(i)}),20)})),document.documentElement.appendChild(i)}({src:n,root:e,onClick:function(){i&&(r=!0,window.open(i))},onEnded:function(){i&&(r||window.open(i))}})};hc.on("remove",n),hc.on("add",i),hc.on("reply",o),hc.on("hideReply",r),hc.on("displayAlphaVideo",a),this.disposables.add((function(){return hc.off("remove",n)})),this.disposables.add((function(){return hc.off("add",i)})),this.disposables.add((function(){return hc.off("reply",o)})),this.disposables.add((function(){return function(){e.replyTarget&&r(),hc.off("hideReply",r)}})),this.disposables.add((function(){return hc.off("displayAlphaVideo",a)})),this.disposables.addEventListener(window,"message",(function(e){if(e.data&&"object"==k(e.data)){var t=e.data,n=t.images,i=t.index;if(Array.isArray(n)&&"number"==typeof i){var r=n[i];if(!(r&&r.src&&r.width&&r.height))return;$u(w(n),i)}}})),this.disposables.add(pp),this.addLoadEvent(),this.initDependencies(),this.appendGlobalStyle(),this.trackObserver=new hu({el:this,type:"show",value:{event:"comments.all",data:{ordering:3===this.mode?"heat":"time",type:this.type,oid:this.oid,version:"v2"}},handler:function(e,t,n){"show"===e&&(mc("replyCardShow",n),yc(e,t,n))}}),this.disposables.add((function(){e.trackObserver&&(e.trackObserver.dispose(),e.trackObserver=null)}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose(),this.replyCommentBox=null,this.maxViewLimit=0,this.eventBubbles=!1,this.unload()}},{key:"updated",value:function(e){e.get("params")&&(this.unload(),this.initData())}},{key:"initDependencies",value:function(){gc()}},{key:"appendGlobalStyle",value:function(){var e="bili-comments-global-style";if(!document.querySelector("#"+e)){var t=document.createElement("style");t.id=e,t.innerHTML=Vp,document.body.appendChild(t)}}},{key:"initData",value:function(){if(this.shadowRoot)if(this.params&&"string"==typeof this.params&&"0,0"!==this.params){var e=y(this.params.split(","),2),t=e[0],n=e[1];if(n&&"0"!==n&&t&&"0"!==t&&!isNaN(Number(t))){var i=this.getAttribute("mode")||"3",r=this.getAttribute("seek-id")||"",o=0,a=this.getAttribute("max-view-limit");"string"==typeof a&&(o=Number(a),isNaN(o)&&(o=0));var s=this.getAttribute("disable-video-time");"string"==typeof s&&"false"!==s&&(this.contentFeatures.videoTime=!1);var l,c=this.getAttribute("event-bubbles");if(this.parentElement&&!this.scrollContainer&&this.parentElement!==document.body){var u=getComputedStyle(this.parentElement);["auto","scroll"].includes(u.overflowY)&&(l=this.parentElement)}this.load({oid:n,type:Number(t),seekRpid:r,mode:Number(i),maxViewLimit:o,eventBubbles:null!==c,scrollContainer:l})}else console.warn("Please set correct 'data-params' attribute for bili-comments element")}else console.warn("Please set 'data-params' attribute for bili-comments element, eg: 'type,oid'")}},{key:"updateList",value:function(e){this.list=e}},{key:"clearList",value:function(){this.newItems=[],this.list=[],this.invisibleID={},this.loadedID={},this.showEnd=!1,this.showContinuations=!1,this.paginationStr=JSON.stringify({offset:""})}},{key:"unload",value:function(){this.user=null,this.notice=null,this.vote=null,this.cmTopProtection=null,this.mode=3,this.showViewMore=!1,this.clearList()}},{key:"reload",value:(C=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unload(),e.next=3,this.load(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"load",value:(E=i(m().mark((function e(t){var n,i,r,o,a,s,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t&&(n=t.oid,i=t.type,r=t.mode,o=t.seekRpid,a=t.maxViewLimit,s=t.scrollContainer,this.oid=String(n),this.type=i,r&&[2,3].includes(r)&&(this.mode=r),o&&(this.seekRpid=o),a&&a>0&&(this.maxViewLimit=a),s&&("string"==typeof s?(l=document.querySelector(s))?this.scrollContainer=l:console.warn("scrollContainer not found"):this.scrollContainer=s),this.eventBubbles=t.eventBubbles||!1),this.showSpinner=!0,this.initUser(),e.next=6,Promise.all([this.initUpGlobalActions(),this.getList(),qd()]);case 6:return e.next=8,this.requestUpdate();case 8:this.showSpinner=!1,this.handleTriggerEvent("inited"),!this.showEnd&&this.list.length<10&&this.getList(),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",(console.warn("bili comments load error",e.t0),Promise.reject(e.t0)));case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e){return E.apply(this,arguments)})},{key:"initUser",value:(_=i(m().mark((function e(){var t,n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.initUserDP=Qu(),e.next=4,Ln();case 4:if(t=e.sent,n=t.code,i=t.data,this.initUserDP.resolve(),this.initUserDP=null,0!==n||!i){e.next=9;break}return e.abrupt("return",(this.user=i,i));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.initUserDP&&(this.initUserDP.resolve(),this.initUserDP=null),console.warn("获取用户信息失败",e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return _.apply(this,arguments)})},{key:"initUpGlobalActions",value:(A=i(m().mark((function e(){var t,n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pp({oid:this.oid,type:this.type});case 3:if(t=e.sent,n=t.code,i=t.data,0===n&&i){e.next=8;break}return e.abrupt("return");case 8:this.globalOptions=Lc(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("bili comments up interaction status error",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return A.apply(this,arguments)})},{key:"addLoadEvent",value:(x=i(m().mark((function e(){var t,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.showContinueTrigger&&this.continueTrigger?(t=new IntersectionObserver(function(){var e=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[0].isIntersecting||n.showEnd){e.next=4;break}if(!n.showSpinner&&!n.showContinuations){e.next=3;break}return e.abrupt("return");case 3:n.getList();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.observe(this.continueTrigger),this.disposables.add((function(){t.unobserve(n.continueTrigger),t.disconnect()}))):this.disposables.addEventListener(this.scrollContainer||window,"scroll",Fp(100,(function(){if(!n.showSpinner&&!n.showContinuations)if(n.scrollContainer){var e=n.scrollContainer,t=e.scrollTop,i=e.scrollHeight,r=e.clientHeight;Math.ceil(t)+2*r>=i&&n.getList()}else{var o=document.documentElement,a=o.scrollTop,s=o.scrollHeight,l=window.innerHeight;Math.ceil(a)+2*l>=s&&n.getList()}})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"updateInvisibleID",value:function(e){var t=v({},this.invisibleID);e.forEach((function(e){t[e]=!0})),this.invisibleID=t,this.requestUpdate()}},{key:"handleItemDelete",value:(b=i(m().mark((function e(t,n){var i,r,o,a=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=w("feed"===n?this.list:this.newItems)[t],(null==(i=this.cmTopProtection)?void 0:i.rpid)!==(null==r?void 0:r.rpid_str)){e.next=4;break}return fu({title:"删除评论",message:this.cmTopProtection.message,cancel:{text:"我要申诉",click:function(e){e(),Iu({type:a.type,oid:a.oid,rpid:r.rpid_str})}},confirm:{text:"我知道了",click:function(e){e()}}}),e.abrupt("return");case 4:return o="删除失败",e.prev=5,e.next=8,vu({title:"删除评论",message:"删除评论后，评论下所有回复都会被删除,是否继续?"});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,rc({oid:this.oid,type:this.type,rpid:r.rpid_str});case 12:0===e.sent.code&&(this.updateInvisibleID([r.rpid_str]),o="删除成功"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("删除失败",e.t0);case 20:return e.prev=20,Jl.show(o),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[5,17,20,23]])}))),function(e,t){return b.apply(this,arguments)})},{key:"handleItemTop",value:(f=i(m().mark((function e(t,n,i){var r,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w("feed"===n?this.list:this.newItems)[t],o="".concat(i?"":"取消","置顶"),e.prev=2,e.next=5,oc({oid:this.oid,type:this.type,rpid:r.rpid_str,action:i?1:0});case 5:a=e.sent,s=a.code,o+=0===s?"成功":"失败",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o+="失败";case 13:return e.prev=13,Jl.show(o),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,10,13,16]])}))),function(e,t,n){return f.apply(this,arguments)})},{key:"handleItemReport",value:(h=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ou(v(v({},t),{},{ordering:3===this.mode?"heat":"time"}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"handleItemBlock",value:(c=i(m().mark((function e(t){var n,i,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vu({title:"拉黑用户",message:"加入黑名单后，将自动解除关注关系和对该用户的合集订阅关系，禁止该用户与我互动或查看我的空间"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,dc({fid:t.mid,act:5,re_src:15});case 7:if(n=e.sent,i=n.code,r=n.message,0===i){e.next=13;break}return Jl.show(r||"拉黑失败"),e.abrupt("return");case 13:hc.emit("remove",{namespaces:[fc,vc],method:"filter",predicate:function(e){var n;return(null==(n=e.member)?void 0:n.mid)===t.mid},value:{type:this.type,oid:this.oid,oid_str:this.oid}}),Jl.show("拉黑成功"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),Jl.show("拉黑失败");case 19:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e){return c.apply(this,arguments)})},{key:"updatePaginationStr",value:function(e){this.paginationStr=JSON.stringify({offset:e})}},{key:"updateReplyItemExtra",value:function(e,t,n){e.$extra||(e.$extra={}),e.$extra[t]=n}},{key:"getList",value:(l=i(m().mark((function e(){var t,n,i,r,o,a,s,l,c,u,d,p,h=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.showEnd){e.next=3;break}return e.abrupt("return");case 3:return this.list.length&&(this.showContinuations=!0),e.next=6,Op({oid:this.oid,type:this.type,mode:this.mode,pagination_str:this.paginationStr,plat:1,seek_rpid:0===this.list.length?this.seekRpid:void 0});case 6:if(i=e.sent,e.t0=this.showSpinner&&this.initUserDP,!e.t0){e.next=11;break}return e.next=11,this.initUserDP.promise;case 11:if(0===i.code&&i.data){e.next=14;break}return this.isClosed=zp(i.code),this.commentBoxDisabledState=Rp({user:this.user,closed:this.isClosed,message:i.message||"啥都木有~",disabled:!0}),this.showContinuations=!1,this.showSpinner&&(this.showEnd=!0),e.abrupt("return");case 14:if(r=i.data,o=r.cursor,a=r.cm_info,s=r.control,l=r.top_replies,c=r.upper,u=i.data.replies||[],d=[],this.list.length||null!=l&&l.length&&l.reverse().forEach((function(e){u.unshift(e)})),this.showSpinner&&(this.upMid=c.mid,this.notice=jp(a),this.vote=i.data.vote_card||null,this.count=(null==o?void 0:o.all_count)||0,s&&(this.rootInputPlaceholder=s.root_input_text||"",this.rootInputUploadPicState=s.upload_picture_icon_state,this.commentBoxDisabledState=Rp({user:this.user,closed:this.isClosed,message:s.root_input_text||"",disabled:s.input_disable}),s.cm_top_reply_protection&&(this.cmTopProtection={rpid:String(s.cm_top_reply_protection.protected_top_rpid),message:s.cm_top_reply_protection.popup_message})),this.isSelected=Up(i.data),this.limitMaskState=Bp({user:this.user,count:this.count}),this.limitMaskState&&(this.showEnd=!0,u=u.slice(0,this.limitMaskState.count))),null!=(t=null==o?void 0:o.pagination_reply)&&t.next_offset&&this.updatePaginationStr(null==(n=null==o?void 0:o.pagination_reply)?void 0:n.next_offset),p=!this.seekRpid,u.forEach((function(e){var t;h.loadedID[e.rpid_str]||!0!==e.invisible&&(h.loadedID[e.rpid_str]=!0,!1===p&&(e.rpid_str===h.seekRpid?(h.updateReplyItemExtra(e,"spotlight",!0),p=!0):null!=(t=e.replies)&&t.length&&e.replies.forEach((function(e){p||e.rpid_str===h.seekRpid&&(h.updateReplyItemExtra(e,"spotlight",!0),p=!0)}))),d.push(e))})),this.showContinuations=!1,!(this.showSpinner&&this.maxViewLimit>0)){e.next=22;break}return d.length&&(d.length>this.maxViewLimit&&(this.showViewMore=!0),this.updateList(this.list.concat(d.slice(0,this.maxViewLimit)))),this.showEnd=!0,e.abrupt("return");case 22:null!=o&&o.is_end&&(this.showEnd=!0),d.length&&this.updateList(this.list.concat(d)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),console.log("getList error",e.t1),this.showContinuations=!1;case 28:case"end":return e.stop()}}),e,this,[[0,25]])}))),function(){return l.apply(this,arguments)})},{key:"handleGlobalAction",value:(a=i(m().mark((function e(t){var n,i,r,o,a,s,l,c,u,d,p,h,f,v,b,y,g,w,x,k=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=t.detail)&&n.key&&null!=(i=t.detail)&&i.data){e.next=2;break}return e.abrupt("return");case 2:if(r=t.detail.key,o=t.detail.data.active,a=t.detail.text,"select"!==r){e.next=25;break}return e.prev=4,e.next=7,vu({title:a,message:o?"开启精选评论后，所有评论都需经过我的确认后再向所有用户展示。可前往PC端创作中心":"停止精选评论后，如有遗留未处理评论，可前往PC端创作中心"});case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,sc({oid:this.oid,type:this.type,action:o?ac.SELECT:ac.UNSELECT});case 11:if(s=e.sent,l=s.code,c=s.message,u=s.data,0===l){e.next=18;break}return Jl.show((null==u?void 0:u.action_toast)||c||"操作失败"),e.abrupt("return");case 18:Jl.show((null==u?void 0:u.action_toast)||c||a+"成功"),mc("interaction-submit",{type:"selection",status:o?0:1}),yc("click","comments.action.click",{action:"select",status:o?0:1}),setTimeout((function(){k.reload()}),2e3),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),Jl.show("操作失败");case 24:return e.abrupt("return");case 25:if("close"!==r){e.next=49;break}return e.prev=26,e.next=29,vu({title:a,message:o?"恢复评论后，用户可正常发表评论、参与评论互动，已有的评论也恢复正常展示":"关闭评论将会禁止任何人在此评论区发表内容，且已有评论在关闭期间将不可见"});case 29:if(e.sent){e.next=31;break}return e.abrupt("return");case 31:return e.next=33,sc({oid:this.oid,type:this.type,action:o?ac.OPEN:ac.CLOSE});case 33:if(d=e.sent,p=d.code,h=d.message,f=d.data,0===p){e.next=40;break}return Jl.show((null==f?void 0:f.action_toast)||h||"操作失败"),e.abrupt("return");case 40:Jl.show((null==f?void 0:f.action_toast)||h||a+"成功"),mc("interaction-submit",v={type:"reply",status:o?0:1}),yc("click","comments.action.click",v),setTimeout((function(){k.reload()}),2e3),e.next=48;break;case 45:e.prev=45,e.t1=e.catch(26),Jl.show("操作失败");case 48:return e.abrupt("return");case 49:if("close-danmaku"!==r){e.next=73;break}return e.prev=50,e.next=53,vu({title:a,message:o?"恢复弹幕后，用户可正常发表弹幕、参与弹幕互动，已有的弹幕也恢复正常展示":"关闭评论将会禁止任何人在此评论区发表内容，且已有评论在关闭期间将不可见"});case 53:if(e.sent){e.next=55;break}return e.abrupt("return");case 55:return e.next=57,lc({aid:this.oid,state:o?0:1});case 57:if(b=e.sent,y=b.code,g=b.message,w=b.data,0===y){e.next=64;break}return Jl.show((null==w?void 0:w.action_toast)||g||"操作失败"),e.abrupt("return");case 64:Jl.show((null==w?void 0:w.action_toast)||g||a+"成功"),mc("interaction-submit",x={type:"dm",status:o?0:1}),yc("click","comments.action.click",x),e.next=72;break;case 69:e.prev=69,e.t2=e.catch(50),Jl.show("操作失败");case 72:return e.abrupt("return");case 73:case"end":return e.stop()}}),e,this,[[4,21],[26,45],[50,69]])}))),function(e){return a.apply(this,arguments)})},{key:"handleModeChange",value:(n=i(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user||"unlogin"!==(null==(n=this.limitMaskState)?void 0:n.type)){e.next=3;break}return jc({event:"selfDef.replyOrderClick"}),e.abrupt("return");case 3:return this.mode=t.detail,this.clearList(),this.showContinuations=!0,e.next=8,this.getList();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleNoticeClose",value:function(){Mp(),this.notice=null}},{key:"handleTriggerEvent",value:function(e,t){this.eventBubbles?this.dispatchEvent(new CustomEvent("bili-comments-".concat(e),{detail:t,bubbles:!0})):this.dispatchEvent(new CustomEvent(e,{detail:t}))}},{key:"handleLimitClick",value:function(){var e;"unlogin"===(null==(e=this.limitMaskState)?void 0:e.type)&&jc({event:"selfDef.replyCardShowMore"})}},{key:"handleViewMoreClick",value:function(){this.dispatchEvent(new CustomEvent("view-more"))}},{key:"headerTemplate",value:function(){return $t(Ss||(Ss=g(['\n      <div id="header">\n        <bili-comments-header-renderer\n          .oid=',"\n          .type=","\n          .mode=","\n          .user=","\n          .upMid=","\n          .isClosed=","\n          .isSelected=","\n          .options=","\n          .notice=","\n          .vote=","\n          .count=","\n          .inputPlaceholder=","\n          .commentBoxDisabledState=","\n          .commentBoxTeleportDisabled=","\n          .uploadPicState=","\n          .scrollContainer=","\n          @mode-change=","\n          @notice-close=","\n          @action=","\n        ></bili-comments-header-renderer>\n      </div>\n    "])),this.oid,this.type,this.mode,this.user,this.upMid,this.isClosed,this.isSelected,this.globalOptions,this.notice,this.vote,this.count,this.rootInputPlaceholder,this.commentBoxDisabledState,this.maxViewLimit>0,this.rootInputUploadPicState,this.scrollContainer,this.handleModeChange,this.handleNoticeClose,this.handleGlobalAction)}},{key:"spinnerTemplate",value:function(){return $t(Ts||(Ts=g(['<div id="spinner-container">\n      <div id="title">评论</div>\n      <bili-comments-spinner></bili-comments-spinner>\n    </div> '])))}},{key:"renderItem",value:function(e,t,n){var i=this;return $t(Os||(Os=g(["<bili-comment-thread-renderer\n      .user=","\n      .upMid=","\n      .data=","\n      .visible=","\n      .oid=","\n      .type=","\n      .mode=","\n      .contentFeatures=","\n      @delete=","\n      @top=","\n      @report=","\n      @block=","\n      @expand=","\n      @seek=","\n    ></bili-comment-thread-renderer>"])),this.user,this.upMid,e,this.isVisibleItem(e.rpid_str),this.oid,this.type,this.mode,this.contentFeatures,(function(){return i.handleItemDelete(t,n)}),(function(e){return i.handleItemTop(t,n,e.detail)}),(function(e){return i.handleItemReport(e.detail)}),(function(e){return i.handleItemBlock(e.detail)}),(function(e){return i.handleTriggerEvent("expand",e.detail)}),(function(e){e.stopPropagation(),i.handleTriggerEvent("seek",e.detail)}))}},{key:"limitMaskTemplate",value:function(){var e;return $t(Ps||(Ps=g(['<div id="limit-mask">\n      <div id="limit-mask-wall"></div>\n      <div id="limit-mask-tip" @click=',">","</div>\n    </div>"])),this.handleLimitClick,null==(e=this.limitMaskState)?void 0:e.text)}},{key:"contentTemplate",value:function(){var e=this;return $t(Is||(Is=g(['\n      <div id="contents">\n        <div id="new">','</div>\n        <div id="feed">',"</div>\n        ",'\n        <div id="reply-commentbox">\n          <bili-comment-box\n            style="padding: 25px 0 10px 80px;--bili-comment-box-display: none;"\n            .oid=',"\n            .type=","\n            .mode=","\n            .reply=","\n            .inputValue=","\n            .voteOption=","\n            .keepActive=","\n            .user=","\n            .placeholder=","\n          ></bili-comment-box>\n        </div>\n      </div>\n    "])),this.newItems.map((function(t,n){return e.renderItem(t,n,"new")})),this.list.map((function(t,n){return e.renderItem(t,n,"feed")})),this.limitMaskState?this.limitMaskTemplate():"",this.oid,this.type,this.mode,this.replyTarget,this.replyInputValue,this.voteOption,this.replyKeepActive,this.user,this.replyInputPlaceholder)}},{key:"continuationsTemplate",value:function(){return $t(Ms||(Ms=g(['\n      <div id="continuations">\n        ',"\n        ","\n      </div>\n    "])),this.showContinuations?$t(Ls||(Ls=g(['<div class="bottombar">正在加载…</div>']))):"",this.showContinueTrigger?$t(js||(js=g(['<div class="trigger"></div>']))):"")}},{key:"endTemplate",value:function(){return $t(Rs||(Rs=g(['\n      <div id="end">\n        ',"\n      </div>\n    "])),this.showViewMore?$t(Ds||(Ds=g(['<div class="bottombar clickable" @click=',">查看更多评论</div>"])),this.handleViewMoreClick):$t(Ns||(Ns=g(['<div class="bottombar">没有更多评论</div>']))))}},{key:"render",value:function(){return $t(Bs||(Bs=g(["\n      ","\n      ","\n    "])),this.showSpinner?this.spinnerTemplate():$t(zs||(zs=g(["","",""])),this.headerTemplate(),this.contentTemplate()),this.showEnd?this.endTemplate():this.continuationsTemplate())}}]);var n,a,l,c,h,f,b,x,A,_,E,C}(dn);qp.styles=vt(Us||(Us=g(['\n    :host {\n      -webkit-font-smoothing: antialiased;\n    }\n\n    #spinner-container #title {\n      margin: 0;\n      color: var(--text1);\n      font-weight: 500;\n      font-size: 20px;\n      margin-bottom: 20px;\n    }\n\n    #contents {\n      padding-top: 14px;\n      position: relative;\n    }\n\n    #reply-commentbox {\n      display: none;\n      height: 0;\n      overflow: hidden;\n      opacity: 0;\n    }\n\n    #limit-mask {\n      width: 100%;\n      position: absolute;\n      bottom: -36px;\n      left: 0;\n    }\n\n    #limit-mask-wall {\n      width: 100%;\n      height: 300px;\n    }\n    #limit-mask-wall::before {\n      display: block;\n      content: "";\n      height: 80%;\n      background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, var(--bg1) 100%);\n    }\n    #limit-mask-wall::after {\n      display: block;\n      content: "";\n      height: 20%;\n      background: var(--bg1);\n    }\n    #limit-mask-tip {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-left: 80px;\n      width: calc(100% - 80px);\n      height: 50px;\n      border-radius: 6px;\n      font-size: 14px;\n      color: var(--brand_blue);\n      background-color: var(--brand_blue_thin);\n      transition: 0.2s;\n      cursor: pointer;\n    }\n    .bottombar {\n      width: 100%;\n      margin-top: 20px;\n      font-size: 13px;\n      color: var(--text3);\n      text-align: center;\n      user-select: none;\n    }\n    .bottombar.clickable:hover {\n      cursor: pointer;\n      color: var(--brand_blue);\n    }\n    #continuations .trigger {\n      width: 100%;\n      height: 40px;\n    }\n    #end .bottombar {\n      padding-bottom: 100px;\n    }\n    #end .bottombar.clickable {\n      padding-bottom: 20px;\n    }\n  ']))),$p([bn()],qp.prototype,"scrollContainer",2),$p([bn()],qp.prototype,"user",2),$p([mn({attribute:"data-params"})],qp.prototype,"params",2),$p([bn()],qp.prototype,"mode",2),$p([bn()],qp.prototype,"showSpinner",2),$p([bn()],qp.prototype,"showContinuations",2),$p([bn()],qp.prototype,"showContinueTrigger",2),$p([bn()],qp.prototype,"contentFeatures",2),$p([bn()],qp.prototype,"showEnd",2),$p([bn()],qp.prototype,"upMid",2),$p([bn()],qp.prototype,"globalOptions",2),$p([bn()],qp.prototype,"notice",2),$p([bn()],qp.prototype,"vote",2),$p([bn()],qp.prototype,"count",2),$p([bn()],qp.prototype,"rootInputPlaceholder",2),$p([bn()],qp.prototype,"inputDisabled",2),$p([bn()],qp.prototype,"rootInputUploadPicState",2),$p([bn()],qp.prototype,"limitMaskState",2),$p([bn()],qp.prototype,"list",2),$p([bn()],qp.prototype,"newItems",2),$p([bn()],qp.prototype,"replyTarget",2),$p([bn()],qp.prototype,"replyInputValue",2),$p([bn()],qp.prototype,"replyKeepActive",2),$p([bn()],qp.prototype,"replyInputPlaceholder",1),$p([bn()],qp.prototype,"commentBoxDisabledState",2),$p([bn()],qp.prototype,"voteOption",1),$p([wn("#continuations .trigger")],qp.prototype,"continueTrigger",2),$p([wn("#reply-commentbox")],qp.prototype,"replyCommentBoxContainer",2),qp=$p([hn("bili-comments")],qp);var Gp=Object.defineProperty,Xp=Object.getOwnPropertyDescriptor,Zp=function(e,t,n,i){for(var r,o=i>1?void 0:i?Xp(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Gp(t,n,o),o},Yp="bili-comments-bottom-fixed-wrapper",Qp=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.oid="",e.type=0,e.user=null,e.isClosed=!1,e.isSelected=!1,e.options=[],e.notice=null,e.vote=null,e.titleVisible=!0,e.count=0,e.mode=3,e.inputPlaceholder="",e.commentBoxDisabledState=null,e.commentBoxTeleportDisabled=!1,e.uploadPicState=1,e.scrollContainer=null,e.commentboxInited=!1,e.revertTeleportCommentbox=null,e.showMoreMenu=!1,e.moreMenuInited=!1,e}return p(t,e),s(t,[{key:"voteOption",get:function(){return Dp(this.vote)}},{key:"sortClass",get:function(){return 3===this.mode?"hot":2===this.mode?"time":""}},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.initMoreMenu(),this.initCommentbox()}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"update",value:function(e){u(d(t.prototype),"update",this).call(this,e),e.get("options")&&this.initMoreMenu(),e.get("user")&&this.initCommentbox()}},{key:"initMoreMenu",value:function(){var e=this;this.menu&&(this.moreMenuInited||setTimeout((function(){e.disposables.addEventListener(e.menu,"mouseleave",(function(){e.showMoreMenu=!1}))})))}},{key:"initCommentbox",value:function(){var e=this;this.commentBoxDisabledState||this.commentboxInited||(this.commentboxInited=!0,!this.commentBoxTeleportDisabled&&setTimeout((function(){if(window.IntersectionObserver){var t=new IntersectionObserver(function(){var t=i(m().mark((function t(n){var i,r,o,a,s,l;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.scrollContainer){t.next=6;break}if(i=e.scrollContainer.scrollTop,r=e.commentboxEl.offsetTop-e.scrollContainer.offsetTop,o=e.scrollContainer.clientHeight,!(r-i>o)){t.next=4;break}return t.abrupt("return");case 4:t.next=9;break;case 6:if(a=e.commentboxEl.getBoundingClientRect(),s=a.top,l=window.innerHeight,!(s>=l)){t.next=9;break}return t.abrupt("return");case 9:e.teleportCommentbox(n[0].isIntersecting);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());t.observe(e.commentboxEl),e.disposables.add((function(){t.unobserve(e.commentboxEl),t.disconnect()})),e.disposables.addEventListener(window,"resize",(function(){e.updateBottomFixedWrapperStyle()}))}})))}},{key:"updateBottomFixedWrapperStyle",value:function(){var e;if(this.commentboxEl&&this.revertTeleportCommentbox){var t=((null==(e=this.scrollContainer)?void 0:e.parentElement)||this.shadowRoot).querySelector(".".concat(Yp));if(t){var n=this.commentboxEl.getBoundingClientRect(),i=n.width,r=n.left;t.style.width="".concat(i,"px"),t.style.left="".concat(r,"px")}}}},{key:"teleportCommentbox",value:function(e){var t,n=this;if(e)return null==(t=this.revertTeleportCommentbox)||t.call(this),void(this.revertTeleportCommentbox=null);var i=this.commentboxEl.children[0],r=this.commentboxEl.getBoundingClientRect(),o=r.width,a=r.height,s=r.left;this.commentboxEl.style.setProperty("--bili-comments-commentbox-height","".concat(a,"px"));var l=document.createElement("div");l.className=Yp,l.style.position=this.scrollContainer?"absolute":"fixed",l.style.bottom="0",l.style.left="".concat(s,"px"),l.style.width="".concat(o,"px"),l.style.zIndex="1";var c=document.createElement("div");c.appendChild(i),c.style.width="100%",c.style.padding="15px 0",c.style.position="relative",c.style.backgroundColor="var(--bg1)",c.style.borderTop="0.5px solid var(--graph_bg_thick)",l.appendChild(c);var u=this.shadowRoot,d=!1;this.scrollContainer&&this.scrollContainer.parentElement&&this.scrollContainer.parentElement!==document.body&&(u=this.scrollContainer.parentElement,"static"===getComputedStyle(u).position&&(d=!0,u.style.position="relative")),u.appendChild(l),this.revertTeleportCommentbox=function(){n.commentboxEl.appendChild(i),u.removeChild(l),d&&u instanceof HTMLElement&&(u.style.position=""),n.commentboxEl.style.setProperty("--bili-comments-commentbox-height","".concat(i.clientHeight,"px")),setTimeout((function(){n.commentboxEl.style.removeProperty("--bili-comments-commentbox-height")}),300)}}},{key:"handleChangeMode",value:function(e){this.mode!==e&&this.dispatchEvent(new CustomEvent("mode-change",{detail:e}))}},{key:"handleMore",value:function(){this.showMoreMenu=!0}},{key:"handleSelectOption",value:function(e){this.showMoreMenu=!1,this.dispatchEvent(new CustomEvent("action",{detail:e.detail}))}},{key:"handleNoticeClose",value:function(){this.dispatchEvent(new CustomEvent("notice-close"))}},{key:"handleLogin",value:function(){jc({event:"selfDef.relpyInputClick"})}},{key:"noticeTemplate",value:function(){return $t(Fs||(Fs=g(['\n      <div id="notice">',"</div>\n    "])),$t(Vs||(Vs=g(["<bili-comments-notice .data="," @close=","></bili-comments-notice>"])),this.notice,this.handleNoticeClose))}},{key:"voteTemplate",value:function(){return $t(Hs||(Hs=g(['\n      <div id="vote">\n        ',"\n      </div>\n    "])),$t(Ws||(Ws=g(["<bili-comments-vote-card\n          .data=","\n          .oid=","\n          .type=","\n          .user=","\n        ></bili-comments-vote-card>"])),this.vote,this.oid,this.type,this.user))}},{key:"sortTemplate",value:function(){var e=this;return this.isSelected?$t($s||($s=g(['<div id="sort-title">精选评论</div>']))):$t(qs||(qs=g(['<div\n          id="sort-actions"\n          class=',"\n        >\n          <bili-text-button @click=",'>最热</bili-text-button>\n          <div class="sort-div"></div>\n          <bili-text-button @click=',">最新</bili-text-button>\n        </div>"])),this.sortClass?ea(c({},this.sortClass,!0)):"",(function(){return e.handleChangeMode(3)}),(function(){return e.handleChangeMode(2)}))}},{key:"navbarTemplate",value:function(){return $t(Gs||(Gs=g(['\n      <div id="navbar">\n        ',"\n        ","\n        ","\n      </div>\n    "])),this.titleVisible&&$t(Xs||(Xs=g(['\n          <div id="title">\n            <h2>评论</h2>\n            <div id="count">',"</div>\n          </div>\n        "])),this.count),this.isClosed?"":this.sortTemplate(),this.options.length?$t(Zs||(Zs=g([' <div id="more">\n              <button @click=','>\n                <bili-icon size="16" icon="BDC/more_vertical_fill/1"></bili-icon>\n              </button>\n              <bili-comment-menu\n                style="','"\n                .options=',"\n                @select=","\n              ></bili-comment-menu>\n            </div>"])),this.handleMore,this.showMoreMenu?On({"--bili-comment-menu-display":"block"}):"",this.options,this.handleSelectOption):"")}},{key:"disabledCommentboxTemplate",value:function(){var e,t,n;return $t(Ys||(Ys=g(['\n      <div id="disabled-commentbox">\n        <div id="user-avatar">\n          <img\n            src="','"\n            width="48"\n            height="48"\n          />\n        </div>\n        ',"\n      </div>\n    "])),Kn.getBmgSrcNext((null==(e=this.user)?void 0:e.face)||"//i0.hdslb.com/bfs/face/member/noface.jpg",{w:48,h:48,dpr:2}),"unlogin"===(null==(t=this.commentBoxDisabledState)?void 0:t.source)?$t(Qs||(Qs=g(['<div id="edit">\n              <div>请先</div>\n              <button @click=',">登录</button>\n              <div>后发表评论 (・ω・)</div>\n            </div>"])),this.handleLogin):$t(Ks||(Ks=g(['<div id="edit">\n              <div>',"</div>\n            </div>"])),(null==(n=this.commentBoxDisabledState)?void 0:n.message)||"啥都木有"))}},{key:"commentboxTemplate",value:function(){return $t(Js||(Js=g(['\n      <div id="commentbox">\n        ',"\n      </div>\n    "])),this.commentBoxDisabledState?this.disabledCommentboxTemplate():$t(el||(el=g(["<bili-comment-box\n              .oid=","\n              .type=","\n              .mode=","\n              .user=","\n              .placeholder=","\n              .uploadPicState=","\n              .voteOption=","\n              .scrollContainer=","\n            ></bili-comment-box>"])),this.oid,this.type,this.mode,this.user,this.inputPlaceholder,this.uploadPicState,this.voteOption,this.scrollContainer))}},{key:"render",value:function(){return $t(tl||(tl=g(["\n      "," "," "," ","\n    "])),this.notice?this.noticeTemplate():"",this.vote&&this.voteTemplate(),this.navbarTemplate(),this.commentboxTemplate())}}])}(dn);Qp.styles=vt(nl||(nl=g(["\n    #notice {\n      margin-bottom: 10px;\n    }\n    #vote {\n      margin-bottom: 24px;\n    }\n    #navbar {\n      display: flex;\n      align-items: center;\n      height: 28px;\n      margin-bottom: 22px;\n    }\n    #title {\n      display: flex;\n      align-items: center;\n    }\n    #title h2 {\n      margin: 0;\n      color: var(--text1);\n      font-weight: 500;\n      font-size: var(--bili-comments-font-size-title, 20px);\n    }\n    #title #count {\n      margin: 0 30px 0 6px;\n      font-size: var(--bili-comments-font-size-count, 13px);\n      font-weight: 400;\n      color: var(--text3);\n    }\n\n    #sort-title {\n      font-weight: 500;\n      color: var(--text1);\n    }\n\n    #sort-actions .sort-div {\n      display: inline-block;\n      height: 11px;\n      margin: 0 3px;\n      border-left: solid 1px var(--text3);\n      vertical-align: -2px;\n    }\n\n    #sort-actions bili-text-button {\n      --_container-height: 28px;\n      --_leading-space: 6px;\n      --_trailing-space: 6px;\n      --_label-text-size: var(--bili-comments-font-size-sort, 13px);\n      --_label-text-color: var(--text3);\n    }\n\n    #sort-actions.hot bili-text-button:first-child {\n      --_label-text-color: var(--text1);\n    }\n    #sort-actions.time bili-text-button:last-child {\n      --_label-text-color: var(--text1);\n    }\n    #commentbox {\n      flex-shrink: 0;\n      transition: height 0.2s;\n      height: var(--bili-comments-commentbox-height, auto);\n    }\n    #more {\n      margin-left: auto;\n      width: 24px;\n      height: 24px;\n      position: relative;\n    }\n    #more button {\n      width: 24px;\n      height: 24px;\n      text-align: center;\n      padding: 0;\n      outline: none;\n      border: none;\n      background: transparent;\n      font-size: 13px;\n      color: var(--text3);\n      display: inline-flex;\n      align-items: center;\n      cursor: pointer;\n      justify-content: end;\n    }\n    #disabled-commentbox {\n      display: flex;\n      height: 50px;\n    }\n    #disabled-commentbox #user-avatar {\n      flex-shrink: 0;\n      width: 80px;\n      height: 50px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    #disabled-commentbox #user-avatar img {\n      border-radius: 50%;\n    }\n    #disabled-commentbox #edit {\n      flex: 1;\n      height: 100%;\n      border-radius: 6px;\n      font-size: 12px;\n      color: var(--text3);\n      background-color: var(--bg3);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    #disabled-commentbox #edit button {\n      box-sizing: border-box;\n      padding: 4px 9px;\n      margin: 0 3px;\n      border-radius: 4px;\n      color: var(--text_white);\n      background-color: var(--brand_blue);\n      outline: none;\n      border: none;\n      cursor: pointer;\n      font-size: 12px;\n    }\n    #disabled-commentbox #edit button:hover {\n      background-color: var(--Lb4);\n    }\n  "]))),Zp([mn()],Qp.prototype,"oid",2),Zp([mn()],Qp.prototype,"type",2),Zp([mn()],Qp.prototype,"user",2),Zp([mn()],Qp.prototype,"isClosed",2),Zp([mn()],Qp.prototype,"isSelected",2),Zp([mn()],Qp.prototype,"options",2),Zp([mn()],Qp.prototype,"notice",2),Zp([mn()],Qp.prototype,"vote",2),Zp([mn({type:Boolean})],Qp.prototype,"titleVisible",2),Zp([mn({type:Number})],Qp.prototype,"count",2),Zp([mn({type:String})],Qp.prototype,"mode",2),Zp([mn({type:String})],Qp.prototype,"inputPlaceholder",2),Zp([mn({type:Object})],Qp.prototype,"commentBoxDisabledState",2),Zp([mn({type:Boolean})],Qp.prototype,"commentBoxTeleportDisabled",2),Zp([mn({type:Number})],Qp.prototype,"uploadPicState",2),Zp([bn()],Qp.prototype,"voteOption",1),Zp([mn()],Qp.prototype,"scrollContainer",2),Zp([bn()],Qp.prototype,"showMoreMenu",2),Zp([bn()],Qp.prototype,"sortClass",1),Zp([wn("#commentbox")],Qp.prototype,"commentboxEl",2),Zp([wn("bili-comment-menu")],Qp.prototype,"menu",2),Qp=Zp([hn("bili-comments-header-renderer")],Qp);var Kp=Object.defineProperty,Jp=Object.getOwnPropertyDescriptor,eh=function(e,t,n,i){for(var r,o=i>1?void 0:i?Jp(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Kp(t,n,o),o},th=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).i18r=null,e.isIntersecting=!1,e.isReported=!1,e}return p(t,e),s(t,[{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),window.IntersectionObserver&&(this.i18r=new IntersectionObserver((function(t){var n=t[0];n&&n.target===e&&(e.isIntersecting=n.isIntersecting,!e.isReported&&n.isIntersecting&&e.cmReport())})),this.i18r.observe(this))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.clearI18r(),this.isReported=!1}},{key:"clearI18r",value:function(){this.isIntersecting=!1,this.i18r&&(this.i18r.disconnect(),this.i18r=null)}},{key:"cmReport",value:function(){var e,t=this;if(null!=(e=window.BiliCm)&&e.Base){this.isReported=!0;var n=this.data,i=n.isEmpty,r=n.data,o=n.locId;window.BiliCm.Base.sendShowData(r,o),i?this.clearI18r():setTimeout((function(){var e;null!=(e=window.BiliCm)&&e.Base&&(t.isIntersecting&&window.BiliCm.Base.sendStrictShowData(r,o),t.clearI18r())}),1e3)}}},{key:"handleJump",value:function(){mc("playpage_anoun"),yc("show","comments.notice",{});var e=function(e,t){return window.BiliCm?window.BiliCm.Base.getSyncUrl(e,t):e.url}(this.data.data,this.data.locId);e&&window.open(e,"_blank")}},{key:"handleClose",value:function(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("close"))}},{key:"render",value:function(){return $t(il||(il=g(['\n      <div\n        id="bar"\n        style=',"\n        @click=",'\n      >\n        <div id="bg"></div>\n        <bili-icon icon="BDC/speaker_notice_fill/1" size="14"></bili-icon>\n        <div id="title">','</div>\n        <div id="close" @click=','>\n          <bili-icon icon="BDC/xmark_close_line/1" size="16"></bili-icon>\n        </div>\n      </div>\n    '])),On({display:this.data.isEmpty?"none":"flex"}),this.handleJump,this.data.title,this.handleClose)}}])}(dn);th.styles=vt(rl||(rl=g(["\n    :host {\n      display: block;\n    }\n    #bar {\n      display: flex;\n      align-items: center;\n      position: relative;\n      height: 40px;\n      padding: 0 10px;\n      font-size: 12px;\n      color: var(--Ye5_u);\n      cursor: pointer;\n    }\n    #bg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border-radius: 2px;\n      background-color: var(--Ye5_u);\n      opacity: 0.2;\n      pointer-events: none;\n    }\n    #title {\n      position: relative;\n      z-index: 1;\n      margin-right: auto;\n      flex: 1;\n      padding: 0 5px;\n      vertical-align: top;\n      word-wrap: break-word;\n      word-break: break-all;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    #close {\n      position: relative;\n      z-index: 1;\n      display: flex;\n    }\n  "]))),eh([mn()],th.prototype,"data",2),th=eh([hn("bili-comments-notice")],th);var nh=Object.defineProperty,ih=Object.getOwnPropertyDescriptor,rh=function(e,t,n,i){for(var r,o=i>1?void 0:i?ih(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&nh(t,n,o),o},oh=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).mask=!1,e.maskClosable=!0,e.titleText="",e.width=600,e}return p(t,e),s(t,[{key:"handleClose",value:function(){this.maskClosable&&this.hide()}},{key:"hide",value:function(){this.parentElement&&this.parentElement.removeChild(this)}},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.initData()}},{key:"initData",value:function(){var e=this.getAttribute("title"),t=Number(this.getAttribute("width"));e&&(this.titleText=e||"详情"),t&&!isNaN(t)&&(this.width=t)}},{key:"render",value:function(){return $t(ol||(ol=g(["\n      ",'\n      <div\n        id="wrap"\n        style="','"\n      >\n        <div id="header">\n          <div id="title">','</div>\n          <div id="close" @click=','><bili-icon icon="BDC/xmark_close_line/1" size="22"></bili-icon></div>\n        </div>\n        <div id="content">\n          <slot></slot>\n        </div>\n      </div>\n    '])),this.mask?$t(al||(al=g(['<div id="mask" @click=',"></div>"])),this.handleClose):$t(sl||(sl=g([""]))),On({width:"".concat(this.width,"px")}),this.titleText,this.hide)}}])}(dn);oh.styles=vt(ll||(ll=g(["\n    :host {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    #mask {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.5);\n    }\n    #wrap {\n      position: relative;\n      width: 100%;\n      border-radius: 6px;\n      box-shadow: 0 0 25px #00000026;\n      background-color: var(--bg1);\n      overflow: hidden;\n      max-height: 100vh;\n      display: flex;\n      flex-direction: column;\n    }\n    #header {\n      box-sizing: border-box;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      flex-shrink: 0;\n      padding: 0 10px;\n      border-bottom: 0.5px solid var(--line_light);\n      position: relative;\n      color: var(--text1);\n    }\n    #close {\n      cursor: pointer;\n      position: absolute;\n      right: 10px;\n      color: var(--text2);\n    }\n    #content {\n      height: calc(100% - 50px);\n      overflow-y: auto;\n    }\n    ::slotted(iframe) {\n      width: 100%;\n      height: 100%;\n      border: none;\n    }\n  "]))),rh([mn({type:Boolean})],oh.prototype,"mask",2),rh([mn({type:Boolean})],oh.prototype,"maskClosable",2),rh([mn()],oh.prototype,"titleText",2),rh([bn()],oh.prototype,"width",2),oh=rh([hn("bili-comments-popup")],oh);var ah=Object.defineProperty,sh=Object.getOwnPropertyDescriptor,lh=function(e){function t(){return o(this,t),r(this,t,arguments)}return p(t,e),s(t,[{key:"render",value:function(){return $t(cl||(cl=g(['\n      <div id="spinner">\n        <img width="24" height="24" src="//i0.hdslb.com/bfs/static/jinkela/long/gif/loading-blue.gif" />\n        <span>正在玩命加载…</span>\n      </div>\n    '])))}}])}(dn);lh.styles=vt(ul||(ul=g(["\n    #spinner {\n      padding: 20px 0;\n      width: 100%;\n      text-align: center;\n      font-size: 14px;\n      color: var(--text3);\n    }\n    #spinner img {\n      margin-right: 8px;\n      vertical-align: bottom;\n    }\n  "]))),lh=function(e,t,n,i){for(var r,o=i>1?void 0:i?sh(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&ah(t,n,o),o}([hn("bili-comments-spinner")],lh);var ch=Object.defineProperty,uh=Object.getOwnPropertyDescriptor,dh=function(e,t,n,i){for(var r,o=i>1?void 0:i?uh(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&ch(t,n,o),o},ph=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).oid="",e.type=0,e.user=null,e}return p(t,e),s(t,[{key:"isDuel",get:function(){return 2===this.data.options.length}},{key:"optionIdx",get:function(){return this.data.my_vote_option||0}},{key:"handleClick",value:function(){Tu(this.data.vote_id)}},{key:"handleOptionClick",value:(n=i(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=3;break}return jc({event:"selfDef.voteCardClick"}),e.abrupt("return");case 3:if(!(this.optionIdx>0)){e.next=5;break}return e.abrupt("return");case 5:return n=t.idx,e.prev=6,e.next=9,cc({option:n,vote_id:this.data.vote_id,oid:this.oid,type:this.type});case 9:this.data.my_vote_option=n,this.data.count?this.data.count+=1:this.data.count=1,this.data.options[n-1].count?this.data.options[n-1].count+=1:this.data.options[n-1].count=1,this.requestUpdate(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[6,15]])}))),function(e){return n.apply(this,arguments)})},{key:"duelOptionTemplate",value:function(e){var t=this,n=this.optionIdx,i=0!==n,r="".concat(n?Math.round((e.count||0)/this.data.count*100):50,"%");return $t(dl||(dl=g(['<div\n      class="','"\n      style="','"\n      @click=','\n    >\n      <div class="option-info">\n        <div class="option-desc">',"</div>\n        ",'\n      </div>\n      <div class="option-skew">\n        <div class="option-skew-fill"></div>\n      </div>\n      ',"\n    </div>"])),ea(c({option:!0},1===e.idx?"left":"right",!0)),i?On({"--option-opacity":".8","--option-width":r,"--option-color":"var(--text_white)","--option-font-size":"12px","--option-cursor":"default"}):"",(function(){return t.handleOptionClick(e)}),e.desc,i?$t(pl||(pl=g(['<div class="option-ratio">',"</div>"])),r):"",e.idx===n?$t(hl||(hl=g(['<bili-icon icon="BDC/checkmark_circle_fill/1" size="20"></bili-icon>']))):"")}},{key:"duelTemplate",value:function(){var e=this;return $t(fl||(fl=g(['<div id="duel">',"</div>"])),this.data.options.map((function(t){return e.duelOptionTemplate(t)})))}},{key:"render",value:function(){return $t(vl||(vl=g(['\n      <div id="card">\n        <div id="info">\n          <div id="title">\n            <bili-icon icon="BDC/vote_line/2" size="16"></bili-icon>\n            <span>',"</span>\n          </div>\n          ","\n        </div>\n        ","\n      </div>\n    "])),this.data.title,this.isDuel?$t(ml||(ml=g(['<div id="desc">\n                <div id="count">',"人参与</div>\n              </div>"])),this.data.count||0):$t(bl||(bl=g(['<div id="desc">\n                <div id="count">','人参与</div>\n                <div id="split">|</div>\n                ',"\n              </div>"])),this.data.count||0,this.optionIdx>0?$t(yl||(yl=g(['<div id="status">已投票 ·&nbsp;</div>\n                      <bili-text-button .trailingIcon=',' id="action" @click=','>\n                        查看投票结果 <bili-icon slot="icon" icon="BDC/arrow_forward_right_line/3" size="12"></bili-icon\n                      ></bili-text-button> '])),!0,this.handleClick):$t(gl||(gl=g(['<bili-text-button id="action" @click=',">去投票</bili-text-button>"])),this.handleClick)),this.isDuel?this.duelTemplate():"")}}]);var n}(dn);ph.styles=vt(wl||(wl=g(["\n    :host {\n      --option-opacity: 0.15;\n      --option-width: 50%;\n      --option-radius: 6px;\n      --option-font-size: 13px;\n      --option-color: var(--Pi10_u);\n      --option-cursor: pointer;\n    }\n    #card {\n      width: 100%;\n      height: 80px;\n      display: flex;\n      border-radius: 6px;\n      background-color: var(--graph_bg_thin);\n      padding: 12px 16px 12px 10px;\n      box-sizing: border-box;\n      align-items: center;\n    }\n\n    #info {\n      flex: 1;\n      color: var(--option-color);\n    }\n\n    #duel {\n      flex-shrink: 0;\n      width: 60%;\n      margin-left: 30px;\n      height: 40px;\n      display: flex;\n    }\n\n    #info #title {\n      color: var(--text1);\n      font-size: 13px;\n      display: flex;\n      align-items: center;\n    }\n    #info #title span {\n      margin-left: 2px;\n    }\n    #info #desc {\n      margin-top: 4px;\n      color: var(--text3);\n      display: flex;\n      font-size: 12px;\n      align-items: center;\n    }\n    #info #desc #split {\n      color: var(--line_regular);\n      margin: 0px 6px;\n    }\n\n    #duel .option {\n      position: relative;\n      display: flex;\n      min-width: 120px;\n      align-items: center;\n      justify-content: space-between;\n      height: 40px;\n      width: var(--option-width);\n      color: var(--option-color);\n      font-size: var(--option-font-size);\n      cursor: var(--option-cursor);\n    }\n    #duel .option.left {\n      margin-right: 30px;\n      padding-left: 10px;\n      border-radius: var(--option-radius) 0 0 var(--option-radius);\n      background-color: rgba(255, 102, 153, var(--option-opacity));\n    }\n    #duel .option.right {\n      flex-direction: row-reverse;\n      text-align: right;\n      padding-right: 10px;\n      border-radius: 0 var(--option-radius) var(--option-radius) 0;\n      background-color: rgba(0, 174, 236, var(--option-opacity));\n    }\n    #duel .option-skew {\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 20px;\n      overflow: hidden;\n      opacity: var(--option-opacity);\n      pointer-events: none;\n    }\n    #duel .option-skew-fill {\n      pointer-events: all;\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 100%;\n    }\n    #duel .option.left .option-skew {\n      right: -20px;\n    }\n    #duel .option.right .option-skew {\n      left: -20px;\n    }\n    #duel .option.left .option-skew-fill {\n      left: -8px;\n      background-color: #f69;\n      transform: skew(21deg);\n      border-top-right-radius: calc(var(--option-radius) - 2px);\n      border-bottom-right-radius: var(--option-radius);\n    }\n    #duel .option.right .option-skew-fill {\n      left: 8px;\n      background-color: #00aeec;\n      transform: skew(21deg);\n      border-top-left-radius: var(--option-radius);\n      border-bottom-left-radius: calc(var(--option-radius) - 2px);\n    }\n  "]))),dh([mn({type:Object})],ph.prototype,"data",2),dh([mn()],ph.prototype,"oid",2),dh([mn()],ph.prototype,"type",2),dh([mn()],ph.prototype,"user",2),dh([bn()],ph.prototype,"isDuel",1),dh([bn()],ph.prototype,"optionIdx",1),ph=dh([hn("bili-comments-vote-card")],ph);var hh=function(){return s((function e(t){var n=this;if(o(this,e),this.disposables=Fi(),"TEXTAREA"!==t.tagName)throw new Error("TextareaAutoSize can only be used on textarea elements");this.element=t,this.verticalBorderSize=this.getStyleProp("borderTopWidth")+this.getStyleProp("borderBottomWidth")||0,this.disposables.addEventListener(this.element,"input",(function(){n.update()})),this.update()}),[{key:"destroy",value:function(){this.disposables.dispose(),this.element=null}},{key:"update",value:function(){var e=this.getStyleProp("fontSize");this.element.style.height="".concat(e,"px");var t=this.element.scrollHeight+this.verticalBorderSize;this.element.style.height="".concat(t,"px")}},{key:"getStyleProp",value:function(e){var t=getComputedStyle(this.element,null);return parseInt(t[e])}}])}(),fh=Object.defineProperty,vh=Object.getOwnPropertyDescriptor,mh=function(e,t,n,i){for(var r,o=i>1?void 0:i?vh(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&fh(t,n,o),o},bh=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.value="",e.placeholder="请输入你想评论的内容",e.rows=1,e.isFocus=!1,e.selection={start:0,end:0},e}return p(t,e),s(t,[{key:"getSelection",value:function(){return v({},this.selection)}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),setTimeout((function(){var t=new hh(e.input);e.disposables.add((function(){t.destroy()}))}))}},{key:"handleFocus",value:function(e){e.stopPropagation(),this.isFocus="focus"===e.type,this.dispatchEvent(new CustomEvent(e.type))}},{key:"handleSelectionChange",value:function(e){var t=e.selectionStart,n=e.selectionEnd;t===this.selection.start&&n===this.selection.end||(this.selection.start=e.selectionStart,this.selection.end=e.selectionEnd,this.dispatchEvent(new CustomEvent("selection-change",{detail:v({},this.selection)})))}},{key:"handleClick",value:function(e){e.stopPropagation(),this.handleSelectionChange(e.target)}},{key:"handleInput",value:function(e){var t=e.target;e.stopPropagation(),this.value=t.value,this.dispatchInputEvent()}},{key:"handleKeydown",value:function(e){e.stopPropagation()}},{key:"handleKeyup",value:function(e){e.stopPropagation();var t=e.target;this.handleSelectionChange(t)}},{key:"dispatchInputEvent",value:function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value}))}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"insertText",value:function(e,t){var n=this,i=this.input;t||(t={start:i.selectionStart,end:i.selectionEnd});var r=t,o=r.start,a=r.end,s=this.value;this.value=s.slice(0,o)+e+s.slice(a),this.dispatchInputEvent(),setTimeout((function(){i.selectionStart=i.selectionEnd=o+e.length,n.handleSelectionChange(i),n.focus()}))}},{key:"render",value:function(){return $t(xl||(xl=g(['\n      <textarea\n        id="input"\n        .value=',"\n        .placeholder=",'\n        class="','"\n        @focus=',"\n        @blur=","\n        @click=","\n        @keydown=","\n        @keyup=","\n        @input=","\n      ></textarea>\n    "])),this.value,this.placeholder,ea({active:!!this.value}),this.handleFocus,this.handleFocus,this.handleClick,this.handleKeydown,this.handleKeyup,this.handleInput)}}])}(dn);bh.styles=vt(kl||(kl=g(["\n    :host {\n      --bili-comment-textarea-bg: transparent;\n      --bili-comment-textarea-color: var(--text1);\n      --bili-comment-textarea-placeholder-color: var(--text3);\n      --bili-comment-textarea-padding: 8px;\n      --bili-comment-textarea-font-size: 14px;\n    }\n    :host {\n      display: flex;\n    }\n    #input {\n      min-height: 32px;\n      max-height: 100px;\n      line-height: 32px;\n      width: 100%;\n      font-size: var(--bili-comment-textarea-font-size);\n      font-family: inherit;\n      box-sizing: border-box;\n      color: var(--bili-comment-textarea-color);\n      background-color: var(--bili-comment-textarea-bg);\n      padding: 0 var(--bili-comment-textarea-padding);\n      border: none;\n      resize: none;\n      outline: none;\n    }\n    #input.active {\n      line-height: normal;\n    }\n    #input::placeholder {\n      color: var(--bili-comment-textarea-placeholder-color);\n    }\n  "]))),mh([wn("#input")],bh.prototype,"input",2),mh([mn({type:String})],bh.prototype,"value",2),mh([mn({type:String})],bh.prototype,"placeholder",2),mh([bn()],bh.prototype,"rows",2),bh=mh([hn("bili-comment-textarea")],bh);var yh=Object.defineProperty,gh=Object.getOwnPropertyDescriptor,wh=function(e,t,n,i){for(var r,o=i>1?void 0:i?gh(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&yh(t,n,o),o},xh=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).oid="",e.type=0,e.mode=3,e.visible=!0,e.upMid=0,e.user=null,e.trackObserver=null,e}return p(t,e),s(t,[{key:"handleReply",value:function(e){var t,n=this;hc.emit("reply",{target:e,defaultInput:(null==(t=e.reply_control)?void 0:t.preset_reply_text)||"",mount:function(e){e.parentElement!==n.replyContainer&&n.replyContainer.appendChild(e)}})}},{key:"handleReport",value:function(e){this.dispatchEvent(new CustomEvent("report",{detail:e}))}},{key:"handleBlock",value:function(e){this.dispatchEvent(new CustomEvent("block",{detail:e}))}},{key:"repliesTemplate",value:function(){var e=this,t=this.data,n=t.replies,i=t.rcount;return null!=n&&n.length&&!i?"":$t(Al||(Al=g(['<div id="replies">\n      <bili-comment-replies-renderer\n        .data=',"\n        .oid=","\n        .type=","\n        .user=","\n        .upMid=","\n        .contentFeatures=","\n        @reply=","\n        @block=","\n        @report=","\n      ></bili-comment-replies-renderer>\n    </div>"])),this.data,this.oid,this.type,this.user,this.upMid,this.contentFeatures,(function(t){return e.handleReply(t.detail)}),(function(t){return e.handleBlock(t.detail)}),(function(t){return e.handleReport(t.detail)}))}},{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.trackObserver=new hu({el:this,type:"show",value:{event:"comment.all",data:{ordering:3===this.mode?"heat":"time",type:this.type,oid:this.oid,rpid:this.data.rpid_str,page:1}},handler:function(e,t,n){"show"===e&&(mc("replyCardShow",n),yc(e,t,n))}})}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.trackObserver&&(this.trackObserver.dispose(),this.trackObserver=null)}},{key:"updated",value:function(e){e.get("visible")&&(!1===this.visible?this.style.setProperty("display","none"):this.style.removeProperty("display"))}},{key:"render",value:function(){var e=this;return $t(_l||(_l=g(['\n      <bili-comment-renderer\n        id="comment"\n        .data=',"\n        .user=","\n        .upMid=","\n        .oid=","\n        .type=","\n        .contentFeatures=","\n        @delete=","\n        @block=","\n        @report=","\n        @top=","\n        @reply=","\n        @expand=","\n      ></bili-comment-renderer>\n      ",'\n      <div id="reply-container"></div>\n      <div id="div"></div>\n    '])),this.data,this.user,this.upMid,this.oid,this.type,this.contentFeatures,(function(){return e.dispatchEvent(new CustomEvent("delete"))}),(function(){e.handleBlock({mid:e.data.member.mid})}),(function(t){var n;return e.handleReport({member:{mid:e.data.member.mid,uname:e.data.member.uname},oid:e.oid,type:e.type,rpid:e.data.rpid_str,hiddenJuryTips:(null==(n=t.detail)?void 0:n.hiddenJuryTips)||!1})}),(function(t){return e.dispatchEvent(new CustomEvent("top",{detail:t.detail}))}),(function(){return e.handleReply(e.data)}),(function(t){return e.dispatchEvent(new CustomEvent("expand",{detail:t.detail}))}),this.repliesTemplate())}}])}(dn);xh.styles=vt(El||(El=g(["\n    #div {\n      padding-bottom: 14px;\n      margin-left: 80px;\n      border-bottom: 1px solid var(--graph_bg_thick);\n    }\n  "]))),wh([mn({type:Object})],xh.prototype,"data",2),wh([mn()],xh.prototype,"oid",2),wh([mn()],xh.prototype,"type",2),wh([mn()],xh.prototype,"mode",2),wh([mn({type:Boolean})],xh.prototype,"visible",2),wh([mn()],xh.prototype,"upMid",2),wh([mn()],xh.prototype,"user",2),wh([mn()],xh.prototype,"contentFeatures",2),wh([wn("#reply-container")],xh.prototype,"replyContainer",2),xh=wh([hn("bili-comment-thread-renderer")],xh);var kh=function(e){"number"==typeof e&&(e=e.toString(16)),6===e.length&&(e="ff".concat(e));var t=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16),i=parseInt(e.slice(6,8),16),r=parseInt(e.slice(0,2),16);return"rgba(".concat(t,",").concat(n,",").concat(i,",").concat(r/255,")")},Ah=function(e){return e[e.NONE=0]="NONE",e[e.CONTRACTOR=1]="CONTRACTOR",e[e.FANS=2]="FANS",e}(Ah||{});function _h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eh="to top right";function Ch(e,t){return"linear-gradient(".concat(e,",").concat(t,")")}function Sh(e,t){var n=(t=t||{}).theme||"",i=t.stringType||!1,r="",o="";if(function(e){return!(!e||"object"!=k(e)||k(e.render_scheme)>"u"||!e.colors_info||!e.colors_info.color||!Array.isArray(e.colors_info.color))}(e)){var a=e.render_scheme,s=e.colors_info.color;if(1!==a&&"Colorful"!==a||!s||0===s.length)return null;var l=function(e){var t=e.length,n=[],i=[],r=function(e,n){return"".concat(function(e){return"#"===e[0]?e:"#".concat(e)}(e)," ").concat(n/(t-1)*100,"%")};return e.forEach((function(e,t){n.push(r(e.color_day,t)),i.push(r(e.color_night,t))})),{light:Ch(Eh,n.join(",")),dark:Ch(Eh,i.join(","))}}(s);r=l.light,o=l.dark}if(r&&o){var c,u={base:{"background-clip":"text","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"},theme:{light:{"background-image":r},dark:{"background-image":o}}};if(["light","dark"].includes(n)){var d=Object.assign({},u.base,u.theme[n]);return i?function(e){var t=Object.keys(e);if(0===t.length)return"";var n="";return t.forEach((function(t){void 0!==e[t]&&(n+="".concat(t,":").concat(e[t],";"))})),n}(d):d}if(t.variable&&"string"==typeof t.variable&&/^--[a-z]/.test(t.variable))u.variable=(_h(c={},"".concat(t.variable,"-light"),r),_h(c,"".concat(t.variable,"-dark"),o),c);return u}return null}var Th=Object.defineProperty,Oh=Object.getOwnPropertyDescriptor,Ph=function(e,t,n,i){for(var r,o=i>1?void 0:i?Oh(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Th(t,n,o),o},Ih=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).disposables=Fi(),e.upMid=0,e.medalVisible=!1,e}return p(t,e),s(t,[{key:"uid",get:function(){return this.data.member.mid}},{key:"isUp",get:function(){return this.uid===String(this.upMid)}},{key:"userName",get:function(){return this.data.member.uname}},{key:"userNameRenderStyle",get:function(){var e,t;if(null==(e=this.data.member)||!e.name_render)return null;var n=Sh(null==(t=this.data.member)?void 0:t.name_render,{variable:"--name-render-bg"});return n?n.variable:null}},{key:"userNameStyle",get:function(){var e,t;if(!this.data.member)return null;if(this.userNameRenderStyle)return this.userNameRenderStyle;var n=null==(t=null==(e=this.data.member)?void 0:e.vip)?void 0:t.nickname_color;return n?{color:n}:null}},{key:"spaceLink",get:function(){return _u.SPACE(this.uid)}},{key:"levelImgSrc",get:function(){var e=this.data.member,t=e.is_senior_member,n=e.level_info.current_level;return"//i0.hdslb.com/bfs/seed/jinkela/short/webui/user-profile/img/level_".concat(t?"h":n,".svg")}},{key:"userMedal",get:function(){return!this.medalVisible||this.isUp?null:function(e){var t=e.member,n=t.is_contractor,i=t.contract_desc,r=t.fans_detail,o={type:0};return n?(o.type=1,o.contractor={name:{text:i,style:{color:"var(--brand_pink, #FF6699)"}}},o.contractor.style="原始粉丝"===i?{backgroundColor:"transparent",borderColor:"var(--brand_pink, #FF6699)"}:{backgroundColor:"var(--brand_pink_thin, #FFECF1)",borderColor:"transparent"},o):null!=r&&r.medal_name?(o.type=2,o.fans={style:{},name:{text:r.medal_name,style:{color:r.medal_color_name?kh(r.medal_color_name):""}},level:{text:String(r.level),style:{color:r.medal_color_level?kh(r.medal_color_level):"",backgroundColor:r.medal_level_bg_color?kh(r.medal_level_bg_color):""}}},r.medal_color&&r.medal_color_end&&(o.fans.style.backgroundImage="linear-gradient(90deg, ".concat(kh(r.medal_color),", ").concat(kh(r.medal_color_end),")")),r.medal_color_border&&(o.fans.style.borderColor=kh(r.medal_color_border)),r.first_icon&&(o.fans.icon={first:r.first_icon},r.second_icon&&(o.fans.icon.second=r.second_icon)),o):null}(this.data)}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),setTimeout((function(){e.disposables.add(dp(e.shadowRoot.querySelector("#user-name")))}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.disposables.dispose()}},{key:"handleNameClick",value:function(){var e={rpid:this.data.rpid_str};mc("replyCardNameClick",e),yc("click","comment.user_name.click",e)}},{key:"handleLevelClick",value:function(){var e={rpid:this.data.rpid_str};mc("replyCardLvClick",e),yc("click","comment.user_lv.click",e),window.open("https://www.bilibili.com/blackboard/help.html#/?qid=59e2cffdaa69465486497bb35a5ac295")}},{key:"render",value:function(){return $t(Cl||(Cl=g(['<div id="info">\n      <slot></slot>\n      <div id="user-name" data-user-profile-id="','" @click=','>\n        <a\n          href="','"\n          class="','"\n          style="','"\n          target="_blank"\n          >','</a\n        >\n      </div>\n      <div id="user-level" @click=','>\n        <img width="30" height="30" src="','" />\n      </div>\n      ',"\n      ","\n    </div>"])),this.uid,this.handleNameClick,this.spaceLink,this.userNameRenderStyle?"name-render-style":"",this.userNameStyle?On(this.userNameStyle):"",this.userName,this.handleLevelClick,this.levelImgSrc,this.userMedal?$t(Sl||(Sl=g(['\n            <div id="user-medal">\n              <bili-comment-user-medal .data=',"></bili-comment-user-medal>\n            </div>\n          "])),this.userMedal):"",this.isUp?$t(Tl||(Tl=g(['<div id="user-up">\n            <img width="24" height="24" src="//i0.hdslb.com/bfs/seed/jinkela/short/webui/comments/img/icons/up_pb.svg" />\n          </div>']))):"")}}])}(dn);Ih.styles=vt(Ol||(Ol=g(["\n    :host {\n      --bili-comment-user-info-name-color: var(--text2);\n    }\n    #info {\n      display: inline-flex;\n      align-items: center;\n    }\n    #user-name {\n      color: var(--bili-comment-user-info-name-color);\n      font-size: var(--bili-comments-font-size-name, 13px);\n      font-weight: 500;\n    }\n    #user-name a.name-render-style {\n      background-clip: text;\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n    }\n    .name-render-style {\n      background-image: var(--name-render-bg-light);\n    }\n    :host([dark]) .name-render-style {\n      background-image: var(--name-render-bg-dark);\n    }\n    #user-level {\n      margin-left: 5px;\n      width: 30px;\n      height: 30px;\n    }\n    #user-up {\n      width: 24px;\n      height: 24px;\n    }\n    a {\n      text-decoration: none;\n      color: inherit;\n    }\n  "]))),Ph([mn()],Ih.prototype,"data",2),Ph([mn()],Ih.prototype,"upMid",2),Ph([mn({type:Boolean})],Ih.prototype,"medalVisible",2),Ph([bn()],Ih.prototype,"uid",1),Ph([bn()],Ih.prototype,"isUp",1),Ph([bn()],Ih.prototype,"userName",1),Ph([bn()],Ih.prototype,"userNameRenderStyle",1),Ph([bn()],Ih.prototype,"userNameStyle",1),Ph([bn()],Ih.prototype,"spaceLink",1),Ph([bn()],Ih.prototype,"levelImgSrc",1),Ph([bn()],Ih.prototype,"userMedal",1),Ih=Ph([hn("bili-comment-user-info")],Ih);var Mh=Object.defineProperty,Lh=Object.getOwnPropertyDescriptor,jh=function(e,t,n,i){for(var r,o=i>1?void 0:i?Lh(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Mh(t,n,o),o},Rh=function(e){function t(){return o(this,t),r(this,t,arguments)}return p(t,e),s(t,[{key:"connectedCallback",value:function(){u(d(t.prototype),"connectedCallback",this).call(this),this.init()}},{key:"init",value:function(){var e=this;setTimeout((function(){var t=e.shadowRoot.querySelector("#name #name-text"),n=e.shadowRoot.querySelector("#name"),i=t.getBoundingClientRect().width;i&&(n.style.width="".concat(i,"px"))}))}},{key:"render",value:function(){if(this.data.type===Ah.CONTRACTOR){var e=this.data.contractor,t=e.style,n=e.name;return $t(Pl||(Pl=g(['<div id="contractor" style=','>\n        <div id="name" style=','><div id="name-text">',"</div></div>\n      </div>"])),t?On(v({},t)):"",n.style?On(v({},n.style)):"",n.text)}if(this.data.type===Ah.FANS){var i=this.data.fans,r=i.style,o=i.name,a=i.level,s=i.icon;return $t(Il||(Il=g(['<div\n        id="fans"\n        style=',"\n      >\n        ",'\n        <div id="name" style=','><div id="name-text">','</div></div>\n        <div id="level" style=','><div id="level-text">',"</div></div>\n      </div>"])),r?On(v({},r)):"",s?$t(Ml||(Ml=g(['<div\n              id="icon"\n              style=',"\n            >\n              ","\n              ","\n            </div>"])),On({width:"".concat(null!=s&&s.second?20:13,"px")}),s.first?$t(Ll||(Ll=g(['<img\n                    id="first-icon"\n                    src=',"\n                  />"])),Kn.getBmgSrcNext(s.first,{w:20,h:20,dpr:2})):"",s.second?$t(jl||(jl=g(['<img\n                    id="second-icon"\n                    src=',"\n                  />"])),Kn.getBmgSrcNext(s.second,{w:20,h:20,dpr:2})):""):"",o.style?On(v({},o.style)):"",o.text,a.style?On(v({},a.style)):"",a.text)}return $t(Rl||(Rl=g(['<div id="none"></div>'])))}}])}(dn);Rh.styles=vt(Dl||(Dl=g(["\n    #contractor {\n      height: 12px;\n      padding: 0 2px;\n      border-radius: 2px;\n      border-width: 0.5px;\n      border-style: solid;\n      box-sizing: border-box;\n    }\n    #contractor #name {\n      height: 11px;\n      position: relative;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    #contractor #name #name-text {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      white-space: nowrap;\n      transform: scale(0.5) translate(-50%, -50%);\n      transform-origin: 0 0;\n      font-size: 16px;\n    }\n    #fans {\n      display: flex;\n      align-items: center;\n      height: 14px;\n      padding-left: 5px;\n      border-width: 0.5px;\n      border-style: solid;\n      border-radius: 10px;\n      margin-left: 5px;\n    }\n    #fans #icon {\n      display: flex;\n      align-items: center;\n      position: relative;\n    }\n    #fans #icon #first-icon {\n      position: absolute;\n      left: -8px;\n      width: 20px;\n      height: 20px;\n    }\n    #fans #icon #second-icon {\n      position: absolute;\n      right: 0;\n      width: 8px;\n      height: 11px;\n    }\n    #fans #name {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: relative;\n      height: 100%;\n      margin-right: 4px;\n    }\n    #fans #name #name-text {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      font-weight: 500;\n      white-space: nowrap;\n      transform: scale(0.5) translate(-50%, -50%);\n      transform-origin: 0 0;\n      font-size: 18px;\n    }\n    #fans #level {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      width: 11.5px;\n      height: 11.5px;\n      border-radius: 50%;\n      margin-right: 0.5px;\n    }\n    #fans #level #level-text {\n      position: absolute;\n      top: 52%;\n      left: 50%;\n      font-family: medalnum;\n      font-weight: 500;\n      white-space: nowrap;\n      line-height: 1;\n      transform: scale(0.5) translate(-50%, -43%);\n      transform-origin: 0 0;\n    }\n  "]))),jh([mn()],Rh.prototype,"data",2),Rh=jh([hn("bili-comment-user-medal")],Rh);var Dh=Object.defineProperty,Nh=Object.defineProperties,Bh=Object.getOwnPropertyDescriptors,zh=Object.getOwnPropertySymbols,Uh=Object.prototype.hasOwnProperty,Fh=Object.prototype.propertyIsEnumerable,Vh=function(e,t,n){return t in e?Dh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Hh=function(e,t){for(var n in t||(t={}))Uh.call(t,n)&&Vh(e,n,t[n]);if(zh){var i,r=l(zh(t));try{for(r.s();!(i=r.n()).done;){n=i.value;Fh.call(t,n)&&Vh(e,n,t[n])}}catch(e){r.e(e)}finally{r.f()}}return e},Wh=function(e,t){return Nh(e,Bh(t))},$h=function(){return s((function e(){o(this,e),this.target=null,this.events={}}),[{key:"addEventListener",value:function(e,t){("undefined"==typeof window?"undefined":k(window))>"u"?console.warn("EventBridge is not supported in server side"):(this.events[e]?this.events[e].push(t):this.events[e]=[t],this.target&&this.target.addEventListener(e,t))}},{key:"removeEventListener",value:function(e,t){if(("undefined"==typeof window?"undefined":k(window))>"u")console.warn("EventBridge is not supported in server side");else if(this.target&&this.target.removeEventListener(e,t),this.events[e].length){var n=this.events[e];this.events[e]=n.filter((function(e){return e!==t}))}}},{key:"connect",value:function(e){var t=this;this.target||!e||(this.target=e,Object.keys(this.events).forEach((function(e){t.events[e].forEach((function(n){t.addEventListener(e,n)}))})))}},{key:"disconnect",value:function(){var e=this;if(this.target){var t=this.target;Object.keys(this.events).forEach((function(n){e.events[n].forEach((function(e){t.removeEventListener(n,e)}))}))}this.events={},this.target=null}}])}(),qh=function(){return s((function e(t){o(this,e),this.el={current:null},this.parent=null,this.props={},this.methods={},this.emits=[],this.dispose=null,this.eventBridge=new $h,t&&(this.props=t)}),[{key:"engine",get:function(){return{core:"custom"}}},{key:"addEventListener",value:function(e,t){this.emits.length&&-1===this.emits.indexOf(e)?console.warn("Event ".concat(String(e)," is not defined in emits")):this.eventBridge.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.eventBridge.removeEventListener(e,t)}},{key:"dispatchAction",value:function(e){var t,n=e.type,i=e.args,r=e.callback,o=null==(t=this.methods)?void 0:t[n];if("function"==typeof o){var a=o.apply(void 0,w(i||[]));return null==r||r(a),a}console.warn("Action ".concat(String(n)," is undefined or not a function"))}},{key:"update",value:function(e){var t=!!this.el.current,n=this.parent;return t&&this.unmount(),this.props=e,t&&(this.parent=n,this.render()),this}},{key:"mount",value:function(e,t){return this.el.current?(console.warn("Component is already mounted"),this):this.parent?(e===this.parent||console.warn("Component maybe in mounting, please wait mounted, and then use update or unmount first"),this):(this.parent=e,t?this.renderAsync():this.render(),this)}},{key:"unmount",value:function(){var e;if(null==(e=this.dispose)||e.call(this),this.eventBridge.disconnect(),this.props={},this.methods={},this.el.current){var t=this.parent||this.el.current.parentElement;t!==this.el.current&&null!=t&&t.contains(this.el.current)&&(t.removeChild(this.el.current),this.parent=null),this.el.current=null}}}])}(),Gh=function(e){var t=e.name,n=e.engine,i=e.emits,a=e.render,l=e.renderAsync,c=e.renderToString;return function(e){function h(e){var n;return o(this,h),(n=r(this,h,[e])).name=t,n.emits=i||[],n}return p(h,e),s(h,[{key:"engine",get:function(){return n||u(d(h.prototype),"engine",this)}},{key:"render",value:function(){var e=this;try{if(!this.parent)return;this.dispose=a({ref:function(t){e.el.current=t,t?e.eventBridge.connect(t):e.eventBridge.disconnect()},props:this.props,parent:this.parent,expose:function(t){e.methods=t}})}catch(e){console.error(e)}}},{key:"renderAsync",value:function(){return function(e,t,n){return new Promise((function(i,r){var o=function(e){try{s(n.next(e))}catch(e){r(e)}},a=function(e){try{s(n.throw(e))}catch(e){r(e)}},s=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(o,a)};s((n=n.apply(e,t)).next())}))}(this,null,m().mark((function e(){var t,n,i,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.parent){e.next=3;break}return e.abrupt("return",!1);case 3:if(!l){e.next=12;break}return n=!1,i=new Promise((function(e){t=function(){n||(n=!0,e(!0))}})),e.next=8,l({parent:this.parent,ref:function(e){r.el.current=e,e?(t(),r.eventBridge.connect(e)):r.eventBridge.disconnect()},props:this.props,expose:function(e){r.methods=e}});case 8:return this.dispose=e.sent,e.next=11,i;case 11:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",(this.render(),!!this.el.current));case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",(console.error(e.t0),!1));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})))}},{key:"renderToString",value:function(){try{return"function"!=typeof c?"":c(this.props)}catch(e){return console.error(e),""}}}])}(qh)},Xh=Symbol("solid-proxy"),Zh={equals:function(e,t){return e===t}},Yh=yf,Qh=1,Kh=2,Jh={owned:null,cleanups:null,context:null,owner:null},ef=null,tf=null,nf=null,rf=null,of=null,af=0;function sf(e,t){var n=nf,i=ef,r=0===e.length,o=void 0===t?i:t,a=r?Jh:{owned:null,cleanups:null,context:o?o.context:null,owner:o},s=r?e:function(){return e((function(){return uf((function(){return kf(a)}))}))};ef=a,nf=null;try{return bf(s,!0)}finally{nf=n,ef=i}}function lf(e,t,n){ff(vf(e,t,!1,Qh))}function cf(e,t,n){n=n?Object.assign({},Zh,n):Zh;var i=vf(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,ff(i),pf.bind(i)}function uf(e){if(null===nf)return e();var t=nf;nf=null;try{return e()}finally{nf=t}}function df(e){!function(e,t,n){Yh=gf;var i=vf(e,t,!1,Qh);i.user=!0,of?of.push(i):ff(i)}((function(){return uf(e)}))}function pf(){var e=this;if(this.sources&&this.state)if(this.state===Qh)ff(this);else{var t=rf;rf=null,bf((function(){return wf(e)}),!1),rf=t}if(nf){var n=this.observers?this.observers.length:0;nf.sources?(nf.sources.push(this),nf.sourceSlots.push(n)):(nf.sources=[this],nf.sourceSlots=[n]),this.observers?(this.observers.push(nf),this.observerSlots.push(nf.sources.length-1)):(this.observers=[nf],this.observerSlots=[nf.sources.length-1])}return this.value}function hf(e,t,n){var i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&bf((function(){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t],i=tf&&tf.running;i&&tf.disposed.has(n),(i?!n.tState:!n.state)&&(n.pure?rf.push(n):of.push(n),n.observers&&xf(n)),i||(n.state=Qh)}if(rf.length>1e6)throw rf=[],new Error}),!1)),t}function ff(e){if(e.fn){kf(e);var t=af;!function(e,t,n){var i,r=ef,o=nf;nf=ef=e;try{i=e.fn(t)}catch(t){return e.pure&&(e.state=Qh,e.owned&&e.owned.forEach(kf),e.owned=null),e.updatedAt=n+1,Af(t)}finally{nf=o,ef=r}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?hf(e,i):e.value=i,e.updatedAt=n)}(e,e.value,t)}}function vf(e,t,n){var i={fn:e,state:arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qh,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ef,context:ef?ef.context:null,pure:n};return null===ef||ef!==Jh&&(ef.owned?ef.owned.push(i):ef.owned=[i]),i}function mf(e){if(0!==e.state){if(e.state===Kh)return wf(e);if(e.suspense&&uf(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<af);)e.state&&t.push(e);for(var n=t.length-1;n>=0;n--)if((e=t[n]).state===Qh)ff(e);else if(e.state===Kh){var i=rf;rf=null,bf((function(){return wf(e,t[0])}),!1),rf=i}}}function bf(e,t){if(rf)return e();var n=!1;t||(rf=[]),of?n=!0:of=[],af++;try{var i=e();return function(e){if(rf&&(yf(rf),rf=null),e)return;var t=of;of=null,t.length&&bf((function(){return Yh(t)}),!1)}(n),i}catch(i){n||(of=null),rf=null,Af(i)}}function yf(e){for(var t=0;t<e.length;t++)mf(e[t])}function gf(e){var t,n=0;for(t=0;t<e.length;t++){var i=e[t];i.user?e[n++]=i:mf(i)}for(t=0;t<n;t++)mf(e[t])}function wf(e,t){e.state=0;for(var n=0;n<e.sources.length;n+=1){var i=e.sources[n];if(i.sources){var r=i.state;r===Qh?i!==t&&(!i.updatedAt||i.updatedAt<af)&&mf(i):r===Kh&&wf(i,t)}}}function xf(e){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t];n.state||(n.state=Kh,n.pure?rf.push(n):of.push(n),n.observers&&xf(n))}}function kf(e){var t;if(e.sources)for(;e.sources.length;){var n=e.sources.pop(),i=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){var o=r.pop(),a=n.observerSlots.pop();i<r.length&&(o.sourceSlots[a]=i,r[i]=o,n.observerSlots[i]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)kf(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Af(e){throw function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e)}function _f(e,t){return uf((function(){return e(t||{})}))}function Ef(){return!0}var Cf={get:function(e,t,n){return t===Xh?n:e.get(t)},has:function(e,t){return t===Xh||e.has(t)},set:Ef,deleteProperty:Ef,getOwnPropertyDescriptor:function(e,t){return{configurable:!0,enumerable:!0,get:function(){return e.get(t)},set:Ef,deleteProperty:Ef}},ownKeys:function(e){return e.keys()}};function Sf(e){return(e="function"==typeof e?e():e)?e:{}}function Tf(){for(var e=0,t=this.length;e<t;++e){var n=this[e]();if(void 0!==n)return n}}function Of(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=!1,r=0;r<t.length;r++){var o=t[r];i=i||!!o&&Xh in o,t[r]="function"==typeof o?(i=!0,cf(o)):o}if(i)return new Proxy({get:function(e){for(var n=t.length-1;n>=0;n--){var i=Sf(t[n])[e];if(void 0!==i)return i}},has:function(e){for(var n=t.length-1;n>=0;n--)if(e in Sf(t[n]))return!0;return!1},keys:function(){for(var e=[],n=0;n<t.length;n++)e.push.apply(e,w(Object.keys(Sf(t[n]))));return w(new Set(e))}},Cf);for(var a={},s=Object.create(null),l=t.length-1;l>=0;l--){var c=t[l];if(c)for(var u=Object.getOwnPropertyNames(c),d=function(){var e=u[p];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(c,e);if(s[e]){var n=a[e];n&&(t.get?n.push(t.get.bind(c)):void 0!==t.value&&n.push((function(){return t.value})))}else s[e]=t.get?{enumerable:!0,configurable:!0,get:Tf.bind(a[e]=[t.get.bind(c)])}:void 0!==t.value?t:void 0},p=u.length-1;p>=0;p--)d()}for(var h={},f=Object.keys(s),v=f.length-1;v>=0;v--){var m=f[v],b=s[m];b&&b.get?Object.defineProperty(h,m,b):h[m]=b?b.value:void 0}return h}function Pf(e){var t=e.keyed,n=cf((function(){return e.when}),void 0,{equals:function(e,n){return t?e===n:!e==!n}});return cf((function(){var i=n();if(i){var r=e.children;return"function"==typeof r&&r.length>0?uf((function(){return r(t?i:function(){if(!uf(n))throw function(e){return"Stale read from <".concat(e,">.")}("Show");return e.when})})):r}return e.fallback}),void 0,void 0)}function If(e,t,n){var i;return sf((function(r){i=r,t===document?e():Df(t,e(),t.firstChild?null:void 0,n)}),(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).owner),function(){i(),t.textContent=""}}function Mf(e,t,n){var i,r=function(){return(i||(i=function(){var t=document.createElement("template");return t.innerHTML=e,t.content.firstChild}())).cloneNode(!0)};return r.cloneNode=r,r}function Lf(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function jf(e,t){null==t?e.removeAttribute("class"):e.className=t}function Rf(e,t,n){if(!t)return n?Lf(e,"style"):t;var i,r,o=e.style;if("string"==typeof t)return o.cssText=t;for(r in"string"==typeof n&&(o.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[r]&&o.removeProperty(r),delete n[r];for(r in t)(i=t[r])!==n[r]&&(o.setProperty(r,i),n[r]=i);return n}function Df(e,t,n,i){if(void 0!==n&&!i&&(i=[]),"function"!=typeof t)return Nf(e,t,i,n);lf((function(i){return Nf(e,t(),i,n)}),i)}function Nf(e,t,n,i,r){for(;"function"==typeof n;)n=n();if(t===n)return n;var o=k(t),a=void 0!==i;if(e=a&&n[0]&&n[0].parentNode||e,"string"===o||"number"===o)if("number"===o&&(t=t.toString()),a){var s=n[0];s&&3===s.nodeType?s.data!==t&&(s.data=t):s=document.createTextNode(t),n=Uf(e,n,i,s)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===o)n=Uf(e,n,i);else{if("function"===o)return lf((function(){for(var r=t();"function"==typeof r;)r=r();n=Nf(e,r,n,i)})),function(){return n};if(Array.isArray(t)){var l=[],c=n&&Array.isArray(n);if(Bf(l,t,n,r))return lf((function(){return n=Nf(e,l,n,i,!0)})),function(){return n};if(0===l.length){if(n=Uf(e,n,i),a)return n}else c?0===n.length?zf(e,l,i):function(e,t,n){for(var i=n.length,r=t.length,o=i,a=0,s=0,l=t[r-1].nextSibling,c=null;a<r||s<o;)if(t[a]!==n[s]){for(;t[r-1]===n[o-1];)r--,o--;if(r===a)for(var u=o<i?s?n[s-1].nextSibling:n[o-s]:l;s<o;)e.insertBefore(n[s++],u);else if(o===s)for(;a<r;)(!c||!c.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[r-1]){var d=t[--r].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],d),t[r]=n[o]}else{if(!c){c=new Map;for(var p=s;p<o;)c.set(n[p],p++)}var h=c.get(t[a]);if(null!=h)if(s<h&&h<o){for(var f=a,v=1,m=void 0;++f<r&&f<o&&null!=(m=c.get(t[f]))&&m===h+v;)v++;if(v>h-s)for(var b=t[a];s<h;)e.insertBefore(n[s++],b);else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}else a++,s++}(e,n,l):(n&&Uf(e),zf(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=Uf(e,n,i,t);Uf(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function Bf(e,t,n,i){for(var r=!1,o=0,a=t.length;o<a;o++){var s=t[o],l=n&&n[e.length],c=void 0;if(null!=s&&!0!==s&&!1!==s)if("object"==(c=k(s))&&s.nodeType)e.push(s);else if(Array.isArray(s))r=Bf(e,s,l)||r;else if("function"===c)if(i){for(;"function"==typeof s;)s=s();r=Bf(e,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||r}else e.push(s),r=!0;else{var u=String(s);l&&3===l.nodeType&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return r}function zf(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=0,r=t.length;i<r;i++)e.insertBefore(t[i],n)}function Uf(e,t,n,i){if(void 0===n)return e.textContent="";var r=i||document.createTextNode("");if(t.length)for(var o=!1,a=t.length-1;a>=0;a--){var s=t[a];if(r!==s){var l=s.parentNode===e;o||a?l&&s.remove():l?e.replaceChild(r,s):e.insertBefore(r,n)}else o=!0}else e.insertBefore(r,n);return[r]}var Ff=function(e){var t=e.component,n=e.engine,i=e.renderToString,r=function(e){var i,r,o,a,s,l,c=e.ref,u=e.props,d=e.parent,p=e.expose,h=(null==n?void 0:n.core.createRoot)||(null==(i=window.Solid)?void 0:i.createRoot)||(null==(o=null==(r=window.SolidCore)?void 0:r.Solid)?void 0:o.createRoot),f=(null==n?void 0:n.core.render)||(null==(a=window.SolidWeb)?void 0:a.render)||(null==(l=null==(s=window.SolidCore)?void 0:s.SolidWeb)?void 0:l.render);if(!h)throw new Error("Solid engine API`createRoot` is not found");if(!f)throw new Error("Solid engine API`render` is not found");return h((function(e){var n=document.createElement("div");f((function(){return t(Wh(Hh({},u),{waterExpose:p}))}),n);var i=n.firstChild;return function(e){if(e instanceof HTMLElement)for(;e.firstChild;)e.removeChild(e.firstChild)}(d),d.appendChild(i),c(i),e}))},o=(null==n?void 0:n.src)||"//s1.hdslb.com/bfs/seed/water-ui/engine/solid-core.umd.js";return Gh({name:e.name,engine:{core:"solid",version:(null==n?void 0:n.version)||"",src:o},render:r,renderAsync:function(e){return new Promise((function(t,n){(function(e){return new Promise((function(t,n){var i=function(){return!(!window.Solid||!window.SolidWeb||(t(window.Solid),0))};if(("undefined"==typeof window?"undefined":k(window))>"u")return n(new Error("not in browser"));if(!i()){var r=document.createElement("script");r.onload=function(){i()||n(new Error("load solid fail"))},r.onerror=function(e){n(e)},r.src=e}}))})(o).then((function(){t(r(e))})).catch(n)}))},renderToString:i})},Vf="_star_14qf7_99",Hf="_fans_14qf7_13",Wf="_specialDynamicMedalPc_14qf7_30",$f="_specialDynamicMedal_14qf7_30",qf="_text_14qf7_40",Gf="_background_14qf7_53",Xf="_medalImg_14qf7_66",Zf="_medalImgAnimation_14qf7_71",Yf="_textMask_14qf7_88",Qf="_backgroundImg_aob6i_1",Kf="_bfsImg_aob6i_6";function Jf(e){return!isNaN(parseFloat(e))&&isFinite(e)}function ev(){return("undefined"==typeof window?"undefined":k(window))<"u"}var tv={webp:ev(),fuzzyMatch:!0,whiteList:[],webpFallback:ev()?"png":"",dpr:1,ratio:1},nv={isSupported:!1};function iv(e){nv.isSupported=e}!function(){if(ev())try{var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d"))try{0===e.toDataURL("image/webp").indexOf("data:image/webp")?iv(!0):function(){var e=new Image;e.onload=function(){iv(2===e.height)},e.onerror=function(){iv(2===e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()}catch(e){iv(!1)}else iv(!1)}catch(e){iv(!1)}else iv(!0)}();var rv=function(){function e(e){this.debounceTime=1e3,this.timer=null,this.debounceTime=e}return e.prototype.set=function(e){this.clear(),this.timer=setTimeout(e,this.debounceTime)},e.prototype.clear=function(){this.timer&&clearTimeout(this.timer)},e}(),ov=function(){function e(e){void 0===e&&(e=1e3),this.MIN_TO_COLLAPSE=2,this.warnings=[],this.errors=[],this.warningDebouncer=new rv(e),this.errorDebouncer=new rv(e)}return e.prototype.pushWarning=function(e){var t=this;console.groupCollapsed?(this.warnings.push(e),this.warningDebouncer.set((function(){return t.printWarnings()}))):console.warn("[BFS Warning]:",e)},e.prototype.printWarnings=function(){var e=this.warnings.length>=this.MIN_TO_COLLAPSE;for(e&&console.groupCollapsed("[BFS Warning]: 有 "+this.warnings.length+" 个警告，点击查看.");this.warnings.length>0;){var t=this.warnings.shift();console.warn("[BFS Warning]:",t)}e&&console.groupEnd()},e.prototype.pushError=function(e){var t=this;console.groupCollapsed?(this.errors.push(e),this.errorDebouncer.set((function(){return t.printError()}))):console.error("[BFS Error]:",e)},e.prototype.printError=function(){var e=this.errors.length>=this.MIN_TO_COLLAPSE;for(e&&console.groupCollapsed("[BFS Error]: 有 "+this.errors.length+" 个错误，点击查看.");this.errors.length>0;){var t=this.errors.shift();console.error("[BFS Error]:",t)}e&&console.groupEnd()},e}(),av=new ov(1e3);function sv(e,t){void 0===t&&(t=!1),t&&av.pushWarning(e)}function lv(e,t){void 0===t&&(t=!1),t&&av.pushError(e)}var cv=function(){function e(e){void 0===e&&(e=[]),this.whiteList=[],this.whiteListQuickMap={byWidth:[],byHeight:[]},e.length&&this.set(e)}return e.prototype.set=function(e){this.clear(),e.length>0&&(this.whiteList=e,this.setQuickMap())},e.prototype.get=function(){return this.whiteList},e.prototype.clear=function(){this.whiteList=[],this.initQuickMap()},e.prototype.initQuickMap=function(){this.whiteListQuickMap={byWidth:[],byHeight:[]}},e.prototype.setQuickMap=function(){var e=this;this.convertWhiteList().forEach((function(t){if(Jf(t.width)&&t.width>0&&Jf(t.height)&&t.height>0){var n=t.width/t.height;e.whiteListQuickMap[n]||(e.whiteListQuickMap[n]=[]),e.whiteListQuickMap[n].push(t)}else Jf(t.width)&&t.width>0?(e.whiteListQuickMap.byWidth||(e.whiteListQuickMap.byWidth=[]),e.whiteListQuickMap.byWidth.push({width:t.width,height:"auto"})):Jf(t.height)&&t.height>0&&(e.whiteListQuickMap.byHeight||(e.whiteListQuickMap.byHeight=[]),e.whiteListQuickMap.byHeight.push({width:"auto",height:t.height}))})),this.sortQuickMap()},e.prototype.convertWhiteList=function(){var e=this.whiteList.map((function(e){var t=e&&e.split?e.split("|"):[];return{width:t[0]&&Jf(t[0].trim())&&parseInt(t[0].trim())>0?parseInt(t[0].trim()):"auto",height:t[1]&&Jf(t[1].trim())&&parseInt(t[1].trim())>0?parseInt(t[1].trim()):"auto"}}));return function(e){return Array.from(new Set(e.map((function(e){return JSON.stringify(e)})))).map((function(e){return JSON.parse(e)}))}(e)},e.prototype.sortQuickMap=function(){var e=this;Object.keys(this.whiteListQuickMap).forEach((function(t){var n=e.whiteListQuickMap[t].sort((function(e,t){return Jf(e.width)&&Jf(t.width)?e.width-t.width:Jf(e.height)&&Jf(t.height)?e.height-t.height:void 0}));e.whiteListQuickMap[t]=n}))},e.prototype.getMatchedSize=function(e,t){var n=null;if(0===this.whiteList.length)return e;var i={width:"auto",height:"auto"};Jf(e.width)&&e.width>0&&Jf(e.height)&&e.height>0?n=e.width/e.height:Jf(e.width)&&e.width>0?n="byWidth":Jf(e.height)&&e.height>0&&(n="byHeight");var r=n?this.whiteListQuickMap[n]:[];if(r&&r.length>0){var o=t?this.fuzzyMatch(r,e):this.exactMatch(r,e);o.length>0?(i=o[0],(e.width!==i.width||e.height!==i.height)&&sv(e.width+" x "+e.height+" 在白名单中不存在，向上匹配得到 "+i.width+" x "+i.height)):sv("找不到与 "+e.width+" x "+e.height+" 匹配的白名单尺寸. 将使用原始尺寸.")}else sv("找不到与 "+e.width+" x "+e.height+" 匹配的白名单尺寸. 将使用原始尺寸.");return i},e.prototype.fuzzyMatch=function(e,t){return e.filter((function(e){return Jf(e.width)?e.width>=t.width:e.height>=t.height}))},e.prototype.exactMatch=function(e,t){return e.filter((function(e){return Jf(e.width)?e.width===t.width:e.height===t.height}))},e}();function uv(e){return"auto"===e&&("undefined"==typeof window?"undefined":k(window))<"u"&&window.devicePixelRatio?Number(window.devicePixelRatio)||1:Number(e)>0?Number(e):1}function dv(e){if(e&&e.split)return e.split(".").pop().toLowerCase()}function pv(e){if(!e||!function(e){return"string"==typeof e||e instanceof String}(e))return lv("URL 应该为 string 类型."),!1;return-1===["jpg","jpeg","png","webp","gif"].indexOf(dv(e))?(lv(e+" 不是支持的文件格式."),!1):("webp"===dv(e)&&sv(e+" 是webp格式的文件。建议通过配置参数 webp: true 使用webp格式，以便在不支持的浏览器上降级."),-1!==e.indexOf("/bfs/")||(sv(e+" 不是 bfs 路径."),!1))}function hv(e){var t=e;if(e&&e.slice&&e.indexOf){var n=e.indexOf("@");n>-1&&(t=e.slice(0,n))}return t}function fv(e,t,n){return e+=-1===e.indexOf("@")?"@":"_",e+=n+t}function vv(e){return e.indexOf("@")>-1}var mv=function(){function e(e){void 0===e&&(e={}),this.defaultOpts=tv,this.whiteList=new cv,Object.assign(this.defaultOpts,e),this.setWhiteList(this.defaultOpts.whiteList)}return e.prototype.getImageLink=function(e,t,n,i){void 0===t&&(t="auto"),void 0===n&&(n="auto"),void 0===i&&(i={});var r=Object.assign({},this.defaultOpts,i),o=i.whiteList?new cv(i.whiteList):this.whiteList,a=function(e){var t="";return e&&e.split&&(t=e.split("?")[1]),t}(e);return e=function(e){var t=e;if(e&&e.slice&&e.indexOf){var n=e.indexOf("?");n>-1&&(t=e.slice(0,n))}return t}(e),pv(hv(e))&&(function(e){var t=uv(e.dpr)*(Number(e.ratio)||1);if(1===t)return e;if(e.a)if(/^\d+-\d+-\d+-\d+$/.test(e.a)){var n=e.a.split("-");e.a=n.map((function(e){return Math.floor(Number(e)*t)})).join("-")}else lv(e.a+"不是有效的高级裁剪参数. 请参考 https://info.bilibili.co/pages/viewpage.action?pageId=4545261 正确设置");if(e.rc)if(/^\d+x\d+-[1-9]$/.test(e.rc)){var i=(n=e.rc.split("-"))[0].split("x");e.rc=i.map((function(e){return Math.floor(Number(e)*t)})).join("x")+"-"+n[1]}else lv(e.rc+"不是有效的区域裁剪参数. 请参考 https://info.bilibili.co/pages/viewpage.action?pageId=4545261 正确设置")}(r),e=function(e,t,n,i,r){var o=i.getMatchedSize({width:t,height:n},r.fuzzyMatch),a=o.width,s=o.height,l=uv(r.dpr),c=r.ratio||1;return Jf(a)&&a>0&&(e=fv(e,"w",Math.floor(a*l*c))),Jf(s)&&s>0&&(e=fv(e,"h",Math.floor(s*l*c))),e}(e=hv(e),t,n,o,r),e=function(e,t){return e}(e,r.watermark),e=function(e,t){return["e","p","c","rc","a","bl","q","o","s"].forEach((function(n){void 0!==t[n]&&(e=fv(e,n,t[n]))})),e}(e,r),e=function(e,t){var n=dv(hv(e)),i=n;return t.webp&&("gif"!==n||t.s)&&nv.isSupported&&(i="webp"),!nv.isSupported&&"webp"===i&&t.webpFallback&&(i=t.webpFallback),vv(e)||n===i?vv(e)&&(e+="."+i):e+="@."+i,e}(e,r)),function(e,t){return t&&""!==t?e+"?"+t:e}(e,a)},e.prototype.getWhiteList=function(){return this.whiteList.get()},e.prototype.setWhiteList=function(e){void 0===e&&(e=[]),this.whiteList.set(e)},e.prototype.clearWhiteList=function(){this.whiteList.clear()},e}(),bv=Mf("<div>"),yv=Mf("<img>"),gv=new mv,wv=function(e){var t=Of({fit:"cover"},e),n=function(){if(!t.src)return"";if(/^data:/.test(t.src))return t.src;var e=t.src.replace("http://","https://");if(e.includes("gif")||e.includes(".svg"))return e;var n=("undefined"==typeof window?"undefined":k(window))>"u"?2:window.devicePixelRatio;return n=n>2?n:2,gv.getImageLink(e,t.width?Math.ceil(t.width*n):"auto",t.height?Math.ceil(t.height*n):"auto",{webp:!0,webpFallback:"png"})},i=function(){var n=function(t){return"function"==typeof e.pxHandle?e.pxHandle(t):t+"px"};return{width:t.width?n(t.width):"auto",height:t.height?n(t.height):"auto"}};return _f(Pf,{get when(){return t.src},get children(){return[_f(Pf,{get when(){return t.background},get children(){var r=bv();return Df(r,(function(){return t.children})),lf((function(o){var a="".concat(Qf," ").concat(e.class),s=Wh(Hh({},i()),{"background-size":t.fit,"background-image":"url(".concat(n(),")")});return a!==o.e&&jf(r,o.e=a),o.t=Rf(r,s,o.t),o}),{e:void 0,t:void 0}),r}}),_f(Pf,{get when(){return!t.background},get children(){var r=yv();return lf((function(o){var a=n(),s="".concat(Kf," ").concat(e.class),l=Wh(Hh({},i()),{"object-fit":t.fit}),c=t.alt;return a!==o.e&&Lf(r,"src",o.e=a),s!==o.t&&jf(r,o.t=s),o.a=Rf(r,l,o.a),c!==o.o&&Lf(r,"alt",o.o=c),o}),{e:void 0,t:void 0,a:void 0,o:void 0}),r}})]}})},xv=function(e){return e[e.NORMAL=1]="NORMAL",e[e.FAN=2]="FAN",e[e.SPECIAL_DYNAMIC_MEDAL=3]="SPECIAL_DYNAMIC_MEDAL",e}(xv||{}),kv=function(e){return e.PC="pc",e.H5="h5",e}(kv||{});function Av(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e&&/^#([0-9a-fA-F]{6})$/.test(e)?"rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")":"rgba(0,0,0,0)"}var _v,Ev,Cv=function(){var e={medal:[0,1400],text:[750,1750],star:[1750,3e3]},t=function(e,t){var n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},Zh,t):Zh).equals||void 0};return[pf.bind(n),function(e){return"function"==typeof e&&(e=e(n.value)),hf(n,e)}]}(function(e,t){var n=Hh({},e);return Object.keys(e).forEach((function(e){n[e]=t})),n}(e,!1)),n=y(t,2),i=n[0],r=n[1];df((function(){o()}));var o=function t(){var n=null;n&&clearTimeout(n),Object.keys(e).forEach((function(t){var n=y(e[t],2),o=n[0],a=n[1];setTimeout((function(){r(Wh(Hh({},i()),c({},t,!0)))}),o),setTimeout((function(){r(Wh(Hh({},i()),c({},t,!1)))}),a)})),n=setTimeout((function(){t()}),4e3)};return i},Sv=function(e){return(null==e?void 0:e.num_desc)||(null!=e&&e.number?"000000".concat(null==e?void 0:e.number).substring(String(null==e?void 0:e.number).length):"")},Tv=function(e){var t=null==e?void 0:e.color_format;if(t){var n=function(e){var t=e.colors,n=e.gradients,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:1,height:1},r=i.width,o=i.height;if(null==t||!t.length||null==n||!n.length)return"";var a=t.map((function(e,t){return"".concat(e," ").concat(n[t],"%")})).join(",");return"linear-gradient(".concat(function(e,t){return 180*Math.atan2(t,e)/Math.PI+90}(r,o),"deg, ").concat(a,")")}(t||{});if(n)return{"background-image":n,"-webkit-text-fill-color":"transparent","-webkit-background-clip":"text","background-clip":"text"}}return{color:null==e?void 0:e.color}},Ov=function(e,t){return 1===(null==t?void 0:t.type)?xv.SPECIAL_DYNAMIC_MEDAL:null!=e&&e.is_fan?xv.FAN:xv.NORMAL},Pv=function(e){return null==e?void 0:e.effect_visual},Iv=Mf("<span>"),Mv=Mf("<div><div>"),Lv=Mf("<div>"),jv=function(e){var t=Cv();return function(){var n=Mv(),i=n.firstChild;return Df(n,_f(wv,{get src(){var t;return null==(t=e.effect)?void 0:t.medal_image},width:40,height:40,fit:"contain",get class(){return"".concat(Xf," ").concat(t().medal?Zf:"")},pxHandle:_v}),null),Df(n,_f(Pf,{get when(){return e.text},get children(){return[function(){var t=Iv();return Df(t,(function(){return e.text})),lf((function(n){var i=e.textStyle,r=qf;return n.e=Rf(t,i,n.e),r!==n.t&&jf(t,n.t=r),n}),{e:void 0,t:void 0}),t}(),_f(Pf,{get when(){return t().text},get children(){var t=Iv();return Df(t,(function(){return e.text})),lf((function(){return jf(t,"".concat(qf," ").concat(Yf))})),t}}),_f(Pf,{get when(){return t().star},get children(){var e=Iv();return lf((function(){return jf(e,Vf)})),e}})]}}),null),lf((function(t){var r,o,a="".concat($f),s=Gf,l="linear-gradient(270deg, ".concat(Av(null==(r=e.effect)?void 0:r.color_theme,.3)," 0%, ").concat(Av(null==(o=e.effect)?void 0:o.color_theme,0)," 100%)");return a!==t.e&&jf(n,t.e=a),s!==t.t&&jf(i,t.t=s),l!==t.a&&(null!=(t.a=l)?i.style.setProperty("background",l):i.style.removeProperty("background")),t}),{e:void 0,t:void 0,a:void 0}),n}()},Rv=function(e){return _f(Pf,{get when(){return e.uiType},get children(){return[_f(Pf,{get when(){return e.uiType===xv.NORMAL},get children(){return _f(wv,{get src(){return e.url},width:60,height:34,fit:"contain"})}}),_f(Pf,{get when(){return e.uiType===xv.FAN},get children(){return _f(wv,{get src(){return e.url},width:110,height:33,fit:"contain",background:!0,get class(){return Hf},get children(){return _f(Pf,{get when(){return e.text},get children(){var t=Iv();return Df(t,(function(){return e.text})),lf((function(n){return Rf(t,e.textStyle,n)})),t}})}})}}),_f(Pf,{get when(){return e.uiType===xv.SPECIAL_DYNAMIC_MEDAL},get children(){return cf((function(){return"pc"===e.scene}))()?function(){var t=Lv();return Df(t,_f(jv,e)),lf((function(){return jf(t,Wf)})),t}():_f(jv,e)}})]}})},Dv=function(e){return _v=e.pxHandle,_f(Rv,Of((function(){return{uiType:Ov(e.fan,e.image_group),url:e.card_url,text:Sv(e.fan),textStyle:Tv(e.fan),effect:Pv(e.image_group),scene:e.scene}})))},Nv=function(e){return e[e.NORMAL=1]="NORMAL",e[e.FAN=2]="FAN",e[e.SPECIAL_DYNAMIC_MEDAL=3]="SPECIAL_DYNAMIC_MEDAL",e}(Nv||{}),Bv=function(e){return e.PC="pc",e.H5="h5",e}(Bv||{}),zv="_star_1aw9v_61",Uv="_cardBg_1aw9v_13",Fv="_fanTextPosition_1aw9v_21",Vv="_fanText_1aw9v_21",Hv="_specialMedal_1aw9v_44",Wv="_medalImgAnimation_1aw9v_57",$v="_fanTextWrap_1aw9v_67",qv="_textMask_1aw9v_71",Gv="_specialMedalPc_1aw9v_86",Xv="_medalImg_1aw9v_57",Zv=Mf("<div><span></span><span>"),Yv=Mf("<div><div><span></span><span>"),Qv=Mf("<span>"),Kv=Mf("<div>"),Jv=function(e){var t=Cv();return function(){var n=Kv();return Df(n,_f(wv,{get src(){var t;return null==(t=e.effect)?void 0:t.medal_image},width:40,height:40,fit:"contain",get class(){return"".concat(Xv," ").concat(t().medal?Wv:"")},pxHandle:Ev}),null),Df(n,_f(Pf,{get when(){return e.text},get children(){var n=Yv(),i=n.firstChild,r=i.firstChild,o=r.nextSibling;return Df(r,(function(){return e.textPrefix})),Df(o,(function(){return e.text})),Df(n,_f(Pf,{get when(){return t().text},get children(){var t=Zv(),n=t.firstChild,i=n.nextSibling;return Df(n,(function(){return e.textPrefix})),Df(i,(function(){return e.text})),lf((function(){return jf(t,"".concat(Vv," ").concat(qv))})),t}}),null),lf((function(t){var r=$v,o=e.textStyle,a=Vv;return r!==t.e&&jf(n,t.e=r),t.t=Rf(i,o,t.t),a!==t.a&&jf(i,t.a=a),t}),{e:void 0,t:void 0,a:void 0}),n}}),null),Df(n,_f(Pf,{get when(){return t().star},get children(){var e=Qv();return lf((function(){return jf(e,zv)})),e}}),null),lf((function(){return jf(n,"".concat(Hv))})),n}()},em=function(e){return _f(Pf,{get when(){return e.uiType},get children(){return[_f(Pf,{get when(){return e.uiType===Nv.NORMAL||e.uiType===Nv.FAN},get children(){var t=Kv();return Df(t,_f(Pf,{get when(){return e.url},get children(){return _f(wv,{get src(){return e.url},height:48})}}),null),Df(t,_f(Pf,{get when(){return e.uiType===Nv.FAN&&e.text},get children(){var t=Zv(),n=t.firstChild,i=n.nextSibling;return Df(n,(function(){return e.textPrefix})),Df(i,(function(){return e.text})),lf((function(n){var i=e.textStyle,r="".concat(Vv," ").concat(Fv);return n.e=Rf(t,i,n.e),r!==n.t&&jf(t,n.t=r),n}),{e:void 0,t:void 0}),t}}),null),lf((function(){return jf(t,Uv)})),t}}),_f(Pf,{get when(){return e.uiType===Nv.SPECIAL_DYNAMIC_MEDAL},get children(){return cf((function(){return"pc"===e.scene}))()?function(){var t=Kv();return Df(t,_f(Jv,e)),lf((function(){return jf(t,Gv)})),t}():_f(Jv,e)}})]}})},tm=function(e){return Ev=e.pxHandle,_f(em,Of((function(){var t;return{uiType:Ov(e.fan,e.image_group),url:e.image,text:Sv(e.fan),textStyle:Tv(e.fan),effect:Pv(e.image_group),textPrefix:(null==(t=e.fan)?void 0:t.num_prefix)||"NO.",scene:e.scene}})))};Ff({name:"CardForPC",component:function(e){return _f(Dv,Of((function(){return{fan:e.fan,card_url:e.card_url,image_group:e.image_group,scene:kv.PC}})))},engine:{core:{createRoot:sf,render:If}}});var nm=Ff({name:"CardBgForPC",component:function(e){var t=function(){return e.card_bg||{}};return _f(tm,Of((function(){return{fan:t().fan,image:t().image,image_group:t().image_group,scene:Bv.PC}})))},engine:{core:{createRoot:sf,render:If}}});Ff({name:"CardCommon",component:Dv,engine:{core:{createRoot:sf,render:If}}}),Ff({name:"CardCommon",component:tm,engine:{core:{createRoot:sf,render:If}}});var im=Object.defineProperty,rm=Object.getOwnPropertyDescriptor,om=function(e,t,n,i){for(var r,o=i>1?void 0:i?rm(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&im(t,n,o),o},am=function(e){function t(){var e;return o(this,t),(e=r(this,t,arguments)).card=null,e}return p(t,e),s(t,[{key:"clearData",value:function(){this.card&&(this.card.unmount(),this.card=null)}},{key:"connectedCallback",value:function(){var e=this;u(d(t.prototype),"connectedCallback",this).call(this),setTimeout((function(){e.initData(e.data)}))}},{key:"disconnectedCallback",value:function(){u(d(t.prototype),"disconnectedCallback",this).call(this),this.clearData()}},{key:"updated",value:function(e){e.has("data")&&this.initData(this.data)}},{key:"initData",value:(n=i(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.card&&this.clearData(),this.card=new nm(t).mount(this.shadowRoot.querySelector("#card"));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"render",value:function(){return $t(Nl||(Nl=g(['<div id="card"></div>'])))}}]);var n}(dn);am.styles=vt(Bl||(Bl=g(["\n    #card {\n      width: 288px;\n      height: 48px;\n      position: relative;\n      overflow: hidden;\n      user-select: none;\n    }\n    #card div {\n      height: 100%;\n      max-width: 100%;\n    }\n    // 注意这里是通过copy产物，所以要锁版本\n    @keyframes _jiggle_14qf7_1 {\n      0% {\n        transform: rotate(0);\n      }\n      14.3% {\n        transform: rotate(11deg);\n      }\n      28.6% {\n        transform: rotate(0);\n      }\n      35.7% {\n        transform: rotate(-8deg);\n      }\n      46.4% {\n        transform: rotate(0);\n      }\n      46.4% {\n        transform: rotate(0);\n      }\n      53.6% {\n        transform: rotate(3deg);\n      }\n      64.3% {\n        transform: rotate(0);\n      }\n      71.4% {\n        transform: rotate(-1deg);\n      }\n      82.1% {\n        transform: rotate(0);\n      }\n      92.8% {\n        transform: rotate(0.5deg);\n      }\n      to {\n        transform: rotate(0);\n      }\n    }\n    @keyframes _star_14qf7_99 {\n      0% {\n        background-position: 0 0;\n      }\n      to {\n        background-position: -340px 0;\n      }\n    }\n    ._star_14qf7_99 {\n      display: inline-block;\n      background-image: url(https://i0.hdslb.com/bfs/activity-plat/static/20240521/6fdde5f06d0b876f68573682fa59da66/a8DG0BREmj.png);\n      background-size: 340px 20px;\n      background-repeat: no-repeat;\n      width: 20px;\n      height: 20px;\n      animation: _star_14qf7_99 0.85s steps(17);\n    }\n    @keyframes _light_14qf7_1 {\n      0% {\n        background-position: -100% 0;\n      }\n      to {\n        background-position: 60px 0;\n      }\n    }\n    ._fans_14qf7_13 {\n      position: relative;\n      user-select: none;\n    }\n    ._fans_14qf7_13 > span {\n      color: #fff;\n      font-family: fans-num, sans-serif !important;\n      font-size: 12px;\n      position: absolute;\n      top: 11px;\n      right: 39px;\n      transform: scale(0.88);\n      transform-origin: right center;\n      line-height: 1;\n    }\n    ._specialDynamicMedalPc_14qf7_30 {\n      display: inline-block;\n      height: 33px;\n      width: 110px;\n      overflow: hidden;\n    }\n    ._specialDynamicMedalPc_14qf7_30 ._specialDynamicMedal_14qf7_30 {\n      transform: scale(0.75);\n      transform-origin: left top;\n    }\n    ._specialDynamicMedalPc_14qf7_30 ._specialDynamicMedal_14qf7_30 ._text_14qf7_40 {\n      font-size: 14px;\n      transform: scale(1);\n    }\n    ._specialDynamicMedal_14qf7_30 {\n      width: 146px;\n      height: 44px;\n      position: relative;\n      user-select: none;\n    }\n    ._specialDynamicMedal_14qf7_30 ._background_14qf7_53 {\n      width: 108px;\n      height: 30px;\n      border-top-right-radius: 15px;\n      border-bottom-right-radius: 15px;\n      background-color: gray;\n      position: absolute;\n      top: 7px;\n      right: 0;\n      background: linear-gradient(270deg, #f8bb5b4d, #f8bb5b00);\n    }\n    ._specialDynamicMedal_14qf7_30 ._medalImg_14qf7_66 {\n      position: absolute;\n      right: 0;\n      top: 2px;\n    }\n    ._specialDynamicMedal_14qf7_30 ._medalImg_14qf7_66._medalImgAnimation_14qf7_71 {\n      animation: _jiggle_14qf7_1 1.4s linear;\n    }\n    ._specialDynamicMedal_14qf7_30 ._text_14qf7_40 {\n      color: #fff;\n      font-family: fans-num, sans-serif !important;\n      font-size: 12px;\n      line-height: 44px;\n      position: absolute;\n      top: 0;\n      right: 40px;\n      transform: scale(0.67);\n      transform-origin: right center;\n    }\n    ._specialDynamicMedal_14qf7_30 ._textMask_14qf7_88 {\n      background-image: url(https://i0.hdslb.com/bfs/activity-plat/static/20240522/6fdde5f06d0b876f68573682fa59da66/BalugIvNR2.png);\n      background-size: contain;\n      background-repeat: no-repeat;\n      background-position: -100% 0;\n      animation: _light_14qf7_1 1.1s linear;\n      color: transparent;\n      background-clip: text;\n      -webkit-background-clip: text;\n    }\n    ._specialDynamicMedal_14qf7_30 ._star_14qf7_99 {\n      position: absolute;\n      top: 5px;\n      right: 3px;\n    }\n    ._backgroundImg_aob6i_1 {\n      background-position: center;\n      background-repeat: no-repeat;\n    }\n    ._bfsImg_aob6i_6 {\n      display: block;\n    }\n    @font-face {\n      font-family: fans-num;\n      src: url(https://activity.hdslb.com/blackboard/static/20240516/6fdde5f06d0b876f68573682fa59da66/v6u7v27Ucs.ttf);\n    }\n    @keyframes _jiggle_1aw9v_1 {\n      0% {\n        transform: rotate(0);\n      }\n      14.3% {\n        transform: rotate(11deg);\n      }\n      28.6% {\n        transform: rotate(0);\n      }\n      35.7% {\n        transform: rotate(-8deg);\n      }\n      46.4% {\n        transform: rotate(0);\n      }\n      46.4% {\n        transform: rotate(0);\n      }\n      53.6% {\n        transform: rotate(3deg);\n      }\n      64.3% {\n        transform: rotate(0);\n      }\n      71.4% {\n        transform: rotate(-1deg);\n      }\n      82.1% {\n        transform: rotate(0);\n      }\n      92.8% {\n        transform: rotate(0.5deg);\n      }\n      to {\n        transform: rotate(0);\n      }\n    }\n    @keyframes _star_1aw9v_61 {\n      0% {\n        background-position: 0 0;\n      }\n      to {\n        background-position: -340px 0;\n      }\n    }\n    ._star_1aw9v_61 {\n      display: inline-block;\n      background-image: url(https://i0.hdslb.com/bfs/activity-plat/static/20240521/6fdde5f06d0b876f68573682fa59da66/a8DG0BREmj.png);\n      background-size: 340px 20px;\n      background-repeat: no-repeat;\n      width: 20px;\n      height: 20px;\n      animation: _star_1aw9v_61 0.85s steps(17);\n    }\n    @keyframes _light_1aw9v_1 {\n      0% {\n        background-position: -100% 0;\n      }\n      to {\n        background-position: 42px 0;\n      }\n    }\n    ._cardBg_1aw9v_13 {\n      display: inline-block;\n      position: relative;\n      user-select: none;\n      height: 48px;\n      max-width: 288px;\n      overflow: hidden;\n    }\n    ._cardBg_1aw9v_13 ._fanTextPosition_1aw9v_21 {\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n    ._fanText_1aw9v_21 {\n      height: 100%;\n      font-size: 13px;\n      line-height: 16px;\n      transform: scale(0.7);\n      transform-origin: center center;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n    }\n    ._fanText_1aw9v_21 > span {\n      font-family: fans-num, sans-serif !important;\n    }\n    ._specialMedal_1aw9v_44 {\n      user-select: none;\n      display: flex;\n      align-items: center;\n      position: relative;\n      height: 40px;\n    }\n    ._specialMedal_1aw9v_44 ._fanText_1aw9v_21 {\n      font-size: 8px;\n      line-height: 10px;\n      transform: none;\n    }\n    ._specialMedal_1aw9v_44 ._medalImgAnimation_1aw9v_57 {\n      animation: _jiggle_1aw9v_1 1.4s linear;\n    }\n    ._specialMedal_1aw9v_44 ._star_1aw9v_61 {\n      position: absolute;\n      top: 3px;\n      left: 17px;\n    }\n    ._specialMedal_1aw9v_44 ._fanTextWrap_1aw9v_67 {\n      position: relative;\n    }\n    ._specialMedal_1aw9v_44 ._textMask_1aw9v_71 {\n      position: absolute;\n      left: 0;\n      top: 0;\n      background-image: url(https://i0.hdslb.com/bfs/activity-plat/static/20240522/6fdde5f06d0b876f68573682fa59da66/BalugIvNR2.png);\n      background-size: auto 100%;\n      background-repeat: no-repeat;\n      background-position: -100% 0;\n      animation: _light_1aw9v_1 1.1s linear;\n      color: transparent;\n      background-clip: text;\n      -webkit-background-clip: text;\n    }\n    ._specialMedalPc_1aw9v_86 {\n      padding: 7px 12px;\n      display: inline-block;\n      height: 48px;\n      max-width: 288px;\n      overflow: hidden;\n      box-sizing: border-box;\n    }\n    ._specialMedalPc_1aw9v_86 ._specialMedal_1aw9v_44 {\n      height: 33px;\n    }\n    ._specialMedalPc_1aw9v_86 ._medalImg_1aw9v_57 {\n      width: 33px !important;\n      height: 33px !important;\n    }\n    ._specialMedalPc_1aw9v_86 ._star_1aw9v_61 {\n      transform: scale(0.8);\n      transform-origin: left top;\n      left: 14px;\n      top: 2px;\n    }\n    ._specialMedalPc_1aw9v_86 ._fanText_1aw9v_21 {\n      font-size: 9px;\n      line-height: 11px;\n    }\n  "]))),om([mn()],am.prototype,"data",2),am=om([hn("bili-comment-user-sailing-card")],am);var sm=Object.defineProperty,lm=Object.getOwnPropertyDescriptor,cm=function(e,t,n,i){for(var r,o=i>1?void 0:i?lm(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&sm(t,n,o),o},um=function(e){function t(){return o(this,t),r(this,t,arguments)}return p(t,e),s(t,[{key:"tag",get:function(){var e={class:"",text:"投票"};switch(this.data.label_kind){case 1:e.class="red",e.text="红方";break;case 2:e.class="blue",e.text="蓝方"}return e}},{key:"render",value:function(){return $t(zl||(zl=g(['<div id="option">\n      <div id="tag" class="','">','</div>\n      <div id="desc">',"</div>\n    </div>"])),this.tag.class,this.tag.text,this.data.desc)}}])}(dn);um.styles=vt(Ul||(Ul=g(["\n    :host {\n      display: flex;\n    }\n    #option {\n      display: flex;\n      align-items: center;\n      font-size: 12px;\n    }\n    #tag {\n      box-sizing: border-box;\n      line-height: 16px;\n      padding: 2px 6px;\n      border-radius: 2px;\n      margin-right: 4px;\n      background-color: var(--graph_bg_regular);\n      color: var(--text3);\n    }\n    #tag.red {\n      background-color: var(--Pi1);\n      color: var(--Pi5);\n    }\n    #tag.blue {\n      background-color: var(--brand_blue_thin);\n      color: var(--brand_blue);\n    }\n    #desc {\n      color: var(--text2);\n    }\n  "]))),cm([mn()],um.prototype,"data",2),cm([bn()],um.prototype,"tag",1),um=cm([hn("bili-comment-vote-option")],um);var dm=Object.defineProperty,pm=Object.getOwnPropertyDescriptor,hm=function(e,t,n,i){for(var r,o=i>1?void 0:i?pm(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&dm(t,n,o),o},fm=function(e){function t(){return o(this,t),r(this,t,arguments)}return p(t,e),s(t,[{key:"handleClick",value:function(){Tu(this.data.id)}},{key:"render",value:function(){return $t(Fl||(Fl=g(['\n      <div id="card">\n        <div id="head">\n          <bili-icon icon="BDC/vote_line/2" size="40"></bili-icon>\n        </div>\n        <div id="content">\n          <div id="info">\n            <div id="title">','</div>\n            <div id="desc">','人参与</div>\n          </div>\n        </div>\n        <div id="action">\n          <button @click=',">投票</button>\n        </div>\n      </div>\n    "])),this.data.title,this.data.cnt||0,this.handleClick)}}])}(dn);fm.styles=vt(Vl||(Vl=g(["\n    #card {\n      width: 100%;\n      height: 80px;\n      display: flex;\n      border: 0.5px solid var(--graph_bg_thick);\n      border-radius: 4px;\n      background-color: var(--bg1);\n    }\n\n    #head {\n      width: 80px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-shrink: 0;\n      border-top-left-radius: 4px;\n      border-bottom-left-radius: 4px;\n      background-color: var(--brand_blue_thin);\n      color: var(--brand_blue);\n    }\n\n    #content {\n      flex: 1;\n      overflow: hidden;\n      display: flex;\n      align-items: center;\n      padding-left: 15px;\n    }\n    #info #title {\n      font-size: 14px;\n      color: var(--text1);\n    }\n    #info #desc {\n      margin-top: 10px;\n      font-size: 12px;\n      color: var(--text3);\n    }\n\n    #action {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-shrink: 0;\n      width: 90px;\n    }\n    #action button {\n      width: 54px;\n      height: 28px;\n      font-size: 13px;\n      border-radius: 4px;\n      text-align: center;\n      line-height: 28px;\n      color: var(--text_white);\n      background-color: var(--brand_blue);\n      cursor: pointer;\n      outline: none;\n      border: none;\n    }\n  "]))),hm([mn({type:Object})],fm.prototype,"data",2),fm=hm([hn("bili-comment-vote-renderer")],fm);var vm=function(e){return e&&e.Math===Math&&e},mm=vm("object"==("undefined"==typeof globalThis?"undefined":k(globalThis))&&globalThis)||vm("object"==("undefined"==typeof window?"undefined":k(window))&&window)||vm("object"==("undefined"==typeof self?"undefined":k(self))&&self)||vm("object"==k(Qn)&&Qn)||vm("object"==k(Qn)&&Qn)||function(){return this}()||Function("return this")(),bm={},ym=function(e){try{return!!e()}catch(e){return!0}},gm=!ym((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),wm=!ym((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),xm=wm,km=Function.prototype.call,Am=xm?km.bind(km):function(){return km.apply(km,arguments)},_m={},Em={}.propertyIsEnumerable,Cm=Object.getOwnPropertyDescriptor,Sm=Cm&&!Em.call({1:2},1);_m.f=Sm?function(e){var t=Cm(this,e);return!!t&&t.enumerable}:Em;var Tm,Om,Pm=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Im=wm,Mm=Function.prototype,Lm=Mm.call,jm=Im&&Mm.bind.bind(Lm,Lm),Rm=Im?jm:function(e){return function(){return Lm.apply(e,arguments)}},Dm=Rm,Nm=Dm({}.toString),Bm=Dm("".slice),zm=function(e){return Bm(Nm(e),8,-1)},Um=ym,Fm=zm,Vm=Object,Hm=Rm("".split),Wm=Um((function(){return!Vm("z").propertyIsEnumerable(0)}))?function(e){return"String"===Fm(e)?Hm(e,""):Vm(e)}:Vm,$m=function(e){return null==e},qm=$m,Gm=TypeError,Xm=function(e){if(qm(e))throw new Gm("Can't call method on "+e);return e},Zm=Wm,Ym=Xm,Qm=function(e){return Zm(Ym(e))},Km="object"==("undefined"==typeof document?"undefined":k(document))&&document.all,Jm=void 0===Km&&void 0!==Km?function(e){return"function"==typeof e||e===Km}:function(e){return"function"==typeof e},eb=Jm,tb=function(e){return"object"==k(e)?null!==e:eb(e)},nb=mm,ib=Jm,rb=function(e,t){return arguments.length<2?(n=nb[e],ib(n)?n:void 0):nb[e]&&nb[e][t];var n},ob=Rm({}.isPrototypeOf),ab=mm,sb="undefined"!=typeof navigator&&String(navigator.userAgent)||"",lb=ab.process,cb=ab.Deno,ub=lb&&lb.versions||cb&&cb.version,db=ub&&ub.v8;db&&(Om=(Tm=db.split("."))[0]>0&&Tm[0]<4?1:+(Tm[0]+Tm[1])),!Om&&sb&&(!(Tm=sb.match(/Edge\/(\d+)/))||Tm[1]>=74)&&(Tm=sb.match(/Chrome\/(\d+)/))&&(Om=+Tm[1]);var pb=Om,hb=ym,fb=mm.String,vb=!!Object.getOwnPropertySymbols&&!hb((function(){var e=Symbol("symbol detection");return!fb(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&pb&&pb<41})),mb=vb&&!Symbol.sham&&"symbol"==k(Symbol.iterator),bb=rb,yb=Jm,gb=ob,wb=Object,xb=mb?function(e){return"symbol"==k(e)}:function(e){var t=bb("Symbol");return yb(t)&&gb(t.prototype,wb(e))},kb=String,Ab=Jm,_b=function(e){try{return kb(e)}catch(e){return"Object"}},Eb=TypeError,Cb=function(e){if(Ab(e))return e;throw new Eb(_b(e)+" is not a function")},Sb=Cb,Tb=$m,Ob=Am,Pb=Jm,Ib=tb,Mb=TypeError,Lb={exports:{}},jb=mm,Rb=Object.defineProperty,Db=function(e,t){try{Rb(jb,e,{value:t,configurable:!0,writable:!0})}catch(n){jb[e]=t}return t},Nb=mm,Bb=Db,zb="__core-js_shared__",Ub=Lb.exports=Nb[zb]||Bb(zb,{});(Ub.versions||(Ub.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Fb=Lb.exports,Vb=Fb,Hb=function(e,t){return Vb[e]||(Vb[e]=t||{})},Wb=Xm,$b=Object,qb=function(e){return $b(Wb(e))},Gb=qb,Xb=Rm({}.hasOwnProperty),Zb=Object.hasOwn||function(e,t){return Xb(Gb(e),t)},Yb=Rm,Qb=0,Kb=Math.random(),Jb=Yb(1..toString),ey=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Jb(++Qb+Kb,36)},ty=Hb,ny=Zb,iy=ey,ry=vb,oy=mb,ay=mm.Symbol,sy=ty("wks"),ly=oy?ay.for||ay:ay&&ay.withoutSetter||iy,cy=function(e){return ny(sy,e)||(sy[e]=ry&&ny(ay,e)?ay[e]:ly("Symbol."+e)),sy[e]},uy=Am,dy=tb,py=xb,hy=function(e,t){var n=e[t];return Tb(n)?void 0:Sb(n)},fy=function(e,t){var n,i;if("string"===t&&Pb(n=e.toString)&&!Ib(i=Ob(n,e)))return i;if(Pb(n=e.valueOf)&&!Ib(i=Ob(n,e)))return i;if("string"!==t&&Pb(n=e.toString)&&!Ib(i=Ob(n,e)))return i;throw new Mb("Can't convert object to primitive value")},vy=TypeError,my=cy("toPrimitive"),by=function(e,t){if(!dy(e)||py(e))return e;var n,i=hy(e,my);if(i){if(void 0===t&&(t="default"),n=uy(i,e,t),!dy(n)||py(n))return n;throw new vy("Can't convert object to primitive value")}return void 0===t&&(t="number"),fy(e,t)},yy=xb,gy=function(e){var t=by(e,"string");return yy(t)?t:t+""},wy=tb,xy=mm.document,ky=wy(xy)&&wy(xy.createElement),Ay=function(e){return ky?xy.createElement(e):{}},_y=Ay,Ey=!gm&&!ym((function(){return 7!==Object.defineProperty(_y("div"),"a",{get:function(){return 7}}).a})),Cy=gm,Sy=Am,Ty=_m,Oy=Pm,Py=Qm,Iy=gy,My=Zb,Ly=Ey,jy=Object.getOwnPropertyDescriptor;bm.f=Cy?jy:function(e,t){if(e=Py(e),t=Iy(t),Ly)try{return jy(e,t)}catch(e){}if(My(e,t))return Oy(!Sy(Ty.f,e,t),e[t])};var Ry={},Dy=gm&&ym((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ny=tb,By=String,zy=TypeError,Uy=function(e){if(Ny(e))return e;throw new zy(By(e)+" is not an object")},Fy=gm,Vy=Ey,Hy=Dy,Wy=Uy,$y=gy,qy=TypeError,Gy=Object.defineProperty,Xy=Object.getOwnPropertyDescriptor,Zy="enumerable",Yy="configurable",Qy="writable";Ry.f=Fy?Hy?function(e,t,n){if(Wy(e),t=$y(t),Wy(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Qy in n&&!n[Qy]){var i=Xy(e,t);i&&i[Qy]&&(e[t]=n.value,n={configurable:Yy in n?n[Yy]:i[Yy],enumerable:Zy in n?n[Zy]:i[Zy],writable:!1})}return Gy(e,t,n)}:Gy:function(e,t,n){if(Wy(e),t=$y(t),Wy(n),Vy)try{return Gy(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new qy("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Ky=Ry,Jy=Pm,eg=gm?function(e,t,n){return Ky.f(e,t,Jy(1,n))}:function(e,t,n){return e[t]=n,e},tg={exports:{}},ng=gm,ig=Zb,rg=Function.prototype,og=ng&&Object.getOwnPropertyDescriptor,ag=ig(rg,"name"),sg={EXISTS:ag,PROPER:ag&&"something"===function(){}.name,CONFIGURABLE:ag&&(!ng||ng&&og(rg,"name").configurable)},lg=Jm,cg=Fb,ug=Rm(Function.toString);lg(cg.inspectSource)||(cg.inspectSource=function(e){return ug(e)});var dg,pg,hg,fg=cg.inspectSource,vg=Jm,mg=mm.WeakMap,bg=vg(mg)&&/native code/.test(String(mg)),yg=ey,gg=Hb("keys"),wg=function(e){return gg[e]||(gg[e]=yg(e))},xg={},kg=bg,Ag=mm,_g=tb,Eg=eg,Cg=Zb,Sg=Fb,Tg=wg,Og=xg,Pg="Object already initialized",Ig=Ag.TypeError,Mg=Ag.WeakMap;if(kg||Sg.state){var Lg=Sg.state||(Sg.state=new Mg);Lg.get=Lg.get,Lg.has=Lg.has,Lg.set=Lg.set,dg=function(e,t){if(Lg.has(e))throw new Ig(Pg);return t.facade=e,Lg.set(e,t),t},pg=function(e){return Lg.get(e)||{}},hg=function(e){return Lg.has(e)}}else{var jg=Tg("state");Og[jg]=!0,dg=function(e,t){if(Cg(e,jg))throw new Ig(Pg);return t.facade=e,Eg(e,jg,t),t},pg=function(e){return Cg(e,jg)?e[jg]:{}},hg=function(e){return Cg(e,jg)}}var Rg={set:dg,get:pg,has:hg,enforce:function(e){return hg(e)?pg(e):dg(e,{})},getterFor:function(e){return function(t){var n;if(!_g(t)||(n=pg(t)).type!==e)throw new Ig("Incompatible receiver, "+e+" required");return n}}},Dg=Rm,Ng=ym,Bg=Jm,zg=Zb,Ug=gm,Fg=sg.CONFIGURABLE,Vg=fg,Hg=Rg.enforce,Wg=Rg.get,$g=String,qg=Object.defineProperty,Gg=Dg("".slice),Xg=Dg("".replace),Zg=Dg([].join),Yg=Ug&&!Ng((function(){return 8!==qg((function(){}),"length",{value:8}).length})),Qg=String(String).split("String"),Kg=tg.exports=function(e,t,n){"Symbol("===Gg($g(t),0,7)&&(t="["+Xg($g(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!zg(e,"name")||Fg&&e.name!==t)&&(Ug?qg(e,"name",{value:t,configurable:!0}):e.name=t),Yg&&n&&zg(n,"arity")&&e.length!==n.arity&&qg(e,"length",{value:n.arity});try{n&&zg(n,"constructor")&&n.constructor?Ug&&qg(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=Hg(e);return zg(i,"source")||(i.source=Zg(Qg,"string"==typeof t?t:"")),e};Function.prototype.toString=Kg((function(){return Bg(this)&&Wg(this).source||Vg(this)}),"toString");var Jg=tg.exports,ew=Jm,tw=Ry,nw=Jg,iw=Db,rw={},ow=Math.ceil,aw=Math.floor,sw=Math.trunc||function(e){var t=+e;return(t>0?aw:ow)(t)},lw=sw,cw=function(e){var t=+e;return t!=t||0===t?0:lw(t)},uw=cw,dw=Math.max,pw=Math.min,hw=cw,fw=Math.min,vw=function(e){var t=hw(e);return t>0?fw(t,9007199254740991):0},mw=function(e){return vw(e.length)},bw=Qm,yw=function(e,t){var n=uw(e);return n<0?dw(n+t,0):pw(n,t)},gw=mw,ww=function(e){return function(t,n,i){var r=bw(t),o=gw(r);if(0===o)return!e&&-1;var a,s=yw(i,o);if(e&&n!=n){for(;o>s;)if((a=r[s++])!=a)return!0}else for(;o>s;s++)if((e||s in r)&&r[s]===n)return e||s||0;return!e&&-1}},xw={includes:ww(!0),indexOf:ww(!1)},kw=Zb,Aw=Qm,_w=xw.indexOf,Ew=xg,Cw=Rm([].push),Sw=function(e,t){var n,i=Aw(e),r=0,o=[];for(n in i)!kw(Ew,n)&&kw(i,n)&&Cw(o,n);for(;t.length>r;)kw(i,n=t[r++])&&(~_w(o,n)||Cw(o,n));return o},Tw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ow=Sw,Pw=Tw.concat("length","prototype");rw.f=Object.getOwnPropertyNames||function(e){return Ow(e,Pw)};var Iw={};Iw.f=Object.getOwnPropertySymbols;var Mw=rb,Lw=rw,jw=Iw,Rw=Uy,Dw=Rm([].concat),Nw=Mw("Reflect","ownKeys")||function(e){var t=Lw.f(Rw(e)),n=jw.f;return n?Dw(t,n(e)):t},Bw=Zb,zw=Nw,Uw=bm,Fw=Ry,Vw=ym,Hw=Jm,Ww=/#|\.prototype\./,$w=function(e,t){var n=Gw[qw(e)];return n===Zw||n!==Xw&&(Hw(t)?Vw(t):!!t)},qw=$w.normalize=function(e){return String(e).replace(Ww,".").toLowerCase()},Gw=$w.data={},Xw=$w.NATIVE="N",Zw=$w.POLYFILL="P",Yw=$w,Qw=mm,Kw=bm.f,Jw=eg,ex=function(e,t,n,i){i||(i={});var r=i.enumerable,o=void 0!==i.name?i.name:t;if(ew(n)&&nw(n,o,i),i.global)r?e[t]=n:iw(t,n);else{try{i.unsafe?e[t]&&(r=!0):delete e[t]}catch(e){}r?e[t]=n:tw.f(e,t,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e},tx=Db,nx=function(e,t,n){for(var i=zw(t),r=Fw.f,o=Uw.f,a=0;a<i.length;a++){var s=i[a];Bw(e,s)||n&&Bw(n,s)||r(e,s,o(t,s))}},ix=Yw,rx=zm,ox=Array.isArray||function(e){return"Array"===rx(e)},ax=TypeError,sx=zm,lx=Rm,cx=function(e){if("Function"===sx(e))return lx(e)},ux=Cb,dx=wm,px=cx(cx.bind),hx=ox,fx=mw,vx=function(e){if(e>9007199254740991)throw ax("Maximum allowed index exceeded");return e},mx=function(e,t){return ux(e),void 0===t?e:dx?px(e,t):function(){return e.apply(t,arguments)}},bx=function e(t,n,i,r,o,a,s,l){for(var c,u=o,d=0,p=!!s&&mx(s,l);d<r;)d in i&&(c=p?p(i[d],d,n):i[d],a>0&&hx(c)?u=e(t,n,c,fx(c),u,a-1)-1:(vx(u+1),t[u]=c),u++),d++;return u},yx={};yx[cy("toStringTag")]="z";var gx="[object z]"===String(yx),wx=Jm,xx=zm,kx=cy("toStringTag"),Ax=Object,_x="Arguments"===xx(function(){return arguments}()),Ex=gx?xx:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Ax(e),kx))?n:_x?xx(t):"Object"===(i=xx(t))&&wx(t.callee)?"Arguments":i},Cx=Rm,Sx=ym,Tx=Jm,Ox=Ex,Px=fg,Ix=function(){},Mx=rb("Reflect","construct"),Lx=/^\s*(?:class|function)\b/,jx=Cx(Lx.exec),Rx=!Lx.test(Ix),Dx=function(e){if(!Tx(e))return!1;try{return Mx(Ix,[],e),!0}catch(e){return!1}},Nx=function(e){if(!Tx(e))return!1;switch(Ox(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Rx||!!jx(Lx,Px(e))}catch(e){return!0}};Nx.sham=!0;var Bx=!Mx||Sx((function(){var e;return Dx(Dx.call)||!Dx(Object)||!Dx((function(){e=!0}))||e}))?Nx:Dx,zx=ox,Ux=Bx,Fx=tb,Vx=cy("species"),Hx=Array,Wx=function(e){var t;return zx(e)&&(t=e.constructor,(Ux(t)&&(t===Hx||zx(t.prototype))||Fx(t)&&null===(t=t[Vx]))&&(t=void 0)),void 0===t?Hx:t},$x=bx,qx=qb,Gx=mw,Xx=cw,Zx=function(e,t){return new(Wx(e))(0===t?0:t)};(function(e,t){var n,i,r,o,a,s=e.target,l=e.global,c=e.stat;if(n=l?Qw:c?Qw[s]||tx(s,{}):Qw[s]&&Qw[s].prototype)for(i in t){if(o=t[i],r=e.dontCallGetSet?(a=Kw(n,i))&&a.value:n[i],!ix(l?i:s+(c?".":"#")+i,e.forced)&&void 0!==r){if(k(o)==k(r))continue;nx(o,r)}(e.sham||r&&r.sham)&&Jw(o,"sham",!0),ex(n,i,o,e)}})({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=qx(this),n=Gx(t),i=Zx(t,0);return i.length=$x(i,t,t,n,0,void 0===e?1:Xx(e)),i}});var Yx={},Qx=Sw,Kx=Tw,Jx=Object.keys||function(e){return Qx(e,Kx)},ek=gm,tk=Dy,nk=Ry,ik=Uy,rk=Qm,ok=Jx;Yx.f=ek&&!tk?Object.defineProperties:function(e,t){ik(e);for(var n,i=rk(t),r=ok(t),o=r.length,a=0;o>a;)nk.f(e,n=r[a++],i[n]);return e};var ak,sk=rb("document","documentElement"),lk=Uy,ck=Yx,uk=Tw,dk=xg,pk=sk,hk=Ay,fk="prototype",vk="script",mk=wg("IE_PROTO"),bk=function(){},yk=function(e){return"<"+vk+">"+e+"</"+vk+">"},gk=function(e){e.write(yk("")),e.close();var t=e.parentWindow.Object;return e=null,t},wk=function(){try{ak=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;wk="undefined"!=typeof document?document.domain&&ak?gk(ak):(t=hk("iframe"),n="java"+vk+":",t.style.display="none",pk.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(yk("document.F=Object")),e.close(),e.F):gk(ak);for(var i=uk.length;i--;)delete wk[fk][uk[i]];return wk()};dk[mk]=!0;var xk=Object.create||function(e,t){var n;return null!==e?(bk[fk]=lk(e),n=new bk,bk[fk]=null,n[mk]=e):n=wk(),void 0===t?n:ck.f(n,t)},kk=cy,Ak=xk,_k=Ry.f,Ek=kk("unscopables"),Ck=Array.prototype;void 0===Ck[Ek]&&_k(Ck,Ek,{configurable:!0,value:Ak(null)});(function(e){Ck[Ek][e]=!0})("flat");var Sk=mm,Tk=Rm;(function(e,t){Tk(Sk[e].prototype[t])})("Array","flat");var Ok=function(){return s((function e(t){o(this,e),this.$el=null,this.options=null,this.parent="",this.disposables=null,this.event={},this.options=t}),[{key:"init",value:function(){this.initDependencies();var e=this.options,t=e.oid,n=e.pageType,i=e.jumpReplyId,r=e.disableVideoTime,o=e.showMaxReplyCount,a=e.scene;this.$el=document.createElement("bili-comments"),this.$el.setAttribute("data-params","".concat(n,",").concat(t)),i&&this.$el.setAttribute("seek-id",String(i)),o&&"dynamic"===a&&this.$el.setAttribute("max-view-limit",String(o)),(r||"dynamic"===a)&&this.$el.setAttribute("disable-video-time","true"),this.disposables=Fi()}},{key:"initDependencies",value:function(){this.initCSSVars()}},{key:"initCSSVars",value:function(){if(!getComputedStyle(document.documentElement).getPropertyValue("--brand_pink")){var e=document.createElement("link");e.rel="stylesheet",e.href="//s1.hdslb.com/bfs/seed/jinkela/short/b-style/theme.min.css",document.head.appendChild(e)}}},{key:"mount",value:function(e){var t=this;if(this.$el)return console.log("comment instance already mounted");var n=document.querySelector(e);if(!n)throw new Error("mount element not found");this.init(),this.parent=e,n.appendChild(this.$el),this.disposables.addEventListener(this.$el,"expand",(function(e){var n,i,r=e.detail;if("note"===r.type&&r.oid){if(null===(n=t.event.note)||void 0===n?void 0:n.openNoteDetail){var o=(null===(i=document.querySelector("#bilibili-player"))||void 0===i?void 0:i.clientHeight)||422,a=window.innerHeight,s=r.ref.getBoundingClientRect(),l=a-134,c=l>o?o:l,u=s.left+s.width+24,d=function(e,t){var n,i=null===(n=null==t?void 0:t.getBoundingClientRect())||void 0===n?void 0:n.top;return(e===window?document.documentElement.scrollTop:null==e?void 0:e.scrollTop)+i}(window,r.ref);return s.top-88<0?d-=s.top-72:a-(s.top+s.height+c+70+8)<0?d+=a-(s.top+s.height+c+70+8):d-=24,void t.event.note.openNoteDetail({noteId:r.oid,noteDetailStyle:{initLeft:u,initTop:d}})}var p,h;p=r.oid,h="https://www.bilibili.com/h5/note-app/view?cvid=".concat(p,"&pagefrom=comment"),window.open(h)}})),this.disposables.addEventListener(this.$el,"seek",(function(e){var t;if(null===(t=window.commentAgent)||void 0===t?void 0:t.seek){var n=e.detail,i=n.time,r=n.part;window.commentAgent.seek(i,r),window.scrollTo(0,0)}})),this.disposables.addEventListener(this.$el,"view-more",(function(){var e;(null===(e=t.event.dynamic)||void 0===e?void 0:e.viewAllReply)&&t.event.dynamic.viewAllReply()})),this.disposables.addEventListener(this.$el,"inited",(function(){document.dispatchEvent(new CustomEvent("comments-fcp",{detail:t.options||{}}))}))}},{key:"unmount",value:function(){this.$el&&(this.$el.parentElement&&this.$el.parentElement.removeChild(this.$el),this.options=null,this.disposables&&(this.disposables.dispose(),this.disposables=null),this.$el=null,this.event={},this.parent="")}},{key:"reset",value:function(e){var t=this.options||{};if(!e.theme||1!==Object.keys(e).length){var n=this.parent;n&&(this.unmount(),this.options=Object.assign(Object.assign({},t),e),this.mount(n))}}},{key:"registerEvent",value:function(e){this.event=e}}])}();window.initComment=function(e,t){if(!document.querySelector(e))throw new Error("mount element not found");var n=new Ok(t);return n.mount(e),n},window.initNotePreview=function(e,t){if(!t.noteInfo)throw new Error("noteInfo is required");var n=document.querySelector(e);if(!n)throw new Error("mount element not found");var i=document.createElement("bili-comment-preview-renderer");i.loadNoteData(t.noteInfo),n.appendChild(i)}}();
